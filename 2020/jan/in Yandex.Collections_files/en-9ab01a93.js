(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{"13ne":function(e,t,n){var c=n("C4oF").translateWrapper;e.exports=c({wait:"Just a secondâ€¦",speak:"Please say something...",error:"Unknown error",blocked:"You have blocked access to the microphone",buttonErrorLabel:"Continue searching",buttonSettingLabel:"How to set up the microphone",instructionLabel:"How to turn on voice search (instructions in Help)"})},"1A4K":function(e,t,n){"use strict";n.r(t);var c,r,a=n("pVnL"),i=n.n(a),s=n("cDcd"),o=((c={})[c[r="CARD_LIKES"]="card_likes"]=r,c[c[r="CARD_SHARES"]="card_shares"]=r,c[c[r="CARD_COMMENTS"]="card_comments"]=r,c[c[r="BOARD_COAUTHORS"]="board_coauthors"]=r,c[c[r="USER_FOLLOWERS"]="user_followers"]=r,c[c[r="BOARD_FOLLOWERS"]="board_followers"]=r,c[c[r="USER_SUBSCRIPTIONS"]="user_subscriptions"]=r,c[c[r="USER_COMPANIES"]="user_companies"]=r,function(e,t){return e[e[t="BOARD_EDIT"]="board_edit"]=t,e[e[t="MIC"]="mic"]=t,e}({})),l=n("Pxkf"),u=n("nAK0"),d=n("HOjc"),m=n("8OQS"),f=n.n(m),p=n("faye"),b=n("/MKj"),E=n("3FJW"),v=n("5QOx"),h=n("o0o1"),_=n.n(h),k=n("Gxl1"),O=n("DMoZ"),y=n("4RqY"),x=n("T6Rw"),C=n("3tUY"),N=n("mxxA"),R=n("9yiq"),w=Object(x.a)((function(e,t){var n=t.type,c=Object(O.a)(e),r=c&&c.hellgates;return N.a.reducer(e,i()({},c,{hellgates:[].concat(r||[],[n])}))})),S=Object(y.a)((function(e,t){var n,c,r;return _.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.dispatch,(c=Object(k.a)(location.search.slice(1))).hg_type=e.type,c._=Date.now(),r=location.pathname+"?"+Object(R.a)(c),a.next=7,_.a.awrap(n(Object(C.a)({url:r,trigger:!1})));case 7:n(w(e));case 8:case"end":return a.stop()}}))})),g=n("Oi3d"),T=n("8yzE"),D=n("Fe8d"),L=n("GhlN"),j=n("D+d4");n("8VJO"),n("HoHF");var A=function(e){var t=e.title,n=e.onClose,c=e.onClickOut,r=e.className,a=e.disableParanja,i=e.paranjaClassName,o=e.children,l=s.useState(0),u=l[0],m=l[1],f=s.useCallback((function(e){c&&e.target.classList.contains("cl-sideblock")&&c()}),[c]),p=(s.useCallback((function(e){return m(Math.max(0,e))}),[]),s.useCallback((function(e){var t,c;return _.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=document.body.clientHeight,c=t-e,!(e>50)){r.next=8;break}return r.next=5,_.a.awrap(Object(D.a)({step:function(t){m(e+c*t)}}));case 5:n&&n(),r.next=10;break;case 8:return r.next=10,_.a.awrap(Object(D.a)({step:function(t){return m(e-t*e)}}));case 10:case"end":return r.stop()}}))}),[]),s.createElement(s.Fragment,null,Boolean(t)&&s.createElement("div",{className:"cl-sideblock__head"},t,s.createElement(d.a,{className:"cl-sideblock__close",onClick:n})),s.createElement("div",{className:"cl-sideblock__body"},o)));return s.createElement(s.Fragment,null,!a&&s.createElement("div",{className:Object(L.a)("cl-sideblock-p",{overscroll:0!=u},i),onClick:c}),s.createElement("div",{className:Object(L.a)("cl-sideblock",{},r),onClick:f},s.createElement(j.a,{keyCode:T.a.ESCAPE,callback:function(){return n&&n(),!0},options:{}},p)))},M=n("pnMn"),F="page_sideblock_prepare",U="page_sideblock_lock",K="page_sideblock_open";function B(e,t){e&&(e.style.transform=t,e.style.webkitTransform=t)}var P,H=function(e){var t=e.onClose,n=e.type,c=(e.url,f()(e,["onClose","type","url"])),r=Object(b.useDispatch)(),a=Object(g.a)(E.a),o=s.useRef(!0),l=s.useMemo((function(){var e=document.createElement("div");return document.body.appendChild(e),e}),[]);s.useEffect((function(){return r(S({type:n})),function(){r(Object(v.a)({type:n})),document.body.removeChild(l)}}),[]);var u=s.useCallback((function(){t&&t()}),[]);!function(e){var t=document.body,n=s.useRef(),c=s.useRef(null),r=s.useRef(null),a=s.useRef();function i(){clearTimeout(a.current),t.classList.remove(U),t.classList.remove(K),B(c.current,""),B(r.current,""),"number"==typeof n.current&&window.scrollTo(0,n.current),n.current=void 0,t.classList.remove(F)}s.useEffect((function(){c.current||(c.current=document.querySelector(".cl__w")),r.current||(r.current=document.querySelector(".head__wrap"));var e=Math.round(Object(M.a)());t.classList.add(F),t.classList.add(K),a.current=window.setTimeout((function(){t.classList.add(U),B(c.current,"translateY(-"+e+"px)"),B(r.current,"translateY("+e+"px)"),window.scrollTo(0,0),n.current=e}),500)}),[!0]),s.useEffect((function(){return i}),[])}();var d=a.includes(n);if(s.useEffect((function(){o.current?o.current=!1:d||u()}),[o.current,d]),!d)return null;var m=s.createElement(A,i()({onClose:u,onClickOut:u},c));return Object(p.createPortal)(m,l)},I=n("WbN8"),q=n("Qr5T");!function(e){e[e.NONE=0]="NONE",e[e.ONE_SECOND=1]="ONE_SECOND",e[e.TALK=2]="TALK",e[e.TEXT=3]="TEXT",e[e.ERROR=4]="ERROR",e[e.BLOCKED=5]="BLOCKED"}(P||(P={}));var X,J,W=1e4,Y=.8,z=["Permission denied","MediaDeviceFailedDueToShutdown","PermissionDeniedError","PermissionDismissedError","Permission dismissed"],G=window;void 0===G.ya&&(G.ya={}),void 0===G.ya.speechkit&&(G.ya.speechkit={});var Q={websocketProtocol:"wss://",asrUrl:"webasr.yandex.net/asrsocket.ws",ttsUrl:"https://tts.voicetech.yandex.net",ttsStreamUrl:"webasr.yandex.net/ttssocket.ws",lang:"ru-RU",langWhitelist:["ru-RU","tr-TR","en-US","en-GB","uk-UA","ru","tr","en","uk","en-EN"],model:"notes",applicationName:"jsapi",apikey:"",uuid:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))};void 0===G.ya.speechkit._extend?G.ya.speechkit.settings=Q:G.ya.speechkit.settings=G.ya.speechkit._extend(Q,G.ya.speechkit.settings);var V=0,Z=n("EvZm"),$=n("13ne");n("bI7X"),n("8F/m");var ee=function(e){var t=e.className,n=e.step,c=e.text,r=e.amplify,a=e.onDone,o=s.useRef(null),l=s.useState(0),u=l[0],d=l[1],m=Math.min(1.2*r,1);return s.useEffect((function(){if(o.current){var e=parseFloat(window.getComputedStyle(o.current)["padding-top"]);d(1.08*(o.current.clientHeight-e))}}),[n,o.current]),s.createElement("div",{className:Object(L.a)("cl-voice-search",{},t)},s.createElement("div",{className:"cl-voice-search__content",ref:o},n===P.ONE_SECOND&&s.createElement("h4",{className:"cl-voice-search__title cl-voice-search__title_init"},$.wait()),n===P.TALK&&s.createElement("h4",{className:"cl-voice-search__title"},$.speak().split("").map((function(e,t){return s.createElement("span",{key:t},e)}))),n===P.TEXT&&s.createElement("div",{className:"cl-voice-search__article"},s.createElement("div",{className:"cl-voice-search__article-wrap"},s.createElement("p",{className:"cl-voice-search__text"},c))),[P.TALK,P.TEXT].includes(n)&&s.createElement("div",{className:"cl-voice-search__indicator-container"},s.createElement("div",{className:"cl-voice-search__indicator",style:i()({},r<=.4?{}:{transition:"opacity .1s linear, transform 0s linear",transform:"translate(-50%, -50%) scale("+m+")",opacity:1},{width:u+"px",height:u+"px"})})),n===P.ERROR&&s.createElement("p",{className:"cl-voice-search__error"},$.error()),n===P.BLOCKED&&s.createElement(s.Fragment,null,s.createElement("p",{className:"cl-voice-search__error"},$.blocked()),s.createElement("p",{className:"cl-voice-search__subtitle"},$.instructionLabel())),[P.ERROR,P.BLOCKED].includes(n)&&s.createElement("div",{className:"cl-voice-search__action"},s.createElement(Z.a,{ei:!0,size:"M",type:"action",onClick:function(){return a("")},className:"cl-voice-search__button",label:$.buttonErrorLabel()}),n===P.BLOCKED&&s.createElement(Z.a,{ei:!0,size:"M",type:"normal",className:"cl-voice-search__button",label:$.buttonSettingLabel(),props:{href:"https://yandex.ru/support/search/how-to-search/voice-search.html"}}))))},te=function(e){var t=e.className,n=e.onDone,c=function(e){var t=e.onDone,n=s.useReducer((function(e){return e+1}),0)[1],c=s.useRef(""),r=s.useRef(P.NONE),a=s.useRef(),i=s.useRef(),o=s.useRef(),l=s.useState(0),u=l[0],d=l[1];function m(e){r.current=e,n(0)}function f(e){var s,l,u=e.FORMAT.OPUS||e.FORMAT.PCM16;a.current=new e.SpeechRecognition,a.current.start({lang:"ru-RU",model:"general",apikey:"f2469bd8-50d8-4ed8-a773-865a81eb9352",initCallback:function(){clearTimeout(i.current),m(P.TALK)},accessGrantedCallback:function(){m(P.ONE_SECOND),o.current=setTimeout(t,W)},dataCallback:function(e,a){!function(e){e&&(c.current=e,r.current=P.TEXT,n(0))}(e),a&&(t(c.current),p())},errorCallback:function(e){z.includes(e)?m(P.BLOCKED):m(P.ERROR),p()},format:u,particialResults:!0,utteranceSilence:100,use_snr:!1,yandexuid:Object(I.a)("yandexuid"),applicationName:"imgtouch"}),s=a.current,function e(){if(a.current){if(l){var t=new Uint8Array(l.frequencyBinCount);l.getByteFrequencyData(t);var n=[].slice.call(t,0,4),c=n.reduce((function(e,t){return e+t}),0)/n.length;d((V=Y*(i=c/255)+(1-Y)*(o=V),i<o?0:V))}else{var r=s.recorder;r&&((l=r.getAnalyserNode()).fftSize=32,l.smoothingTimeConstant=.95)}var i,o;window.requestAnimationFrame(e)}}()}function p(){clearTimeout(i.current),clearTimeout(o.current),a.current&&(a.current.abort(),a.current=void 0)}return s.useEffect((function(){return i.current=setTimeout((function(){return m(P.ONE_SECOND)}),1e3),J?f(J):(X||(X=Object(q.a)("https://yastatic.net/webspeechkit/webspeechkit-recognition.min.js").then((function(){J=window.ya.speechkit}))),X.then((function(){J?f(J):m(P.ERROR)}))),p}),[]),[r.current,c.current,u]}({onDone:n}),r=c[0],a=c[1],i=c[2];return s.createElement(ee,{className:t,step:r,text:a,amplify:i,onDone:n})};n("3576"),n.d(t,"SideblockMic",(function(){return ne}));var ne=function(e){var t=e.resolve,n=s.useCallback((function(){return t("")}),[t]),c=Object(l.a)(),r=function(){var e=function(){return"visible"==document.visibilityState},t=s.useState(e()),n=t[0],c=t[1];return s.useEffect((function(){var t=function(){return c(e)};return document.addEventListener("visibilitychange",t),function(){document.removeEventListener("visibilitychange",t)}})),n}();return s.useEffect((function(){r||n()}),[r]),s.useEffect((function(){var e=i()({type:o.MIC},c);return u.d.clickSideblockOpen(e),function(){u.d.clickSideblockClose(e)}})),s.createElement(H,{type:o.MIC,className:"cl-sideblock-mic",paranjaClassName:"cl-sideblock-mic-p",onClose:n},s.createElement(d.a,{className:"cl-sideblock-mic__close",onClick:function(){t("")}}),s.createElement(te,{className:"cl-sideblock-mic__voice",onDone:t}))}},3576:function(e,t,n){},"8F/m":function(e,t,n){},"8VJO":function(e,t,n){},HoHF:function(e,t,n){},bI7X:function(e,t,n){}}]);