(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"3QE8":function(t,e,r){"use strict";r.r(e);var a={};r.r(a),r.d(a,"default",(function(){return h}));var o=r("VbXa"),i=r.n(o),s=r("jOGB"),n=r("mdRN"),d=r("DPpg"),l=r("9TW5"),h=function(t){var e=this&&this.isRestored,r=e?l.er:l.e;return(e?l.fr:l.f)([r.d("drop__wrap",{},[r("h3","drop__title",{},["Drag and drop the picture and it",r("br","",{},[]),"will be added to Yandex.Collections"])])])},c=r("pgbU"),g=r("eTvZ");r.d(e,"DesktopSidebarCardDrop",(function(){return p}));var u="drop_hide",p=function(t){function e(){return t.apply(this,arguments)||this}i()(e,t);var r=e.prototype;return r.initialize=function(){this.$on(document,"dragstart",this.onDragStartLocal),this.$on(document,"dragenter",this.onDragStart),this.$on(document,"dragover",this.onDragStart),this.$on(document,"dragleave",this.onDragStop),this.$on(document,"drop",this.onDrop)},r.isDragAllowed=function(){return!this.model.isClosed()||this.options.cardState.isCardEdited()},r.onDragStart=function(t){return t.preventDefault(),t.stopPropagation(),!this.isLocalDrag&&this.isDragAllowed()&&(this.over||Object(c.a)(t.originalEvent.dataTransfer)&&(this.model.setImageDragged(!0),this.$el.removeClass(u))),this.over=!0,!1},r.onDragStop=function(t){var e=this;return t.preventDefault(),t.stopPropagation(),this.over=!1,clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.over||(e.model.setImageDragged(!1),e.$el.addClass(u),e.isLocalDrag=!1)}),100),!1},r.onDrop=function(t){var e=t.originalEvent.dataTransfer,r=e.files;if(t.preventDefault(),this.isLocalDrag)this.isLocalDrag=!1;else if(this.isDragAllowed())if(t.stopPropagation(),this.model.setImageDragged(!1),this.$el.addClass(u),r.length)this.fetchFromFiles(r);else{var a=e.getData("text/html").replace(/\n/g,""),o=Object(g.a)(a,{tag:"img",attribute:"src"}).map((function(t){var e=new Image;return e.src=t,e}));if(o.length>0)this.model.fetchCardsFromHtml(o);else{var i=e.getData("text");i&&this.model.fetchCardsFromQuery(i)}}},r.fetchFromFiles=function(t){var e=this.options.cardState;Object(d.a)(t).length&&(e.isSeriesAddState()?e.fetchContentsFromFiles(t):this.model.fetchCardsFromFiles(t))},r.onDragStartLocal=function(){this.isLocalDrag=!0},e}(s.c);Object(n.a)({template:a,className:"drop drop_side "+u})(p)}}]);