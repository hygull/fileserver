!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=59)}([function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return o}),n.d(t,"__assign",function(){return i}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return s}),n.d(t,"__param",function(){return c}),n.d(t,"__metadata",function(){return l}),n.d(t,"__awaiter",function(){return u}),n.d(t,"__generator",function(){return d}),n.d(t,"__exportStar",function(){return p}),n.d(t,"__values",function(){return m}),n.d(t,"__read",function(){return f}),n.d(t,"__spread",function(){return h}),n.d(t,"__await",function(){return _}),n.d(t,"__asyncGenerator",function(){return v}),n.d(t,"__asyncDelegator",function(){return g}),n.d(t,"__asyncValues",function(){return y}),n.d(t,"__makeTemplateObject",function(){return b}),n.d(t,"__importStar",function(){return k}),n.d(t,"__importDefault",function(){return x});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}function s(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})}function d(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function p(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function m(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{(n=o[e](t)).value instanceof _?Promise.resolve(n.value.v).then(c,l):u(i[0][2],n)}catch(e){u(i[0][3],e)}var n}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function g(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:_(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function y(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=m(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,o,(t=e[n](t)).done,t.value)})}}}function b(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(8),i=n(10),a=r.__importDefault(n(5)),s=r.__importDefault(n(9)),c=n(16),l=n(6),u=n(4);function d(e,t,n){if(null==e)return n;var r=Array.isArray(t)?t:t.split(".").filter(function(e){return e.length});return r.length?d(e[r.shift()],r,n):e}function p(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):""}function m(e,t){void 0===t&&(t=!1);var n=d(e,Array.isArray(e)?"0.internalCode":"internalCode","500");return t?String(n):Number(n.slice(0,3))}function f(e,t,n){return r.__awaiter(this,void 0,void 0,function(){var o;return r.__generator(this,function(r){switch(r.label){case 0:return o={apiKey:n,entityId:t,store:e},[4,window.Ya.Cmnt.api.fetchTree(o)];case 1:return[2,d(r.sent(),"meta.secretKey")]}})})}function h(e,t){if(t="string"==typeof t?document.getElementById(t):t){var n=document.createEvent("Event");n.initEvent(e,!0,!0),t.dispatchEvent(n)}}function _(e){return 0===e.length?function(e){return e}:1===e.length?e[0]:e.reduce(function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(void 0,n))}})}function v(){return o.connect(function(e){return{flags:d(e,"meta.exp.flags"),viewMode:e.viewMode}})}function g(e,t,n){var r=d(t,[n,"limitMargin"]),o=Math.min(d(t,[n,"limit"]),e);return e-o<=r&&(o=e),o}t.getProp=d,t.getCookie=p,t.getConfigField=function(e){return d({avatarsHost:"avatars.mds.yandex.net",clickDaemon:"https://yandex.{tld}/clck/click",complaintsReasons:["SPAM","INAPPROPRIATE_CONTENT"],environment:"production",messengerHost:"https://files.messenger.yandex.net",metrika:{accounts:[52463803]},passportHost:"passport.yandex.{tld}"},e)},t.errorHandler=function(e,t,n,o,i){var a;console.error("FetchError:",JSON.stringify(e));var s=n.progresses,c=void 0===s?{}:s;return m(e)<500&&c[o]&&delete c[o],{errors:r.__assign({},n.errors,(a={},a[o]=r.__assign({type:t,body:e[0]},i),a)),progresses:c}},t.clearProgressAndError=function(e,t){var n=e.progresses,o=void 0===n?{}:n,i=e.errors,a=void 0===i?{}:i,s=r.__assign({},o),c=r.__assign({},a);return s[t]&&delete s[t],c[t]&&delete c[t],{progresses:s,errors:c}},t.getErrorCode=m,t.invalidCSRFHandler=function(e){return r.__awaiter(this,void 0,void 0,function(){var t,n;return r.__generator(this,function(o){switch(o.label){case 0:return t=e.store.getState(),[4,f(e.store,t.entityId,t.apiKey)];case 1:return n=o.sent(),e.store.setState({meta:r.__assign({},t.meta,{secretKey:n})}),[2,r.__assign({},e,{headers:r.__assign({},e.headers,{"X-Csrf-Token":n})})]}})})},t.getPayloadId=function(e,t){return e&&d(e,[t,"payloadId"])||Date.now()+"/"+p("yandexuid")},t.isUGCEnabled=function(e){return!("by"===e.tld)||d(e,"meta.user.hasPhone",!1)},t.addStatsToOptions=function(e,t){var n=r.__assign({},e);return t&&Object.keys(t).length&&(n.method&&"GET"!==n.method?n.body=r.__assign({stats:t},n.body):n.query=r.__assign({stats:JSON.stringify(t)},n.query)),n},t.getParentId=function(e,t){for(var n=e[t].path[e[t].path.length-2];e[n].collapsedIn;)n=e[n].collapsedIn;return n},t.createEvent=h,t.createTeaserClickEvent=function(e){h(l.EventsTypes.TEASER_CLICK,e),u.reachGoal("cmnt.tsr.click")},t.getUncutCommentContent=function(e){return e.reduce(function(e,t){return e.length?"text"===t.type&&(e[0].text+=t.text):e.push(t),e},[])},t.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},t.hashCode=function(e){for(var t=0,n=0;n<e.length;n+=1){t=(t<<5)-t+e.charCodeAt(n),t&=t}return String(Math.abs(t))},t.connect=function(e,t,n){return"function"==typeof e?_([o.connect(e,t||s.default),v()].concat(n||[])):(n=e,_([v()].concat(n||[])))},t.isPositionStickySupport=function(){var e=document.createElement("a");return e.style.cssText="position:sticky;position:-webkit-sticky;",Boolean(e.style.position)&&-1!==e.style.position.indexOf("sticky")},t.getVerdict=function(e,t){void 0===t&&(t=!1);var n=e.moderation,r=d(e.user,"isAuthor",!1),o=d(n,"verdicts.0","default");return t&&!r&&(o="default"),{link:a.default("verdict-"+o+"-link","front.moderation",{defaultId:"verdict-default-link"}),message:a.default("verdict-"+o,"front.moderation",{defaultId:"verdict-default"})}},t.select=function(e){var t;return function(n,r){var o=e(n,r);return function e(t,n){if(t===n)return!0;if("object"==typeof t&&null!==t&&"object"==typeof n&&null!==n){if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)){var r=t.length;if(r!==n.length)return!1;for(var o=0;o<r;o++)if(!e(t[o],n[o]))return!1}var i=Object.keys(t),a=i.length;if(a!==Object.keys(n).length)return!1;for(var o=0;o<a;o++)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(var o=0;o<a;o++){var s=i[o];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}(o,t)||(t=o),t}},t.commentShownThrottle=function(e,t){var n,r=!1,o=this;return function(){if(i.isNumber(arguments[0])&&(arguments[0]=[arguments[0]]),r)return n&&(arguments[0]=arguments[0].concat(n[0])),void(n=arguments);n?n[0]=arguments[0].concat(n[0]):n=arguments,r=!0,setTimeout(function(){if(r=!1,n){var t=n;e.apply(o,n).catch(function(){n?n[0]=t[0].concat(n[0]):n=t}),n=null}},t)}},t.getWindow=function(e){return e?window.top:window},t.getLevelLimit=g,t.getNextComments=function(e){for(var t=e.children,n=e.direction,r=void 0===n?c.MoreDirection.AFTER:n,o=e.level,i=e.levels,a=e.limit,s=e.lookAheadMargin,l=void 0===s?0:s,u=e.tree,p={ids:[],directions:[],lookAheadIds:[]},m=t&&t[r]||[],f=m.length,h=g(f,i,o),_=void 0!==a?a:h,v=Math.min(_+l,f),y=0;y<v;y+=1){var b=m[r===c.MoreDirection.AFTER?y:f-1-y],k=u[b];y<_?(p.ids.push(b),p.directions.push(r)):p.lookAheadIds.push(b);var x=o+1,C=d(i,[x,"takeFrom"],""),P=c.mapTakeFromToDirection[C],E=d(k,["children"],[]);if(E[P]&&E[P].length>0){var M=this.getNextComments({children:E,direction:P,level:x,levels:i,limit:a,lookAheadMargin:l,tree:u}),O=M.ids,S=M.directions,I=M.lookAheadIds;y<_?(p.ids=p.ids.concat(O),p.directions=p.directions.concat(S),p.lookAheadIds=p.lookAheadIds.concat(I)):p.lookAheadIds=p.lookAheadIds.concat(O)}}return p}},function(e,t,n){e.exports=n(12)(13)},function(e,t,n){e.exports=n(12)(14)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(36)),o=n(1);function i(e,t){r.default("reachGoal",e,t)}t.reachGoal=i,t.reachErrorGoal=function(e,t){var n={internalCode:o.getErrorCode(t,!0)},r=o.getProp(t,"0.reqId");r&&(n.reqId=r),i(e,n)},t.setParams=function(e){r.default("params",e)},t.setExperiments=function(e){r.default("experiments",e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(66);t.default=r.default,t.i18n=r.i18n,t.hasKey=r.hasKey},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.COMPACT="compact",e.FULL="full",e.NONE="none"}(t.NoCommentsTypes||(t.NoCommentsTypes={})),function(e){e.COMMENT_SHOWN="comment_shown"}(t.ClickDaemonTypes||(t.ClickDaemonTypes={})),function(e){e.ADD_COMMENT="add comment fail",e.ADD_REACTION="add reaction fail",e.COMPLAIN_COMMENT="complain comment fail",e.EDIT_COMMENT="edit comment fail",e.FETCH_TREE="fetch tree fail",e.LOAD_COMMENTS="load comments fail",e.RCA="RCA fail",e.REMOVE_COMMENT="remove comment fail",e.REMOVE_REACTION="remove reaction fail",e.RESTORE_COMMENT="restore comment fail"}(t.ErrorTypes||(t.ErrorTypes={})),function(e){e.ADD_COMMENT="add comment progress",e.ADD_REACTION="add reaction progress",e.COMPLAIN_COMMENT="complain comment progress",e.EDIT_COMMENT="edit comment progress",e.FETCH_TREE="fetch tree progress",e.LOAD_COMMENTS="load comments progress",e.RCA="RCA progress",e.REMOVE_COMMENT="remove comment progress",e.REMOVE_REACTION="remove reaction progress",e.RESTORE_COMMENT="restore comment progress"}(t.ProgressTypes||(t.ProgressTypes={})),function(e){e.ADD_COMMENT="addComment",e.REMOVE_COMMENT="removeComment",e.RESTORE_COMMENT="restoreComment",e.TEASER_CLICK="teaserClick",e.TREE_LOADED="treeLoaded",e.WIDGET_READY="ready"}(t.EventsTypes||(t.EventsTypes={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37);t.IExperimentControlHeaders=r.IExperimentControlHeaders,t.isExperimentControlHeaders=r.isExperimentControlHeaders;var o=n(70);t.IExperiment=o.IExperiment,t.isExperiment=o.isExperiment,t.isExperimentTestIds=o.isExperimentTestIds;var i=n(38);t.ExperimentFlags=i.ExperimentFlags,t.ExperimentFlagsResolutions=i.ExperimentFlagsResolutions,t.IExperimentFlags=i.IExperimentFlags,t.isExperimentFlags=i.isExperimentFlags;var a=n(41);t.IExperimentHandler=a.IExperimentHandler,t.isExperimentHandler=a.isExperimentHandler;var s=n(40);t.IExperimentHandlers=s.IExperimentHandlers,t.isExperimentHandlers=s.isExperimentHandlers;var c=n(39);t.IExperimentSamples=c.IExperimentSamples,t.isExperimentSamples=c.isExperimentSamples},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function i(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function s(e,t){if(null!=t){if(t.then)return t.then(e.setState);e.setState(t)}}var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=t.getProps(),t.actions=t.getActions(),t.update=function(){var e=t.getProps();(function(e,t){for(var n in e)if(e[n]!==t[n])return!1;for(var n in t)if(!(n in e))return!1;return!0})(e,t.state)||t.setState(e)},t}return i(t,e),t.prototype.componentWillMount=function(){this.unsubscribe=this.context.store.subscribe(this.update)},t.prototype.componentWillUnmount=function(){this.unsubscribe(this.update)},t.prototype.getProps=function(){var e=this.props.mapToProps,t=this.context.store&&this.context.store.getState()||{};return e?e(t,this.props):t},t.prototype.getActions=function(){return function(e,t,n){e="function"==typeof e?e(t,n):e;var r={},o=function(n){r[n]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=e[n];return"function"==typeof t.middleware?t.middleware(t,i,r):s(t,i.apply(void 0,[t.getState()].concat(r)))}};for(var i in e)o(i);return r}(this.props.actions,this.context.store,this.props)},t.prototype.render=function(e,t,n){var r=e.children,o=n.store;return r[0](a({store:o},t,this.actions))},t}(r.Component),l=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getChildContext=function(){return{store:this.props.store}},t.prototype.render=function(){return this.props.children[0]},t}(r.Component);t.connect=function(e,t){return void 0===t&&(t={}),function(n){return function(o){function s(){return null!==o&&o.apply(this,arguments)||this}return i(s,o),s.prototype.render=function(){var o=this.props;return r.h(l,a({},o,{mapToProps:function t(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(!t.mapToProps){var i=e.apply(null,r),a="function"==typeof i;if(!a)return t.mapToProps=e,i;t.mapToProps=i}return t.mapToProps.apply(t,r)},actions:t}),function(e){return r.h(n,a({},e,o))})},s}(r.Component)}},t.Provider=u,t.Connect=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(67)),i=r.__importDefault(n(71)),a=r.__importDefault(n(72)),s=r.__importDefault(n(73)),c=r.__importDefault(n(74)),l=r.__importDefault(n(75)),u=r.__importDefault(n(76)),d=r.__importDefault(n(44)),p=r.__importDefault(n(77)),m=r.__importDefault(n(78)),f=r.__importDefault(n(79)),h=r.__importDefault(n(80)),_=r.__importDefault(n(31)),v=r.__importDefault(n(81));t.default=function(e){return r.__assign({},o.default(e),i.default(e),a.default(e),s.default(e),c.default(e),l.default(e),u.default(e),d.default(e),p.default(e),m.default(e),f.default(e),h.default(e),_.default(e),v.default(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBoolean=function(e){return"boolean"==typeof e},t.isString=function(e){return"string"==typeof e},t.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.orUndefined=function(e){return function(t){return function(e){return void 0===e}(t)||e(t)}},t.orNull=function(e){return function(t){return function(e){return null===e}(t)||e(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(25)),i=n(22),a=n(1),s=n(82),c=n(17);function l(e){return{credentials:"include",method:a.getProp(e,"method","GET"),headers:r.__assign({"Accept-Encoding":"gzip","Content-Type":"application/json",Connection:"keep-alive"},e.headers,i.createExperimentalControlHeadersFromStore(e.store),s.createRtxHeadersFromStore(e.store)),body:e.body&&JSON.stringify(e.body)}}function u(e,t){var n=r.__assign({},t.query||{},i.createExperimentalTestIdsQueryParamFromStore(t.store));Object.keys(n).length>0&&(e=e+"?"+o.default(n));var s=t.store?t.store.getState().tld:c.getTld(),l=window.Ya.Cmnt.getConfig();return""+a.getProp(l,"api","").replace("{tld}",s)+e}function d(e,t){return r.__awaiter(this,void 0,void 0,function(){var n,o,i;return r.__generator(this,function(r){switch(r.label){case 0:return[4,fetch(u(e,t),l(t))];case 1:if(204===(n=r.sent()).status)return[2];i=n.headers.get("x-yandex-req-id"),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,n.json()];case 3:return o=r.sent(),[3,5];case 4:throw r.sent(),[{message:n.statusText,internalCode:String(n.status),reqId:i}];case 5:if(!n.ok)throw Array.isArray(o)&&o.length&&i&&(o[0].reqId=i),o;return s.saveRtxHeadersToStore(t.store,n.headers),[2,o]}})})}t.default=function(e,t,n){return void 0===n&&(n=1),r.__awaiter(this,void 0,void 0,function(){var o,i,s,c,l,u,p;return r.__generator(this,function(m){switch(m.label){case 0:o=!0,i=n,s=0,m.label=1;case 1:if(!(s<i))return[3,8];m.label=2;case 2:return m.trys.push([2,4,,7]),s>0&&(c=a.getProp(t,"method","GET"),t[l="GET"===c?"query":"body"]=r.__assign({},t[l],{retry:1})),[4,d(e,t)];case 3:return[2,m.sent()];case 4:return u=m.sent(),p=s+1>=i||a.getErrorCode(u)<500,"403_CTI"===a.getProp(u,"0.internalCode")&&o&&t.store?[4,a.invalidCSRFHandler(t)]:[3,6];case 5:t=m.sent(),o=!1,p=!1,i<n+1&&(i+=1),m.label=6;case 6:if(p)throw u;return[3,7];case 7:return s+=1,[3,1];case 8:return[2]}})})}},function(e,t){e.exports=vendors},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(104);t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(117);t.default=r.default,t.IPaddingItemIconProps=r.IPaddingItemIconProps},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(105);t.default=r.default},function(e,t,n){"use strict";var r,o,i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.AFTER="after",e.BEFORE="before"}(o=t.MoreDirection||(t.MoreDirection={})),function(e){e.BEGIN="BEGIN",e.END="END"}(i=t.TakeFrom||(t.TakeFrom={})),t.mapTakeFromToDirection=((r={})[i.BEGIN]=o.AFTER,r[i.END]=o.BEFORE,r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(33)),i=r.__importDefault(n(83)),a=r.__importDefault(n(25));function s(e,t){void 0===t&&(t=[]);var n=o.default.parse(e.retpath||window.location.href),r=i.default(n.query);if(r.retpath){for(var s=o.default.parse(r.retpath),c=i.default(s.query),l=0,u=t;l<u.length;l++){var d=u[l],p=d.name;void 0!==(h=d.value)&&(c[p]=h)}r.retpath=o.default.format({protocol:s.protocol,host:s.host,pathname:s.pathname,query:c})}else for(var m=0,f=t;m<f.length;m++){var h,_=f[m];p=_.name;void 0!==(h=_.value)&&(r[p]=h)}return n.query=a.default(r),o.default.format({protocol:n.protocol,host:n.host,pathname:n.pathname,query:r})}function c(){return i.default(window.location.search.slice(1))}t.getTld=function(){var e=window.location.hostname.split("."),t=e[e.length-1],n=e[e.length-2];return"com"===n?t="com."+t:"il"===t&&(t=n+"."+t),t},t.getQueryStats=function(){var e=c(),t={v:window.Ya.Cmnt.version,l:window.Ya.Cmnt.lang,t:window.Ya.Cmnt.theme};return["cmnt_from","cmnt_login","cmnt_profile"].forEach(function(n){e[n]&&(t[n]=e[n])}),t},t.buildBackpath=function(e,t){return void 0===t&&(t=[]),s({backpath:null,retpath:e.backpath||e.retpath},t)},t.buildRetpath=s,t.removeParamsFromQuery=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=c(),i=0,s=e;i<s.length;i++){delete n[s[i]]}var l=o.default.format(r.__assign({},o.default.parse(window.location.href),{query:a.default(n),search:"?"+a.default(n)}));history&&history.replaceState&&history.replaceState(history.state,"",l)},t.getUrlQuery=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(118);t.default=r.default,t.ILinkProps=r.ILinkProps},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.bindProp=function(e){var t=this;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.call.apply(e,[t,this].concat(n))}},t}(n(2).Component);t.Experimental=o},function(e,t,n){"use strict";var r;function o(){try{var e=localStorage.getItem(r.DRAFTS);return e?JSON.parse(e):{}}catch(e){return{}}}function i(e){try{localStorage.setItem(r.DRAFTS,JSON.stringify(e))}catch(e){}}function a(e,t,n){var r=s(e,t),i=o();return i[r]&&i[r].id===n?i[r].text:""}function s(e,t){return e+"_"+t}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.DRAFTS="cmnt-drafts"}(r||(r={})),t.getDraftsFromLS=o,t.setDraftsInLS=i,t.saveValueToLS=function(e,t,n,r){var a=s(e,t),c=o();c[a]={id:n,text:r,ts:Date.now()},r||delete c[a],i(c)},t.clearOldDraftsInLS=function(){var e=o(),t=Date.now();Object.keys(e).forEach(function(n){(!e[n].ts||t-e[n].ts>=864e5)&&delete e[n]}),i(e)},t.getDraftValueFromLS=a,t.deleteDraftFromLS=function(e,t,n){var r=s(e,t),a=o();a[r]&&a[r].id!==n&&(delete a[r],i(a))},t.hasDraftInLS=function(e,t,n){return Boolean(a(e,t,n))},t.getDraftKey=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(10);!function(e){e.RTX="rtx",e.TIME="time",e.VALUE="value",e.VISIBILITY="visibility",e.WSI="wsi"}(t.SortField||(t.SortField={})),function(e){e.ASC="ASC",e.DESC="DESC"}(t.SortDirection||(t.SortDirection={})),function(e){e.TOP="TOP",e.BOTTOM="BOTTOM"}(r=t.FormPosition||(t.FormPosition={})),t.convertToFormPosition=function(e){return o.isString(e)&&-1!==[r.TOP,r.BOTTOM].indexOf(e.toUpperCase())?e.toUpperCase():r.TOP}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(7),i=n(1);function a(e){for(var t=r.__assign({},e),n=0,i=o.ExperimentFlagsResolutions;n<i.length;n++){var a=i[n],s=a.flag,c=a.conflictsWith;if(t.hasOwnProperty(s))for(var l=0,u=c;l<u.length;l++){delete t[u[l]]}}return t}t.extractExperimentFlagsFromSamples=function(e){if(o.isExperimentSamples(e)){var n=a(e.reduce(function(e,t){return r.__assign({},e,t.filter(function(e){return o.isExperimentFlags(e.CONTEXT.MAIN.COMMENTS)}).reduce(function(e,t){return r.__assign({},e,t.CONTEXT.MAIN.COMMENTS)},{}))},{}));return 0===Object.keys(n).length?t.emptyExperiment.flags:n}return t.emptyExperiment.flags},t.resolveExperimentFlagsConflicts=a,t.extractExperimentTestIdsFromSamples=function(e){var t=[];if(o.isExperimentSamples(e))for(var n=0,r=e;n<r.length;n++)for(var i=0,a=r[n];i<a.length;i++){var s=a[i];t=t.concat(s.TESTID)}return t},t.getExperimentControlHeaders=function(e){var t;if(!window.btoa)return null;if(0===Object.keys(e).length)return null;var n,r=[{HANDLER:"COMMENTS",TESTID:["0"],CONTEXT:{MAIN:(t={},t.COMMENTS=e,t)}}];try{return{boxes:"0,0,-1",flags:(n=JSON.stringify(r),window.btoa(unescape(encodeURIComponent(n))))}}catch(e){return null}},t.createExperimentalControlHeadersFromStore=function(e){if(!e)return{};var t=e.getState(),n=i.getProp(t,"meta.exp.controlHeaders",{}),r=n.boxes,o=n.flags;return r&&o?{"X-Yandex-ExpBoxes":r,"X-Yandex-ExpFlags":o}:{}},t.emptyExperiment={flags:{},testIds:[]},t.createExperimentalTestIdsQueryParamFromStore=function(e){if(!e)return{};var t=e.getState(),n=i.getProp(t,"meta.exp.testIds",[]);return 0===n.length?{}:{"test-id":n.join("_")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.callPropOrOwn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.getPropOrOwn(e);if(r)return r.apply(void 0,t)},t.prototype.getPropOrOwn=function(e){return t=e,Boolean(this.props[t])?this.props[e].bind(this):this[e];var t},t}(n(2).Component);t.Base=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(112);t.default=r.default},function(e,t,n){e.exports=n(12)(16)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(99),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(8),i=r.__importDefault(n(9)),a=r.__importDefault(n(110));t.default=o.connect(function(e){return{errors:e.errors}},i.default)(a.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(137);t.default=r.default,t.IPopupProps=r.IPopupProps},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(9)),a=r.__importDefault(n(152));t.default=o.connect(function(e){return{auth:o.getProp(e,"meta.features.auth"),iframe:e.iframe,isLoggedIn:Boolean(o.getProp(e,"meta.user")),isUGCEnabled:o.isUGCEnabled(e),isReadOnly:"readonly"===e.meta.state,serviceSlug:o.getProp(e,"meta.serviceSlug"),tld:e.tld}},i.default)(a.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.accountListName="cmnt_yandex_metrika_accounts",t.callbackQueueName=function(e){return"1"===e?"yandex_metrika_callbacks":"yandex_metrika_callbacks2"},t.scriptPath=function(e){return"1"===e?"https://mc.yandex.ru/metrika/watch.js":"https://mc.yandex.ru/metrika/tag.js"},t.trackerConstructorName=function(e){return"1"===e?"Metrika":"Metrika2"},t.trackerInstanceName=function(e){return"yaCounter"+e},t.trackerVersionName=function(e){return"yaCounterVersion"+e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1);function i(e,t,n,i){var a,s,c=o.getProp(e,[t,"reactions"],{}),l=o.getProp(c,n+".hasMyReaction",!1),u=o.getProp(c,[n,"count"],0)+i;return i>0&&l||i<0&&!l||u<0?e:r.__assign({},e,((a={})[t]=r.__assign({},e[t],{reactions:r.__assign({},c,(s={},s[n]={count:u,hasMyReaction:i>0},s))}),a))}t.default=function(e){return{changeReaction:function(t,n,r,o){return{tree:i(e.getState().tree,n,r,o)}}}},t.changeReactionTree=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),o=n(42),i=n(43);t.createFeatures=function(e,t){return{auth:o.createFeaturesAuth(r.isObject(e)&&e.auth,t&&t.auth),reactions:i.createFeaturesReactions(r.isObject(e)&&e.reactions,t&&t.reactions)}};var a=n(42);t.IFeaturesAuth=a.IFeaturesAuth;var s=n(43);t.IFeaturesReactions=s.IFeaturesReactions},function(e,t,n){e.exports=n(12)(18)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.hasYandexAppAuthApi=function(e){var t=r.getWindow(e);return t.YandexApplicationsAPIBackend&&"function"==typeof t.YandexApplicationsAPIBackend.openAuthDialog},t.showYandexAppAccountManager=function(e,t){var n=r.getWindow(e),o="dark"===window.Ya.Cmnt.theme?"dark":"light";n.YandexApplicationsAPIBackend.openAuthDialog(o,t)},t.initYandexAppAuthFinishedHandler=function(e,t,n){var o=r.getWindow(e),i="CmntYandexAppAuthFinished";o.YandexApplicationsAPIBackend.on("EVENT_AUTH_FINISHED",i),n&&n.authFinishedHandler&&"function"==typeof n.authFinishedHandler?o[i]=n.authFinishedHandler:o[i]=function(e){e&&(o.location.href=t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(8),i=r.__importDefault(n(146));t.default=o.connect(function(e){return{isMobile:"mobile"===e.viewMode}})(i.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30);function o(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];try{var i=n[0],a=n.slice(1);(t=window[r.trackerInstanceName(e)])[i].apply(t,a)}catch(e){console.warn(e)}}function i(){return"undefined"==typeof window?[]:window[r.accountListName]}function a(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.forEach(function(e){var n=window[r.trackerVersionName(e)],i=window[r.callbackQueueName(n)];i?i.push(function(){return o.apply(void 0,[e].concat(t))}):o.apply(void 0,[e].concat(t))})}}function s(e){return a(i().filter(e))}t.withId=function(e){return s(function(t){return e===t})},t.withFilter=s,t.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(i()).apply(void 0,e)};var c=n(68);t.YMInitializer=c.YMInitializer,t.IMetrika=c.IMetrika},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10);t.isExperimentControlHeaders=function(e){return r.isObject(e)&&r.orUndefined(r.isString)(e.flags)&&r.orUndefined(r.isString)(e.boxes)}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(10);function a(e){return-1!==Object.keys(o).map(function(e){return o[e]}).indexOf(e)}!function(e){e.AUTH_MEDIA_POPUP="cmnt_auth_media_popup",e.COLLAPSE_PESSIMIZED="cmnt_collapse_pessimized",e.COLLAPSE_PESSIMIZED_FOR_WSI_SORT="cmnt_collapse_pessimized_for_wsi_sort",e.CONTOUR_LIKES="cmnt_contour_likes",e.LOGIN_TO_COMMENT="cmnt_login_to_comment",e.PESSIMIZED_MARGIN="cmnt_pessimized_margin",e.REPLY_AFTER_REACTION="cmnt_reply_after_reaction",e.ZERO_EXPERIMENT="cmnt_zero_experiment"}(o=t.ExperimentFlags||(t.ExperimentFlags={})),t.ExperimentFlagsScheme=((r={})[o.AUTH_MEDIA_POPUP]="boolean",r[o.COLLAPSE_PESSIMIZED]="boolean",r[o.COLLAPSE_PESSIMIZED_FOR_WSI_SORT]="boolean",r[o.CONTOUR_LIKES]="boolean",r[o.LOGIN_TO_COMMENT]="boolean",r[o.PESSIMIZED_MARGIN]="number",r[o.REPLY_AFTER_REACTION]="boolean",r[o.ZERO_EXPERIMENT]="boolean",r),t.ExperimentFlagsResolutions=[{flag:o.ZERO_EXPERIMENT,conflictsWith:[o.AUTH_MEDIA_POPUP,o.COLLAPSE_PESSIMIZED,o.COLLAPSE_PESSIMIZED_FOR_WSI_SORT,o.CONTOUR_LIKES,o.LOGIN_TO_COMMENT,o.PESSIMIZED_MARGIN,o.REPLY_AFTER_REACTION]},{flag:o.LOGIN_TO_COMMENT,conflictsWith:[o.AUTH_MEDIA_POPUP]}],t.isExperimentFlags=function(e){return i.isObject(e)&&Object.keys(e).every(function(n){var r=e[n];if(!a(n))return!1;var o=t.ExperimentFlagsScheme[n];return"boolean"===o?i.orUndefined(i.isBoolean)(r):"number"===o?i.orUndefined(i.isNumber)(r):"string"===o?i.orUndefined(i.isString)(r):"strings"===o?Array.isArray(r)&&r.every(i.isString):"numbers"===o&&(Array.isArray(r)&&r.every(i.isNumber))})},t.isExperimentFlagsKey=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(40);t.isExperimentSamples=function(e){return Array.isArray(e)&&e.every(function(e){return r.isExperimentHandlers(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(41);t.isExperimentHandlers=function(e){return Array.isArray(e)&&e.every(function(e){return r.isExperimentHandler(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(10);t.isExperimentHandler=function(e){return"COMMENTS"===r.getProp(e,"HANDLER")&&Array.isArray(r.getProp(e,"TESTID"))&&r.getProp(e,"TESTID").every(o.isString)&&o.isObject(r.getProp(e,"CONTEXT.MAIN.COMMENTS"))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(10),i={backpath:null,retpath:null};t.createFeaturesAuth=function(e,t){return o.isObject(e)?r.__assign({},i,t,o.orNull(o.isString)(e.backpath)?{backpath:e.backpath}:{},o.orNull(o.isString)(e.retpath)?{retpath:e.retpath}:{},o.isObject(e.yandexApp)?{yandexApp:e.yandexApp}:{}):r.__assign({},i,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(10),i={dislike:!0,like:!0};t.createFeaturesReactions=function(e,t){return o.isObject(e)?r.__assign({},i,t,o.isBoolean(e.dislike)?{dislike:e.dislike}:{},o.isBoolean(e.like)?{like:e.like}:{}):r.__assign({},i,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(4),a=n(16),s=n(6);function c(e){var t=e.directions,n=e.expandPessimizedId,i=e.ids,s=e.lookAheadIds,c=void 0===s?[]:s,u=e.state,d=e.store,p=i[0],m=u.errors,f=i.concat(c);if(!u.tree||0===f.length)return Promise.resolve({});var h={ids:f,apiKey:u.apiKey,entityId:u.entityId,supplierServiceSlug:u.supplierServiceSlug,retryCount:2,stats:u.stats,analytics:r.__assign({sid:u.sid},o.getProp(m,[p])?{retry:1}:{}),store:d};return window.Ya.Cmnt.api.loadComments(h).then(function(e){var s=r.__assign({},u.tree);return i.forEach(function(i,c){if(s[i]){s[i]=r.__assign({},s[i],e[i],{expandPessimized:l(s[i],n)});var u=o.getParentId(s,i);!function(e,t,n){var r=e[n],o=r.indexOf(t);r.splice(o,1),e.visible?n===a.MoreDirection.AFTER?e.visible.push(t):e.visible.unshift(t):e.visible=[t];r.length||delete e[n]}(s[u].children,i,t[c])}}),c.forEach(function(t){s[t]=r.__assign({},s[t],e[t])}),{tree:s}})}function l(e,t){return Boolean(t)&&t===e.path.join(".")}t.default=function(e){return{loadComments:function(t,n,a,l,u){var d,p=n[0];return e.setState({progresses:r.__assign({},t.progresses,(d={},d[p]=s.ProgressTypes.LOAD_COMMENTS,d))}),c({directions:a,expandPessimizedId:u,ids:n,lookAheadIds:l,state:t,store:e}).then(function(e){var n=e.tree;return r.__assign({tree:n},o.clearProgressAndError(t,p))}).catch(function(t){return i.reachErrorGoal("cmnt.fail.more",t),o.errorHandler(t,s.ErrorTypes.LOAD_COMMENTS,e.getState(),p)})}}},t.loadComments=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(9)),a=n(6),s=r.__importDefault(n(103)),c=r.__importDefault(n(151)),l=r.__importDefault(n(156));t.default=o.connect(function(e,t){var n=t.relatedId,r=void 0===n?"root":n,i=e.progresses,s=e.errors,c=a.ProgressTypes.ADD_COMMENT,l=a.ProgressTypes.EDIT_COMMENT,u=Boolean(r&&i[r]===c),d=Boolean(r&&i[r]===l),p=Boolean(r&&s[r]&&(s[r].type===a.ErrorTypes.ADD_COMMENT||s[r].type===a.ErrorTypes.EDIT_COMMENT));return{apiKey:e.apiKey,autoFocus:e.autoFocus,entityId:e.entityId,hasError:p,isAddCommentProgress:u,isProgress:u||d,isUGCEnabled:o.isUGCEnabled(e),lastOpenForm:e.lastOpenForm,levels:e.meta.levels,maxMessageLength:e.meta.maxMessageLength,metaLevels:e.meta.levels,node:e.node,stickerSets:e.meta.stickerSets,stickyInput:e.stickyInput,teaser:e.teaser,user:e.meta.user,viewMode:e.viewMode}},i.default,[c.default,l.default])(s.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(111);t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(1),s=n(4),c=n(17),l=r.__importDefault(n(5)),u=r.__importDefault(n(15));n(122);var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleEditClick=function(e){e.preventDefault(),s.reachGoal("cmnt.avatar.edit.click");var n=t.props.iframe;e.metaKey||e.ctrlKey?window.open(t.profileUrl,"_blank"):n?window.top.location.href=t.profileUrl:window.location.href=t.profileUrl},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.avatarId,n=void 0===t?"0/0-0":t,r=e.className,s=void 0===r?"":r,c=e.editProps,d=e.isMobile,p=e.size,m=void 0===p?"middle":p,f=e.src,h=e.type,_=void 0===h?"img":h,v=o.default("cmnt-user-pic",s,"cmnt-user-pic_size_"+m,"cmnt-user-pic_type_"+_);if("icon"===_)return i.h(u.default,{className:v,type:n});var g="0/0-0"===n&&!d&&a.getProp(c,"isAuthor",!1),y=i.h("img",{className:v,alt:"",src:f||this.getAvatarURL(),srcSet:f?void 0:this.getAvatarURL()+" 1x, "+this.getAvatarURL(!0)+" 2x"});if(g){var b=o.default("cmnt-user-pic__edit_paranja","cmnt-user-pic__edit_paranja_size_"+m);return i.h("div",{role:"button",className:"cmnt-user-pic__edit",title:l.default("edit-user-pic"),onClick:this.handleEditClick},y,i.h("div",{className:b},i.h("div",{className:"cmnt-user-pic__camera"},i.h(u.default,{className:"cmnt-user-pic__camera-icon",type:"camera"}))))}return y},t.prototype.getAvatarURL=function(e){void 0===e&&(e=!1);var t=this.props,n=t.avatarId,r=void 0===n?"0/0-0":n,o=t.size,i=void 0===o?"middle":o,s=e?"islands-retina-"+i:"islands-"+i;return"//"+a.getConfigField("avatarsHost")+"/get-yapic/"+r+"/"+s},Object.defineProperty(t.prototype,"profileUrl",{get:function(){var e=this.props,t=e.auth,n=e.tld,r=e.serviceSlug,o=e.editProps,i=c.buildRetpath(t,[{name:"cmnt_profile",value:"avatar"},{name:"commentId",value:a.getProp(o,"commentId")}]),s=c.buildBackpath(t,[{name:"commentId",value:a.getProp(o,"commentId")}]);return"//"+a.getConfigField("passportHost").replace("{tld}",n)+"/profile/public?origin=cmnt_"+r+"_avatar&retpath="+encodeURIComponent(i)+"&backpath="+encodeURIComponent(s)},enumerable:!0,configurable:!0}),t}(i.Component);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(8),i=n(1),a=r.__importDefault(n(126));t.default=o.connect(function(e){return{auth:i.getProp(e,"meta.features.auth"),iframe:e.iframe,isLoggedIn:Boolean(i.getProp(e,"meta.user")),node:e.node,serviceSlug:i.getProp(e,"meta.serviceSlug"),stickyInput:e.stickyInput,tld:e.tld,viewMode:e.viewMode}})(a.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(127);t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(130);t.default=r.default,t.hasReply=r.hasReply},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.LANDSCAPE="landscape",e.PORTRAIT="portrait"}(r=t.Orientation||(t.Orientation={})),t.getOrientation=function(){var e,t=((e=window.screen).orientation&&e.orientation.type||e.msOrientation||e.mozOrientation||(window.innerHeight<=window.innerWidth?"landscape-primary":"portrait-primary")).split("-")[0];return t===r.LANDSCAPE||t===r.PORTRAIT?t:r.PORTRAIT},t.onOrientationReallyChange=function(e){window.addEventListener("orientationchange",function(){return function e(t,n,r){void 0===r&&(r=0);var o=window.innerHeight;o!==n||r>=120?t():window.requestAnimationFrame(function(){return e(t,n,r+1)})}(e,window.innerHeight)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(153);t.default=r.default,t.IMediaPopupProps=r.IMediaPopupProps},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(9)),a=n(6),s=n(16),c=r.__importDefault(n(159));t.default=o.connect(function(e,t){var n=t.commentChildren,r=t.direction,o=n[r]||[],i=r===s.MoreDirection.AFTER?o[0]:o[o.length-1];return{hasError:Boolean(e.errors[i])&&e.errors[i].type===a.ErrorTypes.LOAD_COMMENTS,isProgress:e.progresses[i]===a.ProgressTypes.LOAD_COMMENTS,errors:e.errors,meta:e.meta,node:e.node,pessimizedMargin:e.pessimizedMargin,teaser:e.teaser,tree:e.tree}},i.default)(c.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(9)),a=r.__importDefault(n(162)),s=r.__importDefault(n(163));t.default=o.connect(function(e){return{apiKey:e.apiKey,commentId:e.commentId,entityId:e.entityId,isMobile:"mobile"===e.viewMode,meta:e.meta,teaser:e.teaser,tree:e.tree}},i.default,[a.default])(s.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(8),i=r.__importDefault(n(9)),a=r.__importDefault(n(179));t.default=o.connect(function(e,t){return{progress:e.progresses[t.progressId]}},i.default)(a.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(8),i=r.__importDefault(n(57));t.default=o.connect(function(e){return{commentModificationSettings:e.meta.commentModificationSettings}})(i.default);var a=n(57);t.getModificationPossibility=a.getModificationPossibility},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(1),a=r.__importDefault(n(13)),s=r.__importDefault(n(5)),c=r.__importDefault(n(15)),l=r.__importDefault(n(28));function u(e,t,n,r){var o=i.getProp(t,"user.isAuthor",!1),a=new Date(n/1e3).getTime();if(!o)return!1;if("editDelay"===e&&"text"!==t.type)return!1;var s=i.getProp(r,e);return!(void 0===s||s<0)&&(0===s||a+s>Date.now())}n(190),t.getModificationPossibility=u;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleButtonClick=function(e){return function(n){n.stopPropagation(),t.props.onButtonClick(e)}},t}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.comment,d=t.commentId,p=t.commentModificationSettings,m=r.__rest(t,["comment","commentId","commentModificationSettings"]),f=i.getProp(n,"user.isAuthor",!1),h=u("editDelay",n,d,p),_=u("deleteDelay",n,d,p),v=[{type:"complain",text:s.default("complain"),icon:"complain",visible:!f},{type:"edit",text:s.default("edit-button"),icon:"edit",visible:h},{type:"remove",text:s.default("remove-button"),icon:"remove",visible:_}];return o.h(l.default,r.__assign({className:"cmnt-popup_type_menu",directions:["bottom-left","top-left","bottom-right","top-right","bottom-center","top-center"],mainOffset:5,secondaryOffset:-10},m),o.h("div",{className:"cmnt-item-menu"},v.map(function(t){if(t.visible)return o.h("div",{key:t.type,className:"cmnt-item-menu__item"},o.h(a.default,{size:"n",theme:"clear",onClick:e.handleButtonClick(t.type)},o.h("div",{className:"cmnt-item-menu__button"},o.h(c.default,{className:"cmnt-item-menu__icon",type:t.icon}),o.h("div",{className:"cmnt-item-menu__text"},t.text))))})))},t}(o.Component);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(196);t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);n(60),n(61),n(62),n(63);var o=n(20),i=r.__importDefault(n(64));r.__importDefault(n(96)).default(),i.default(),o.clearOldDraftsInLS(),window.Ya.Cmnt.getQueue().forEach(function(e){var t;(t=window.Ya.Cmnt).init.apply(t,e)}),window.Ya.Cmnt.getSubscribeQueue().forEach(function(e){var t;(t=window.Ya.Cmnt).on.apply(t,e)})},function(e,t,n){e.exports=n(12)(8)},function(e,t,n){e.exports=n(12)(11)},function(e,t,n){e.exports=n(12)(12)},function(e,t,n){"use strict";!function(){for(var e=0,t=["webkit","moz","ms"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),o=Math.max(0,16-(r-e)),i=window.setTimeout(function(){t(r+o)},o);return e=r+o,i})}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(65)),i=r.__importDefault(n(84)),a=r.__importDefault(n(85)),s=r.__importDefault(n(86)),c=r.__importDefault(n(87)),l=r.__importDefault(n(88)),u=r.__importDefault(n(89)),d=r.__importDefault(n(90)),p=r.__importDefault(n(91)),m=r.__importDefault(n(92)),f=r.__importDefault(n(93)),h=r.__importDefault(n(94)),_=r.__importDefault(n(95));t.default=function(){window.Ya.Cmnt.api={addComment:o.default,addReaction:i.default("PUT"),complainComment:a.default,count:s.default,editComment:c.default,feed:l.default,fetchTree:u.default,getRCA:d.default,getStickersPacks:p.default,loadComments:m.default,removeComment:f.default,removeReaction:i.default("DELETE"),sendClick:h.default,sendMC:_.default}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(11));t.default=function(e){return new Promise(function(t,n){var a={method:"PUT",headers:{"X-Cmnt-Api-Key":e.apiKey,"X-Balancing-Hash":o.hashCode(e.entityId),"X-Csrf-Token":e.secretKey},body:r.__assign({text:e.text,sticker:e.sticker,type:e.type,replyTo:e.replyTo,entityId:e.entityId,supplierServiceSlug:e.supplierServiceSlug,payloadId:e.payloadId||o.getPayloadId()},e.analytics),store:e.store};a=o.addStatsToOptions(a,e.stats),i.default("/push",a,e.retryCount).then(function(e){return t(e)}).catch(function(e){return n(e)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);function o(e,t,n){void 0===t&&(t="front.common");var o=r.getProp({"front.common":{"action-to-comment":"to post comments","action-to-complain":"to report comments","action-to-reaction_dislike":"to rate comments","action-to-reaction_like":"to rate comments","action-to-reply":"to respond to comments","action-to-stickers_button":"to send stickers","action-to-subscribe":"чтобы подписаться на комментарии","add reaction progress":"Saving vote...","button-later":"Later","button-login-now":"Log in","button-subscription-subscribe":"Подписаться на обновления","button-subscription-subscribed":"Вы подписаны на обновления","button-subscription-unsubscribe-short":"Отписаться","button-subscription-unsubscribe-short-description":"Не получать уведомления о новых сообщениях","cancel-button":"Cancel","close-button":"Close","comment-deleted-by-author":"Comment deleted by author","comment-deleted-by-user":"Comment deleted","comment-deleted-by-verdict":"Comment deleted{verdict}","comment-hidden-by-complain":"Comment hidden due to user complaints","comment-hidden-by-verdict":"The comment was hidden{verdict}","commenting-rules":"Commenting rules","comments-deleted":["{count} comment deleted","{count} comments deleted","{count} comments deleted","{count} comments deleted"],"comments-disabled":"The comments are disabled",complain:"Report violation","complain comment progress":"Sending complaint...","complain-cancel":"Cancel","complain-complete":"Complaint sent","complain-question":"What's wrong with the comment?","complain-reason-INAPPROPRIATE_CONTENT":"Inappropriate content","complain-reason-SPAM":"Spam","confirm-button":"Verify","confirm-phone":"verify your phone number","confirm-phone-to-action":"Confirm your phone number {action}","default-displayName":"Anonymous","deleted-comments-plural":["{count} удалённый комментарий","{count} удалённых комментария","{count} удалённых комментариев","{count} удалённых комментариев"],"deleted-user":"Deleted user",dislike:"Dislike","edit-button":"Edit","edit-user-pic":"Add a photo",edited:"Changed","expand-replies":["{count} reply","{count} replies","{count} replies","{count} replies"],"form-placeholder-reply":"Your answer","form-placeholder-root":"Your comment","hidden-and-deleted-comments-known-count":"Показать {hidden} и {deleted}","hidden-and-deleted-comments-unknown-count":"Cкрытые и удалённые комментарии","hidden-comments-plural":["Показать {count} скрытый комментарий","Показать {count} скрытых комментария","Показать {count} скрытых комментариев","Показать {count} скрытых комментариев"],"hidden-comments-plural-short":["{count} скрытый","{count} скрытых","{count} скрытых","{count} скрытых"],like:"Like","load comments progress":"Loading comments...","log-in-button":"Log in","login-and-send-button":"Log in and send","login-button":"Log in","login-text-comment":"To comment, ","login-text-complain":"To complain, ","login-text-like":"To vote, ","login-text-reaction_dislike":"To vote, ","login-text-reaction_like":"To vote, ","login-text-reply":"To reply, ","login-text-stickers_button":"To send a sticker, ","login-to-action":"Log in or register {action}","login-to-yandex":"log in to Yandex","mac-form-hotkey":"⌘ ↩︎","message-banned":"The administrator banned you from leaving comments, replying, and voting because you violated the rules","message-readonly":"Comments and replies disabled","next-button":"Next","next-comments":["{count} more comment of {length}","{count} more comments of {length}","{count} more comments of {length}","{count} more comments of {length}"],"next-comments-teaser":["Ещё {count} комментарий","Ещё {count} комментария","Ещё {count} комментариев","Ещё {count} комментариев"],"next-replies":["{count} more reply of {length}","{count} more replies of {length}","{count} more replies of {length}","{count} more replies of {length}"],"next-replies-teaser":["Ещё {count} ответ","Ещё {count} ответа","Ещё {count} ответов","Ещё {count} ответов"],"note-about-comment-autosave":"The comment will be saved but you need to log in to post it","official-response":"Официальный ответ","other-action":"Other actions","previous-button":"Previous","read-more":"Read more","register-button":"Sign up","remove comment progress":"Deleting comment...","remove reaction progress":"Saving vote...","remove-button":"Delete","reply-button":"Reply","reply-deleted-by-author":"Reply deleted by author","reply-deleted-by-user":"Reply deleted","reply-deleted-by-verdict":"Reply deleted{verdict}","reply-hidden-by-verdict":"The reply was hidden{verdict}","replys-deleted":["{count} reply deleted","{count} replies deleted","{count} replies deleted","{count} replies deleted"],"restore comment progress":"Restoring comment...","restore-comment":"Undo","save-button":"Save","send-button":"Send","show-hidden-comments-unknown-count":"Показать скрытые комментарии","stickers-button":"Add a sticker","subscribe-button":"Subscribe","unsubscribe-button":"Subscribed","verdict-delete-adult":" due to inappropriate content","verdict-delete-inappropriate":" due to inappropriate content","verdict-delete-insult":" because it contained insults","verdict-delete-obscene":" because it contained profanity","verdict-delete-spam":" because it contained spam","verdict-hide-adult":" because it contains adult content","verdict-hide-inappropriate":" due to inappropriate content","verdict-hide-insult":" because it contains insults","verdict-hide-obscene":" because it contains profanity","verdict-hide-spam":" because it contained spam","win-form-hotkey":"Ctrl + Enter","your-comment-deleted-by-author":"You deleted the comment","your-comment-deleted-by-verdict":"Your comment was deleted{verdict}","your-comment-hidden-by-verdict":"Your comment was hidden{verdict}","your-reply-deleted-by-author":"You deleted the reply","your-reply-deleted-by-verdict":"Your reply was deleted{verdict}","your-reply-hidden-by-verdict":"Your reply was hidden{verdict}","zero-comments":"Leave your first comment"},"front.date":{H:"{count} h",M:"{count} min","created-at":"{date} at {time}",d:"{count} d","edited-at":"Changed on {date} at {time}",month0:"Jan",month1:"Feb",month10:"Nov",month11:"Dec",month2:"Mar",month3:"Apr",month4:"May",month5:"Jun",month6:"Jul",month7:"Aug",month8:"Sept",month9:"Oct",now:"now",today:"today","today-at":"today at {time}",tomorrow:"tomorrow","tomorrow-at":"tomorrow at {time}",yesterday:"yesterday","yesterday-at":"yesterday at {time}"},"front.errors":{"400_TIE":"You can't send an empty message","400_TTL":"The message is too long","401_UNA":"Log in to do more than just read","403_STI":"The comments are disabled","403_STR":"The comments are read-only","403_UIB":"You have been banned, so you can only read","423_TLE":"The time for editing or deleting the comment is up","429_TMR":"Too many actions. Wait a bit and try again","add comment fail":"Don't close the page. Sending comment...","add reaction fail":"Don't close the page. Saving vote...","complain comment fail":"Don't close the page. Sending complaint...",default:"Something went wrong. Refresh the page and try again","edit comment fail":"Don't close the page. Saving comment...","fetch tree fail":"Don't close the page. Loading comments...","load comments fail":"Don't close the page. Loading comments...","max-length-reached":["Allowed length exceeded by {count} character","Allowed length exceeded by {count} characters","Allowed length exceeded by {count} characters",""],"remove comment fail":"Don't close the page. Deleting comment...","remove reaction fail":"Don't close the page. Canceling vote...","restore comment fail":"Don't close the page. Restoring comment...","subscribe fail":"Не закрывайте страницу. Подписка на новые комментарии…","unsubscribe fail":"Не закрывайте страницу. Отписка от новых комментариев…"},"front.moderation":{"verdict-default":"because of a rule violation","verdict-default-link":"https://yandex.ru/support/messenger/rules.html","verdict-media_auto_erotica":"because of erotic content","verdict-media_auto_erotica-link":"https://yandex.ru/support/messenger/rules.html#porn-erotica","verdict-media_auto_porno":"because of pornographic content","verdict-media_auto_porno-link":"https://yandex.ru/support/messenger/rules.html#porn-erotica","verdict-media_auto_shock":"because of shocking content","verdict-media_auto_shock-link":"https://yandex.ru/support/messenger/rules.html#shock-content","verdict-media_toloka_erotica":"because of erotic content","verdict-media_toloka_erotica-link":"https://yandex.ru/support/messenger/rules.html#porn-erotica","verdict-media_toloka_shock":"because of shocking content","verdict-media_toloka_shock-link":"https://yandex.ru/support/messenger/rules.html#shock-content","verdict-media_toloka_threat_hard":"because of hate speech","verdict-media_toloka_threat_hard-link":"https://yandex.ru/support/messenger/rules.html#hate-speech","verdict-media_toloka_threat_light":"because of hate speech","verdict-media_toloka_threat_light-link":"https://yandex.ru/support/messenger/rules.html#hate-speech","verdict-media_toloka_violence":"because of hate speech","verdict-media_toloka_violence-link":"https://yandex.ru/support/messenger/rules.html#hate-speech","verdict-text_auto_bad_link":"because of a suspicious link","verdict-text_auto_bad_link-link":"https://yandex.ru/support/messenger/rules.html#links","verdict-text_auto_caps":"because of too much uppercase","verdict-text_auto_caps-link":"https://yandex.ru/support/messenger/rules.html#many-errors","verdict-text_auto_law_violation":"because it violates the law","verdict-text_auto_law_violation-link":"https://yandex.ru/support/messenger/rules.html#nocuous","verdict-text_auto_obscene":"because of obscene language","verdict-text_auto_obscene-link":"https://yandex.ru/support/messenger/rules.html#obscene-lexicon","verdict-text_toloka_advert":"because it contains advertising","verdict-text_toloka_advert-link":"https://yandex.ru/support/messenger/rules.html#adv-spam","verdict-text_toloka_hard_violation":"because of toxic language","verdict-text_toloka_hard_violation-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_hide_violation":"because of toxic language","verdict-text_toloka_hide_violation-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_insult":"because it contains insults","verdict-text_toloka_insult-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_insult_hard":"because it contains insults","verdict-text_toloka_insult_hard-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_insult_light":"because it contains insults","verdict-text_toloka_insult_light-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_is_bad":"because of a rule violation","verdict-text_toloka_is_bad-link":"https://yandex.ru/support/messenger/rules.html","verdict-text_toloka_law_violation":"because it violates the law","verdict-text_toloka_law_violation-link":"https://yandex.ru/support/messenger/rules.html#nocuous","verdict-text_toloka_light_violation":"because of toxic language","verdict-text_toloka_light_violation-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_no_sense":"because it contains a meaningless combination of characters","verdict-text_toloka_no_sense-link":"https://yandex.ru/support/messenger/rules.html#many-errors","verdict-text_toloka_obscene":"because of obscene language","verdict-text_toloka_obscene-link":"https://yandex.ru/support/messenger/rules.html#obscene-lexicon","verdict-text_toloka_obscene_hard":"because of obscene language","verdict-text_toloka_obscene_hard-link":"https://yandex.ru/support/messenger/rules.html#obscene-lexicon","verdict-text_toloka_obscene_light":"because of obscene language","verdict-text_toloka_obscene_light-link":"https://yandex.ru/support/messenger/rules.html#obscene-lexicon","verdict-text_toloka_personal_data":"because it discloses private information","verdict-text_toloka_personal_data-link":"https://yandex.ru/support/messenger/rules.html#private-data","verdict-text_toloka_porno":"because of pornographic content","verdict-text_toloka_porno-link":"https://yandex.ru/support/messenger/rules.html#porn-erotica","verdict-text_toloka_spam":"because of spam","verdict-text_toloka_spam-link":"https://yandex.ru/support/messenger/rules.html#adv-spam","verdict-text_toloka_toxic":"because of toxic language","verdict-text_toloka_toxic-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_vulgarity":"because of obscene language","verdict-text_toloka_vulgarity-link":"https://yandex.ru/support/messenger/rules.html#obscene-lexicon"}},[t,e],e);if(o===e&&n&&n.defaultId&&(o=r.getProp({"front.common":{"action-to-comment":"to post comments","action-to-complain":"to report comments","action-to-reaction_dislike":"to rate comments","action-to-reaction_like":"to rate comments","action-to-reply":"to respond to comments","action-to-stickers_button":"to send stickers","action-to-subscribe":"чтобы подписаться на комментарии","add reaction progress":"Saving vote...","button-later":"Later","button-login-now":"Log in","button-subscription-subscribe":"Подписаться на обновления","button-subscription-subscribed":"Вы подписаны на обновления","button-subscription-unsubscribe-short":"Отписаться","button-subscription-unsubscribe-short-description":"Не получать уведомления о новых сообщениях","cancel-button":"Cancel","close-button":"Close","comment-deleted-by-author":"Comment deleted by author","comment-deleted-by-user":"Comment deleted","comment-deleted-by-verdict":"Comment deleted{verdict}","comment-hidden-by-complain":"Comment hidden due to user complaints","comment-hidden-by-verdict":"The comment was hidden{verdict}","commenting-rules":"Commenting rules","comments-deleted":["{count} comment deleted","{count} comments deleted","{count} comments deleted","{count} comments deleted"],"comments-disabled":"The comments are disabled",complain:"Report violation","complain comment progress":"Sending complaint...","complain-cancel":"Cancel","complain-complete":"Complaint sent","complain-question":"What's wrong with the comment?","complain-reason-INAPPROPRIATE_CONTENT":"Inappropriate content","complain-reason-SPAM":"Spam","confirm-button":"Verify","confirm-phone":"verify your phone number","confirm-phone-to-action":"Confirm your phone number {action}","default-displayName":"Anonymous","deleted-comments-plural":["{count} удалённый комментарий","{count} удалённых комментария","{count} удалённых комментариев","{count} удалённых комментариев"],"deleted-user":"Deleted user",dislike:"Dislike","edit-button":"Edit","edit-user-pic":"Add a photo",edited:"Changed","expand-replies":["{count} reply","{count} replies","{count} replies","{count} replies"],"form-placeholder-reply":"Your answer","form-placeholder-root":"Your comment","hidden-and-deleted-comments-known-count":"Показать {hidden} и {deleted}","hidden-and-deleted-comments-unknown-count":"Cкрытые и удалённые комментарии","hidden-comments-plural":["Показать {count} скрытый комментарий","Показать {count} скрытых комментария","Показать {count} скрытых комментариев","Показать {count} скрытых комментариев"],"hidden-comments-plural-short":["{count} скрытый","{count} скрытых","{count} скрытых","{count} скрытых"],like:"Like","load comments progress":"Loading comments...","log-in-button":"Log in","login-and-send-button":"Log in and send","login-button":"Log in","login-text-comment":"To comment, ","login-text-complain":"To complain, ","login-text-like":"To vote, ","login-text-reaction_dislike":"To vote, ","login-text-reaction_like":"To vote, ","login-text-reply":"To reply, ","login-text-stickers_button":"To send a sticker, ","login-to-action":"Log in or register {action}","login-to-yandex":"log in to Yandex","mac-form-hotkey":"⌘ ↩︎","message-banned":"The administrator banned you from leaving comments, replying, and voting because you violated the rules","message-readonly":"Comments and replies disabled","next-button":"Next","next-comments":["{count} more comment of {length}","{count} more comments of {length}","{count} more comments of {length}","{count} more comments of {length}"],"next-comments-teaser":["Ещё {count} комментарий","Ещё {count} комментария","Ещё {count} комментариев","Ещё {count} комментариев"],"next-replies":["{count} more reply of {length}","{count} more replies of {length}","{count} more replies of {length}","{count} more replies of {length}"],"next-replies-teaser":["Ещё {count} ответ","Ещё {count} ответа","Ещё {count} ответов","Ещё {count} ответов"],"note-about-comment-autosave":"The comment will be saved but you need to log in to post it","official-response":"Официальный ответ","other-action":"Other actions","previous-button":"Previous","read-more":"Read more","register-button":"Sign up","remove comment progress":"Deleting comment...","remove reaction progress":"Saving vote...","remove-button":"Delete","reply-button":"Reply","reply-deleted-by-author":"Reply deleted by author","reply-deleted-by-user":"Reply deleted","reply-deleted-by-verdict":"Reply deleted{verdict}","reply-hidden-by-verdict":"The reply was hidden{verdict}","replys-deleted":["{count} reply deleted","{count} replies deleted","{count} replies deleted","{count} replies deleted"],"restore comment progress":"Restoring comment...","restore-comment":"Undo","save-button":"Save","send-button":"Send","show-hidden-comments-unknown-count":"Показать скрытые комментарии","stickers-button":"Add a sticker","subscribe-button":"Subscribe","unsubscribe-button":"Subscribed","verdict-delete-adult":" due to inappropriate content","verdict-delete-inappropriate":" due to inappropriate content","verdict-delete-insult":" because it contained insults","verdict-delete-obscene":" because it contained profanity","verdict-delete-spam":" because it contained spam","verdict-hide-adult":" because it contains adult content","verdict-hide-inappropriate":" due to inappropriate content","verdict-hide-insult":" because it contains insults","verdict-hide-obscene":" because it contains profanity","verdict-hide-spam":" because it contained spam","win-form-hotkey":"Ctrl + Enter","your-comment-deleted-by-author":"You deleted the comment","your-comment-deleted-by-verdict":"Your comment was deleted{verdict}","your-comment-hidden-by-verdict":"Your comment was hidden{verdict}","your-reply-deleted-by-author":"You deleted the reply","your-reply-deleted-by-verdict":"Your reply was deleted{verdict}","your-reply-hidden-by-verdict":"Your reply was hidden{verdict}","zero-comments":"Leave your first comment"},"front.date":{H:"{count} h",M:"{count} min","created-at":"{date} at {time}",d:"{count} d","edited-at":"Changed on {date} at {time}",month0:"Jan",month1:"Feb",month10:"Nov",month11:"Dec",month2:"Mar",month3:"Apr",month4:"May",month5:"Jun",month6:"Jul",month7:"Aug",month8:"Sept",month9:"Oct",now:"now",today:"today","today-at":"today at {time}",tomorrow:"tomorrow","tomorrow-at":"tomorrow at {time}",yesterday:"yesterday","yesterday-at":"yesterday at {time}"},"front.errors":{"400_TIE":"You can't send an empty message","400_TTL":"The message is too long","401_UNA":"Log in to do more than just read","403_STI":"The comments are disabled","403_STR":"The comments are read-only","403_UIB":"You have been banned, so you can only read","423_TLE":"The time for editing or deleting the comment is up","429_TMR":"Too many actions. Wait a bit and try again","add comment fail":"Don't close the page. Sending comment...","add reaction fail":"Don't close the page. Saving vote...","complain comment fail":"Don't close the page. Sending complaint...",default:"Something went wrong. Refresh the page and try again","edit comment fail":"Don't close the page. Saving comment...","fetch tree fail":"Don't close the page. Loading comments...","load comments fail":"Don't close the page. Loading comments...","max-length-reached":["Allowed length exceeded by {count} character","Allowed length exceeded by {count} characters","Allowed length exceeded by {count} characters",""],"remove comment fail":"Don't close the page. Deleting comment...","remove reaction fail":"Don't close the page. Canceling vote...","restore comment fail":"Don't close the page. Restoring comment...","subscribe fail":"Не закрывайте страницу. Подписка на новые комментарии…","unsubscribe fail":"Не закрывайте страницу. Отписка от новых комментариев…"},"front.moderation":{"verdict-default":"because of a rule violation","verdict-default-link":"https://yandex.ru/support/messenger/rules.html","verdict-media_auto_erotica":"because of erotic content","verdict-media_auto_erotica-link":"https://yandex.ru/support/messenger/rules.html#porn-erotica","verdict-media_auto_porno":"because of pornographic content","verdict-media_auto_porno-link":"https://yandex.ru/support/messenger/rules.html#porn-erotica","verdict-media_auto_shock":"because of shocking content","verdict-media_auto_shock-link":"https://yandex.ru/support/messenger/rules.html#shock-content","verdict-media_toloka_erotica":"because of erotic content","verdict-media_toloka_erotica-link":"https://yandex.ru/support/messenger/rules.html#porn-erotica","verdict-media_toloka_shock":"because of shocking content","verdict-media_toloka_shock-link":"https://yandex.ru/support/messenger/rules.html#shock-content","verdict-media_toloka_threat_hard":"because of hate speech","verdict-media_toloka_threat_hard-link":"https://yandex.ru/support/messenger/rules.html#hate-speech","verdict-media_toloka_threat_light":"because of hate speech","verdict-media_toloka_threat_light-link":"https://yandex.ru/support/messenger/rules.html#hate-speech","verdict-media_toloka_violence":"because of hate speech","verdict-media_toloka_violence-link":"https://yandex.ru/support/messenger/rules.html#hate-speech","verdict-text_auto_bad_link":"because of a suspicious link","verdict-text_auto_bad_link-link":"https://yandex.ru/support/messenger/rules.html#links","verdict-text_auto_caps":"because of too much uppercase","verdict-text_auto_caps-link":"https://yandex.ru/support/messenger/rules.html#many-errors","verdict-text_auto_law_violation":"because it violates the law","verdict-text_auto_law_violation-link":"https://yandex.ru/support/messenger/rules.html#nocuous","verdict-text_auto_obscene":"because of obscene language","verdict-text_auto_obscene-link":"https://yandex.ru/support/messenger/rules.html#obscene-lexicon","verdict-text_toloka_advert":"because it contains advertising","verdict-text_toloka_advert-link":"https://yandex.ru/support/messenger/rules.html#adv-spam","verdict-text_toloka_hard_violation":"because of toxic language","verdict-text_toloka_hard_violation-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_hide_violation":"because of toxic language","verdict-text_toloka_hide_violation-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_insult":"because it contains insults","verdict-text_toloka_insult-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_insult_hard":"because it contains insults","verdict-text_toloka_insult_hard-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_insult_light":"because it contains insults","verdict-text_toloka_insult_light-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_is_bad":"because of a rule violation","verdict-text_toloka_is_bad-link":"https://yandex.ru/support/messenger/rules.html","verdict-text_toloka_law_violation":"because it violates the law","verdict-text_toloka_law_violation-link":"https://yandex.ru/support/messenger/rules.html#nocuous","verdict-text_toloka_light_violation":"because of toxic language","verdict-text_toloka_light_violation-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_no_sense":"because it contains a meaningless combination of characters","verdict-text_toloka_no_sense-link":"https://yandex.ru/support/messenger/rules.html#many-errors","verdict-text_toloka_obscene":"because of obscene language","verdict-text_toloka_obscene-link":"https://yandex.ru/support/messenger/rules.html#obscene-lexicon","verdict-text_toloka_obscene_hard":"because of obscene language","verdict-text_toloka_obscene_hard-link":"https://yandex.ru/support/messenger/rules.html#obscene-lexicon","verdict-text_toloka_obscene_light":"because of obscene language","verdict-text_toloka_obscene_light-link":"https://yandex.ru/support/messenger/rules.html#obscene-lexicon","verdict-text_toloka_personal_data":"because it discloses private information","verdict-text_toloka_personal_data-link":"https://yandex.ru/support/messenger/rules.html#private-data","verdict-text_toloka_porno":"because of pornographic content","verdict-text_toloka_porno-link":"https://yandex.ru/support/messenger/rules.html#porn-erotica","verdict-text_toloka_spam":"because of spam","verdict-text_toloka_spam-link":"https://yandex.ru/support/messenger/rules.html#adv-spam","verdict-text_toloka_toxic":"because of toxic language","verdict-text_toloka_toxic-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_vulgarity":"because of obscene language","verdict-text_toloka_vulgarity-link":"https://yandex.ru/support/messenger/rules.html#obscene-lexicon"}},[t,n.defaultId],n.defaultId),delete n.defaultId),!n)return o;Array.isArray(o)&&(o=n.count||0===n.count?function(e,t){if(0===e)return t[3];var n=e%10,r=e%100;return 1===n&&11!==r?t[0]:n>=2&&n<=4&&(r<10||r>=20)?t[1]:t[2]}(n.count,o):o.toString());for(var i=0,a=Object.keys(n);i<a.length;i++){var s=a[i];o=o.replace("{"+s+"}",n[s].toString())}return o}t.i18n=o,t.hasKey=function(e,t){return void 0===t&&(t="front.common"),Boolean(r.getProp({"front.common":{"action-to-comment":"to post comments","action-to-complain":"to report comments","action-to-reaction_dislike":"to rate comments","action-to-reaction_like":"to rate comments","action-to-reply":"to respond to comments","action-to-stickers_button":"to send stickers","action-to-subscribe":"чтобы подписаться на комментарии","add reaction progress":"Saving vote...","button-later":"Later","button-login-now":"Log in","button-subscription-subscribe":"Подписаться на обновления","button-subscription-subscribed":"Вы подписаны на обновления","button-subscription-unsubscribe-short":"Отписаться","button-subscription-unsubscribe-short-description":"Не получать уведомления о новых сообщениях","cancel-button":"Cancel","close-button":"Close","comment-deleted-by-author":"Comment deleted by author","comment-deleted-by-user":"Comment deleted","comment-deleted-by-verdict":"Comment deleted{verdict}","comment-hidden-by-complain":"Comment hidden due to user complaints","comment-hidden-by-verdict":"The comment was hidden{verdict}","commenting-rules":"Commenting rules","comments-deleted":["{count} comment deleted","{count} comments deleted","{count} comments deleted","{count} comments deleted"],"comments-disabled":"The comments are disabled",complain:"Report violation","complain comment progress":"Sending complaint...","complain-cancel":"Cancel","complain-complete":"Complaint sent","complain-question":"What's wrong with the comment?","complain-reason-INAPPROPRIATE_CONTENT":"Inappropriate content","complain-reason-SPAM":"Spam","confirm-button":"Verify","confirm-phone":"verify your phone number","confirm-phone-to-action":"Confirm your phone number {action}","default-displayName":"Anonymous","deleted-comments-plural":["{count} удалённый комментарий","{count} удалённых комментария","{count} удалённых комментариев","{count} удалённых комментариев"],"deleted-user":"Deleted user",dislike:"Dislike","edit-button":"Edit","edit-user-pic":"Add a photo",edited:"Changed","expand-replies":["{count} reply","{count} replies","{count} replies","{count} replies"],"form-placeholder-reply":"Your answer","form-placeholder-root":"Your comment","hidden-and-deleted-comments-known-count":"Показать {hidden} и {deleted}","hidden-and-deleted-comments-unknown-count":"Cкрытые и удалённые комментарии","hidden-comments-plural":["Показать {count} скрытый комментарий","Показать {count} скрытых комментария","Показать {count} скрытых комментариев","Показать {count} скрытых комментариев"],"hidden-comments-plural-short":["{count} скрытый","{count} скрытых","{count} скрытых","{count} скрытых"],like:"Like","load comments progress":"Loading comments...","log-in-button":"Log in","login-and-send-button":"Log in and send","login-button":"Log in","login-text-comment":"To comment, ","login-text-complain":"To complain, ","login-text-like":"To vote, ","login-text-reaction_dislike":"To vote, ","login-text-reaction_like":"To vote, ","login-text-reply":"To reply, ","login-text-stickers_button":"To send a sticker, ","login-to-action":"Log in or register {action}","login-to-yandex":"log in to Yandex","mac-form-hotkey":"⌘ ↩︎","message-banned":"The administrator banned you from leaving comments, replying, and voting because you violated the rules","message-readonly":"Comments and replies disabled","next-button":"Next","next-comments":["{count} more comment of {length}","{count} more comments of {length}","{count} more comments of {length}","{count} more comments of {length}"],"next-comments-teaser":["Ещё {count} комментарий","Ещё {count} комментария","Ещё {count} комментариев","Ещё {count} комментариев"],"next-replies":["{count} more reply of {length}","{count} more replies of {length}","{count} more replies of {length}","{count} more replies of {length}"],"next-replies-teaser":["Ещё {count} ответ","Ещё {count} ответа","Ещё {count} ответов","Ещё {count} ответов"],"note-about-comment-autosave":"The comment will be saved but you need to log in to post it","official-response":"Официальный ответ","other-action":"Other actions","previous-button":"Previous","read-more":"Read more","register-button":"Sign up","remove comment progress":"Deleting comment...","remove reaction progress":"Saving vote...","remove-button":"Delete","reply-button":"Reply","reply-deleted-by-author":"Reply deleted by author","reply-deleted-by-user":"Reply deleted","reply-deleted-by-verdict":"Reply deleted{verdict}","reply-hidden-by-verdict":"The reply was hidden{verdict}","replys-deleted":["{count} reply deleted","{count} replies deleted","{count} replies deleted","{count} replies deleted"],"restore comment progress":"Restoring comment...","restore-comment":"Undo","save-button":"Save","send-button":"Send","show-hidden-comments-unknown-count":"Показать скрытые комментарии","stickers-button":"Add a sticker","subscribe-button":"Subscribe","unsubscribe-button":"Subscribed","verdict-delete-adult":" due to inappropriate content","verdict-delete-inappropriate":" due to inappropriate content","verdict-delete-insult":" because it contained insults","verdict-delete-obscene":" because it contained profanity","verdict-delete-spam":" because it contained spam","verdict-hide-adult":" because it contains adult content","verdict-hide-inappropriate":" due to inappropriate content","verdict-hide-insult":" because it contains insults","verdict-hide-obscene":" because it contains profanity","verdict-hide-spam":" because it contained spam","win-form-hotkey":"Ctrl + Enter","your-comment-deleted-by-author":"You deleted the comment","your-comment-deleted-by-verdict":"Your comment was deleted{verdict}","your-comment-hidden-by-verdict":"Your comment was hidden{verdict}","your-reply-deleted-by-author":"You deleted the reply","your-reply-deleted-by-verdict":"Your reply was deleted{verdict}","your-reply-hidden-by-verdict":"Your reply was hidden{verdict}","zero-comments":"Leave your first comment"},"front.date":{H:"{count} h",M:"{count} min","created-at":"{date} at {time}",d:"{count} d","edited-at":"Changed on {date} at {time}",month0:"Jan",month1:"Feb",month10:"Nov",month11:"Dec",month2:"Mar",month3:"Apr",month4:"May",month5:"Jun",month6:"Jul",month7:"Aug",month8:"Sept",month9:"Oct",now:"now",today:"today","today-at":"today at {time}",tomorrow:"tomorrow","tomorrow-at":"tomorrow at {time}",yesterday:"yesterday","yesterday-at":"yesterday at {time}"},"front.errors":{"400_TIE":"You can't send an empty message","400_TTL":"The message is too long","401_UNA":"Log in to do more than just read","403_STI":"The comments are disabled","403_STR":"The comments are read-only","403_UIB":"You have been banned, so you can only read","423_TLE":"The time for editing or deleting the comment is up","429_TMR":"Too many actions. Wait a bit and try again","add comment fail":"Don't close the page. Sending comment...","add reaction fail":"Don't close the page. Saving vote...","complain comment fail":"Don't close the page. Sending complaint...",default:"Something went wrong. Refresh the page and try again","edit comment fail":"Don't close the page. Saving comment...","fetch tree fail":"Don't close the page. Loading comments...","load comments fail":"Don't close the page. Loading comments...","max-length-reached":["Allowed length exceeded by {count} character","Allowed length exceeded by {count} characters","Allowed length exceeded by {count} characters",""],"remove comment fail":"Don't close the page. Deleting comment...","remove reaction fail":"Don't close the page. Canceling vote...","restore comment fail":"Don't close the page. Restoring comment...","subscribe fail":"Не закрывайте страницу. Подписка на новые комментарии…","unsubscribe fail":"Не закрывайте страницу. Отписка от новых комментариев…"},"front.moderation":{"verdict-default":"because of a rule violation","verdict-default-link":"https://yandex.ru/support/messenger/rules.html","verdict-media_auto_erotica":"because of erotic content","verdict-media_auto_erotica-link":"https://yandex.ru/support/messenger/rules.html#porn-erotica","verdict-media_auto_porno":"because of pornographic content","verdict-media_auto_porno-link":"https://yandex.ru/support/messenger/rules.html#porn-erotica","verdict-media_auto_shock":"because of shocking content","verdict-media_auto_shock-link":"https://yandex.ru/support/messenger/rules.html#shock-content","verdict-media_toloka_erotica":"because of erotic content","verdict-media_toloka_erotica-link":"https://yandex.ru/support/messenger/rules.html#porn-erotica","verdict-media_toloka_shock":"because of shocking content","verdict-media_toloka_shock-link":"https://yandex.ru/support/messenger/rules.html#shock-content","verdict-media_toloka_threat_hard":"because of hate speech","verdict-media_toloka_threat_hard-link":"https://yandex.ru/support/messenger/rules.html#hate-speech","verdict-media_toloka_threat_light":"because of hate speech","verdict-media_toloka_threat_light-link":"https://yandex.ru/support/messenger/rules.html#hate-speech","verdict-media_toloka_violence":"because of hate speech","verdict-media_toloka_violence-link":"https://yandex.ru/support/messenger/rules.html#hate-speech","verdict-text_auto_bad_link":"because of a suspicious link","verdict-text_auto_bad_link-link":"https://yandex.ru/support/messenger/rules.html#links","verdict-text_auto_caps":"because of too much uppercase","verdict-text_auto_caps-link":"https://yandex.ru/support/messenger/rules.html#many-errors","verdict-text_auto_law_violation":"because it violates the law","verdict-text_auto_law_violation-link":"https://yandex.ru/support/messenger/rules.html#nocuous","verdict-text_auto_obscene":"because of obscene language","verdict-text_auto_obscene-link":"https://yandex.ru/support/messenger/rules.html#obscene-lexicon","verdict-text_toloka_advert":"because it contains advertising","verdict-text_toloka_advert-link":"https://yandex.ru/support/messenger/rules.html#adv-spam","verdict-text_toloka_hard_violation":"because of toxic language","verdict-text_toloka_hard_violation-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_hide_violation":"because of toxic language","verdict-text_toloka_hide_violation-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_insult":"because it contains insults","verdict-text_toloka_insult-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_insult_hard":"because it contains insults","verdict-text_toloka_insult_hard-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_insult_light":"because it contains insults","verdict-text_toloka_insult_light-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_is_bad":"because of a rule violation","verdict-text_toloka_is_bad-link":"https://yandex.ru/support/messenger/rules.html","verdict-text_toloka_law_violation":"because it violates the law","verdict-text_toloka_law_violation-link":"https://yandex.ru/support/messenger/rules.html#nocuous","verdict-text_toloka_light_violation":"because of toxic language","verdict-text_toloka_light_violation-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_no_sense":"because it contains a meaningless combination of characters","verdict-text_toloka_no_sense-link":"https://yandex.ru/support/messenger/rules.html#many-errors","verdict-text_toloka_obscene":"because of obscene language","verdict-text_toloka_obscene-link":"https://yandex.ru/support/messenger/rules.html#obscene-lexicon","verdict-text_toloka_obscene_hard":"because of obscene language","verdict-text_toloka_obscene_hard-link":"https://yandex.ru/support/messenger/rules.html#obscene-lexicon","verdict-text_toloka_obscene_light":"because of obscene language","verdict-text_toloka_obscene_light-link":"https://yandex.ru/support/messenger/rules.html#obscene-lexicon","verdict-text_toloka_personal_data":"because it discloses private information","verdict-text_toloka_personal_data-link":"https://yandex.ru/support/messenger/rules.html#private-data","verdict-text_toloka_porno":"because of pornographic content","verdict-text_toloka_porno-link":"https://yandex.ru/support/messenger/rules.html#porn-erotica","verdict-text_toloka_spam":"because of spam","verdict-text_toloka_spam-link":"https://yandex.ru/support/messenger/rules.html#adv-spam","verdict-text_toloka_toxic":"because of toxic language","verdict-text_toloka_toxic-link":"https://yandex.ru/support/messenger/rules.html#toxic","verdict-text_toloka_vulgarity":"because of obscene language","verdict-text_toloka_vulgarity-link":"https://yandex.ru/support/messenger/rules.html#obscene-lexicon"}},[t,e]))},t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(20),a=n(4),s=n(7),c=n(21),l=n(6);function u(e,t,n,r){void 0===r&&(r="push"),e[t]?e[t][r](n):e[t]=[n]}function d(e,t){u(e,"beforeVisible",t,"unshift")}function p(e,t){u(e,"afterVisible",t)}t.default=function(e){return{addComment:function(t,n){var u,m=n.body,f=n.level,h=e.getState().errors,_=o.getProp(h,[m.replyTo,"commentBody"],m),v=_.replyTo||"root",g=r.__assign({},t.stats);Object.keys(g).forEach(function(e){0===e.indexOf(s.ExperimentFlags.REPLY_AFTER_REACTION)&&Number(g[e])!==v&&delete g[e]}),e.setState({stats:g,progresses:r.__assign({},t.progresses,(u={},u[v]=l.ProgressTypes.ADD_COMMENT,u))});var y=o.getPayloadId(h,_.replyTo),b=r.__assign({},_,{apiKey:t.apiKey,entityId:t.entityId,supplierServiceSlug:t.supplierServiceSlug,payloadId:y,secretKey:t.meta.secretKey,retryCount:2,stats:g,analytics:r.__assign({sid:t.sid},o.getProp(h,[v])?{retry:1}:{}),store:e});return window.Ya.Cmnt.api.addComment(b).then(function(n){var u;a.reachGoal("cmnt.content.add",e);var m=Number(Object.keys(n)[0]),h=e.getState(),y=h.formPosition,b=h.tree,k=h.meta.levels,x=h.node,C=o.getProp(n,[m,"reply","id"],0);b[C].path.length>k.length&&(C=o.getParentId(b,C)),b[C].children||(b[C].children={});var P=o.getProp(b,[C,"children"]);o.createEvent(l.EventsTypes.ADD_COMMENT,x),function(e,t,n,r,o){var i=t.sortOrder,a=i[0],s=i[1],l=a.field===c.SortField.VISIBILITY&&s?s:a;l.field===c.SortField.TIME&&l.direction===c.SortDirection.ASC?p(e,n):l.field===c.SortField.TIME&&l.direction===c.SortDirection.DESC?d(e,n):0!==r?l.direction===c.SortDirection.DESC?p(e,n):d(e,n):o===c.FormPosition.BOTTOM?p(e,n):d(e,n)}(P,k[f],m,C,y),function(e,t){void 0===t&&(t="root");var n=e.apiKey,r=e.entityId;e.commentId&&i.deleteDraftFromLS(n,r,t)}(t,_.replyTo);var E=b[C].path,M=E.length<=k.length?E.concat(m):E;return Object.keys(g).forEach(function(e){0===e.indexOf(s.ExperimentFlags.REPLY_AFTER_REACTION)&&Number(g[e])===v&&delete g[e]}),r.__assign({tree:r.__assign({},b,(u={},u[m]=r.__assign({path:M,isNew:!0},n[m]),u)),stats:g},o.clearProgressAndError(e.getState(),v))}).catch(function(t){return a.reachErrorGoal("cmnt.fail.add",t),o.errorHandler(t,l.ErrorTypes.ADD_COMMENT,e.getState(),v,{payloadId:y,commentBody:_})})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(30),a=r.__importDefault(n(69)),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.options,n=void 0===t?{}:t,r=e.version,o=void 0===r?"1":r,s=e.accounts;a.default(s,n,o);var c=document.createElement("script");c.type="text/javascript",c.async=!0,c.src=i.scriptPath(o),this.insertPoint.insertBefore(c,null)},t.prototype.render=function(){var e=this;return o.h("div",{ref:function(t){e.insertPoint=t}})},t}(o.Component);t.YMInitializer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(30);t.default=function(e,t,n){void 0===t&&(t={});var i=o.callbackQueueName(n);window[o.accountListName]=window[o.accountListName]||[];for(var a=0,s=e;a<s.length;a++){var c=s[a];-1===window[o.accountListName].indexOf(c)&&window[o.accountListName].push(c)}window[i]=window[i]||[],window[i].push(function(){e.forEach(function(e){var i={id:e};try{window[o.trackerInstanceName(e)]=new(window.Ya[o.trackerConstructorName(n)])(r.__assign({},i,t))}catch(e){console.warn(e)}})}),e.forEach(function(e){window[o.trackerVersionName(e)]=n})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),o=n(37),i=n(38),a=n(39);function s(e){return Array.isArray(e)&&e.every(r.isNumber)}t.isExperiment=function(e){return r.isObject(e)&&r.orUndefined(r.isString)(e.boxesCrypted)&&r.orUndefined(a.isExperimentSamples)(e.samples)&&r.orUndefined(o.isExperimentControlHeaders)(e.controlHeaders)&&r.orUndefined(i.isExperimentFlags)(e.flags)&&r.orUndefined(s)(e.testIds)},t.isExperimentTestIds=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(4),a=n(6),s=n(31);t.default=function(e){return{addReaction:function(t,n,c){var l;e.setState({progresses:r.__assign({},t.progresses,(l={},l[n]=a.ProgressTypes.ADD_REACTION,l))});var u=e.getState().errors,d=o.getPayloadId(u,n),p={commentId:n,type:c,apiKey:t.apiKey,entityId:t.entityId,supplierServiceSlug:t.supplierServiceSlug,payloadId:d,secretKey:t.meta.secretKey,retryCount:2,stats:t.stats,analytics:r.__assign({sid:t.sid},o.getProp(u,[n])?{retry:1}:{}),store:e};return window.Ya.Cmnt.api.addReaction(p).then(function(){i.reachGoal("cmnt.reaction.add");var t=e.getState().tree;return r.__assign({tree:s.changeReactionTree(t,n,c,1)},o.clearProgressAndError(e.getState(),n))}).catch(function(t){i.reachErrorGoal("cmnt.fail.reaction.add",t);var l=e.getState().tree;return r.__assign({tree:s.changeReactionTree(l,n,c,-1)},o.errorHandler(t,a.ErrorTypes.ADD_REACTION,e.getState(),n,{payloadId:d,reactionType:c}))})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(4),a=n(6);t.default=function(e){return{complainComment:function(t,n,s){var c;e.setState({progresses:r.__assign({},t.progresses,(c={},c[n]=a.ProgressTypes.COMPLAIN_COMMENT,c))});var l=e.getState().errors,u=o.getPayloadId(l,n),d={commentId:n,reason:s,apiKey:t.apiKey,entityId:t.entityId,supplierServiceSlug:t.supplierServiceSlug,payloadId:u,secretKey:t.meta.secretKey,retryCount:2,stats:t.stats,analytics:r.__assign({sid:t.sid},o.getProp(l,[n])?{retry:1}:{}),store:e};return window.Ya.Cmnt.api.complainComment(d).then(function(){return i.reachGoal("cmnt.complaint.submit"),r.__assign({},o.clearProgressAndError(e.getState(),n))}).catch(function(t){return i.reachErrorGoal("cmnt.fail.complaint",t),o.errorHandler(t,a.ErrorTypes.COMPLAIN_COMMENT,e.getState(),n,{complainReason:s,payloadId:u})})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(4),a=n(6);t.default=function(e){return{editComment:function(t,n){var s,c=n.body;e.setState({progresses:r.__assign({},t.progresses,(s={},s[c.id]=n.progressType||a.ProgressTypes.EDIT_COMMENT,s))});var l=e.getState().errors,u=n.progressType===a.ProgressTypes.RESTORE_COMMENT?"restore":"edit",d=o.getPayloadId(l,c.id),p={commentId:c.id,text:c.text,replyTo:c.replyTo,type:c.type,apiKey:t.apiKey,entityId:t.entityId,supplierServiceSlug:t.supplierServiceSlug,payloadId:d,secretKey:t.meta.secretKey,retryCount:2,stats:t.stats,analytics:r.__assign({sid:t.sid},o.getProp(l,[c.id])?{retry:1}:{}),store:e};return window.Ya.Cmnt.api.editComment(p).then(function(t){var n;i.reachGoal("cmnt.content."+u);var s=e.getState(),l=s.tree,d=s.node,p=c.id;return"restore"===u&&o.createEvent(a.EventsTypes.RESTORE_COMMENT,d),r.__assign({tree:r.__assign({},l,(n={},n[p]=r.__assign({},l[p],t[p],"restore"===u?{isDeleted:!1}:{}),n))},o.clearProgressAndError(e.getState(),p))}).catch(function(t){return i.reachErrorGoal("cmnt.fail."+u,t),o.errorHandler(t,n.errorType||a.ErrorTypes.EDIT_COMMENT,e.getState(),c.id,{payloadId:d})})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(10),i=n(22),a=n(1),s=n(20),c=n(4),l=n(7),u=n(21),d=n(6),p=n(32),m=n(16),f=n(44);function h(e){if(void 0===e&&(e=[]),!e||!e.length)return{};for(var t=["firstFieldTop","limit","limitMargin","takeFrom","treeLimit","treeLimitMargin"],n={},r=function(e){if(t.forEach(function(t){void 0!==e[t]&&(n[t]=n[t]||[]).push(e[t])}),e.order){var r=Array.isArray(e.order)?e.order.join(","):e.order;(n.order=n.order||[]).push(r)}if(e.topOrder){var o=Array.isArray(e.topOrder)?e.topOrder.join(","):e.topOrder;(n.topOrder=n.topOrder||[]).push(o)}},o=0,i=e;o<i.length;o++){r(i[o])}return n}t.default=function(e){return{fetchCommentsTree:function(t){e.setState({progresses:r.__assign({},t.progresses,{tree:d.ProgressTypes.FETCH_TREE})});var n=t.commentId||function(e){var t=e.apiKey,n=e.entityId,r=s.getDraftsFromLS(),i=s.getDraftKey(t,n);if(r[i]&&r[i].id&&"root"!==r[i].id&&o.isNumber(Number(r[i].id)))return String(r[i].id)}(t),_=e.getState(),v=_.errors,g=_.meta,y=_.teaser,b=void 0!==y&&y,k=r.__assign({sortQuery:h(t.customSorts)},!b&&n?{commentId:n}:{},{onlyDecent:t.onlyDecent,onlyValuable:t.onlyValuable,apiKey:t.apiKey,entityId:t.entityId,supplierServiceSlug:t.supplierServiceSlug,retryCount:2,stats:t.stats,analytics:r.__assign({sid:t.sid},a.getProp(v,"tree")?{retry:1}:{}),store:e});return window.Ya.Cmnt.api.fetchTree(k).then(function(n){a.createEvent(d.EventsTypes.TREE_LOADED,t.node),"inactive"!==a.getProp(n,"meta.state","active")&&t.readOnly&&(n.meta.state="readonly");var o={slug:n.meta.serviceSlug};return n.meta.exp=r.__assign({},g.exp,n.meta.exp),n.meta.features=p.createFeatures(n.meta.features,g.features),n.meta.exp.samples&&(n.meta.exp.flags=i.extractExperimentFlagsFromSamples(n.meta.exp.samples),o=r.__assign({},o,{ab_test_ids:i.extractExperimentTestIdsFromSamples(n.meta.exp.samples),ab_test_flags:r.__assign({},n.meta.exp.flags)})),n.meta.exp.boxesCrypted&&c.setExperiments(n.meta.exp.boxesCrypted),c.setParams(o),c.reachGoal("cmnt.load.tree"),function(e,t){var n=e.apiKey,o=e.entityId,i=e.commentId,c=s.getDraftsFromLS(),u=s.getDraftKey(n,o),d=a.getProp(c,[u]);if(d){var p=a.getProp(t,["tree",d.id]),m=a.getProp(t,"meta.state","active");(i&&i!==d.id&&"root"!==d.id&&p&&!p.user||(void 0!==a.getProp(t,["meta","exp","flags",l.ExperimentFlags.LOGIN_TO_COMMENT])?a.getProp(t,"meta.user.ban.isBanned"):!t.meta.user||a.getProp(t,"meta.user.ban.isBanned",!1)||!a.isUGCEnabled(r.__assign({},e,{meta:t.meta})))||p&&(p.isDeleted||p.collapsedIn||!p.user)||"active"!==m)&&(delete c[u],s.setDraftsInLS(c))}}(t,n),r.__assign({tree:n.tree,meta:n.meta},a.clearProgressAndError(e.getState(),"tree"))}).then(function(n){var o=a.getProp(n,"meta.levels.0.sortOrder.0"),i=a.getProp(n,"meta.levels.0.sortOrder.1",{}),s=a.getProp(n,"meta.exp.flags."+l.ExperimentFlags.COLLAPSE_PESSIMIZED,!1),c=a.getProp(n,"meta.exp.flags."+l.ExperimentFlags.COLLAPSE_PESSIMIZED_FOR_WSI_SORT,!1),d=a.getProp(n,"meta.exp.flags."+l.ExperimentFlags.PESSIMIZED_MARGIN,t.pessimizedMargin);if(!(s&&(o.direction===u.SortDirection.ASC&&o.field===u.SortField.VISIBILITY||o.direction===u.SortDirection.DESC&&o.field===u.SortField.WSI&&c||o.field!==u.SortField.TIME&&i.direction===u.SortDirection.ASC&&i.field===u.SortField.VISIBILITY||o.field!==u.SortField.TIME&&i.direction===u.SortDirection.DESC&&i.field===u.SortField.WSI&&c)))return r.__assign({},n,{pessimizedMargin:-1});var p={children:n.tree[0].children||{},level:0,levels:n.meta.levels,lookAheadMargin:d+1,limit:0,tree:n.tree},h=a.getNextComments(r.__assign({},p,{direction:m.MoreDirection.AFTER})),_=a.getNextComments(r.__assign({},p,{direction:m.MoreDirection.BEFORE})),v={ids:h.ids.concat(_.ids),directions:h.directions.concat(_.directions),lookAheadIds:h.lookAheadIds.concat(_.lookAheadIds)},g=r.__assign({state:r.__assign({},t,n),store:e},v);return f.loadComments(g).then(function(e){return r.__assign({},n,e,{pessimizedMargin:d})}).catch(function(){return r.__assign({},n,{pessimizedMargin:d})})}).catch(function(t){return c.reachErrorGoal("cmnt.fail.tree",t),a.errorHandler(t,d.ErrorTypes.FETCH_TREE,e.getState(),"tree")})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(4),a=n(6);t.default=function(e){return{getRCA:function(t,n){var s;e.setState({progresses:r.__assign({},t.progresses,(s={},s[n]=a.ProgressTypes.RCA,s))});var c={url:n,apiKey:t.apiKey,secretKey:t.meta.secretKey,stats:t.stats,analytics:{sid:t.sid},store:e};return window.Ya.Cmnt.api.getRCA(c).then(function(t){var a;i.reachGoal("cmnt.rca.load");var s=e.getState().rca;e.setState(r.__assign({rca:r.__assign({},s,(a={},a[n]=t,a))},o.clearProgressAndError(e.getState(),n)))}).catch(function(t){return i.reachErrorGoal("cmnt.fail.rca",t),o.errorHandler(t,a.ErrorTypes.RCA,e.getState(),n)})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{getStickersPacks:function(t,n){var r={id:n};return window.Ya.Cmnt.api.getStickersPacks(r).then(function(t){e.setState({stickersPacks:t.data})}).catch(function(e){console.error("FetchError:",JSON.stringify(e))})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(4),a=n(6);t.default=function(e){return{removeComment:function(t,n){var s;e.setState({progresses:r.__assign({},t.progresses,(s={},s[n]=a.ProgressTypes.REMOVE_COMMENT,s))});var c=e.getState().errors,l=o.getPayloadId(c,n),u={commentId:n,apiKey:t.apiKey,entityId:t.entityId,supplierServiceSlug:t.supplierServiceSlug,payloadId:l,secretKey:t.meta.secretKey,retryCount:2,stats:t.stats,analytics:r.__assign({sid:t.sid},o.getProp(c,[n])?{retry:1}:{}),store:e};return window.Ya.Cmnt.api.removeComment(u).then(function(){var t;i.reachGoal("cmnt.content.remove");var s=e.getState(),c=s.tree,l=s.node;return o.createEvent(a.EventsTypes.REMOVE_COMMENT,l),r.__assign({tree:r.__assign({},c,(t={},t[n]=r.__assign({},c[n],{content:void 0,isDeleted:!0,removedText:c[n].content?o.getUncutCommentContent(c[n].content)[0].text:""}),t))},o.clearProgressAndError(e.getState(),n))}).catch(function(t){return i.reachErrorGoal("cmnt.fail.remove",t),o.errorHandler(t,a.ErrorTypes.REMOVE_COMMENT,e.getState(),n,{payloadId:l})})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(4),a=n(6),s=n(31);t.default=function(e){return{removeReaction:function(t,n,c){var l;e.setState({progresses:r.__assign({},t.progresses,(l={},l[n]=a.ProgressTypes.REMOVE_REACTION,l))});var u=e.getState().errors,d=o.getPayloadId(u,n),p={commentId:n,type:c,apiKey:t.apiKey,entityId:t.entityId,supplierServiceSlug:t.supplierServiceSlug,payloadId:d,secretKey:t.meta.secretKey,retryCount:2,stats:t.stats,analytics:r.__assign({sid:t.sid},o.getProp(u,[n])?{retry:1}:{}),store:e};return window.Ya.Cmnt.api.removeReaction(p).then(function(){i.reachGoal("cmnt.reaction.remove");var t=e.getState().tree;return r.__assign({tree:s.changeReactionTree(t,n,c,-1)},o.clearProgressAndError(e.getState(),n))}).catch(function(t){i.reachErrorGoal("cmnt.fail.reaction.remove",t);var l=e.getState().tree;return r.__assign({tree:s.changeReactionTree(l,n,c,1)},o.errorHandler(t,a.ErrorTypes.REMOVE_REACTION,e.getState(),n,{payloadId:d,reactionType:c}))})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(6);t.default=function(e){return{sendCommentShownEvent:function(t,n){var a=e.getState().rtx,s={fields:r.__assign({commentId:n.join(","),entityId:t.entityId,slug:t.meta.serviceSlug,type:i.ClickDaemonTypes.COMMENT_SHOWN,yandexuid:o.getCookie("yandexuid")},a&&a.id?{rtxId:a.id}:{}),tld:t.tld};return window.Ya.Cmnt.api.sendClick(s)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{sendMC:function(t,n){var r={goal:n,apiKey:t.apiKey,entityId:t.entityId,stats:t.stats,analytics:{sid:t.sid},store:e};return window.Ya.Cmnt.api.sendMC(r).catch(function(e){console.error("FetchError:",JSON.stringify(e))})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(22),a=n(32),s=n(7);t.default=function(e){return{openForm:function(t,n){e.setState({lastOpenForm:n})},setExperiments:function(t,n){s.isExperimentTestIds(n)&&e.setState({meta:r.__assign({},t.meta,{exp:{testIds:n}})})},unsetExperiments:function(t){e.setState({meta:r.__assign({},t.meta,{exp:i.emptyExperiment})})},setExperimentFlags:function(t,n){if(s.isExperimentFlags(n)){var o=i.getExperimentControlHeaders(n);o&&e.setState({meta:r.__assign({},t.meta,{exp:{controlHeaders:o,flags:n}})})}},unsetExperimentFlags:function(t){e.setState({meta:r.__assign({},t.meta,{exp:i.emptyExperiment})})},setFeatures:function(t,n){e.setState({meta:r.__assign({},t.meta,{features:a.createFeatures(n,t.meta.features)})})},setStateGetter:function(t){window.Ya.Cmnt.getState[t.node]=e.getState},deleteNewFlag:function(e,t){var n=r.__assign({},e.tree);return delete n[t].isNew,{tree:n}},clearError:function(e,t){return r.__assign({},o.clearProgressAndError(e,t))},clearProgress:function(e,t){var n=e.progresses,o=void 0===n?{}:n,i=r.__assign({},o);return i[t]&&delete i[t],{progresses:i}},mergeCutTextContent:function(t,n){var i,a=t.tree[n],s=o.getUncutCommentContent(a.content);e.setState({tree:r.__assign({},t.tree,(i={},i[n]=r.__assign({},a,{content:s}),i))})},editCommentInTree:function(t,n,o){var i;e.setState({tree:r.__assign({},t.tree,(i={},i[n]=r.__assign({},t.tree[n],o),i))})},setStats:function(t,n){e.setState({stats:r.__assign({},t.stats,n)})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=n(1);!function(e){e.ID="x-ya-rtx-id"}(r||(r={})),t.saveRtxHeadersToStore=function(e,t){if(e){var n=e.getState(),i=t.get(r.ID);i&&e.setState({rtx:o.__assign({},n.rtx,{id:i})})}},t.createRtxHeadersFromStore=function(e){var t;if(!e)return{};var n=e.getState(),o=i.getProp(n,"rtx.id");return o?((t={})[r.ID]=o,t):{}}},function(e,t,n){e.exports=n(12)(17)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(11));t.default=function(e){return function(t){return new Promise(function(n,a){var s={method:e,headers:{"X-Cmnt-Api-Key":t.apiKey,"X-Balancing-Hash":o.hashCode(t.entityId),"X-Csrf-Token":t.secretKey},body:r.__assign({type:t.type,id:t.commentId,entityId:t.entityId,supplierServiceSlug:t.supplierServiceSlug,payloadId:t.payloadId||o.getPayloadId()},t.analytics),store:t.store};s=o.addStatsToOptions(s,t.stats),i.default("/reaction",s,t.retryCount).then(function(e){return n(e)}).catch(function(e){return a(e)})})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(11));t.default=function(e){return new Promise(function(t,n){var a={method:"PUT",headers:{"X-Cmnt-Api-Key":e.apiKey,"X-Balancing-Hash":o.hashCode(e.entityId),"X-Csrf-Token":e.secretKey},body:r.__assign({reason:e.reason,id:e.commentId,entityId:e.entityId,supplierServiceSlug:e.supplierServiceSlug,payloadId:e.payloadId||o.getPayloadId()},e.analytics),store:e.store};a=o.addStatsToOptions(a,e.stats),i.default("/complain",a,e.retryCount).then(function(e){return t(e)}).catch(function(e){return n(e)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(11));t.default=function(e){return new Promise(function(t,n){var a={method:"GET",headers:{"X-Cmnt-Api-Key":e.apiKey,"X-Balancing-Hash":o.hashCode(e.entityId)},query:r.__assign({entityId:e.entityId},e.analytics)};a=o.addStatsToOptions(a,e.stats),i.default("/count",a,e.retryCount).then(function(e){return t(e)}).catch(function(e){return n(e)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(11));t.default=function(e){return new Promise(function(t,n){var a={method:"POST",headers:{"X-Cmnt-Api-Key":e.apiKey,"X-Balancing-Hash":o.hashCode(e.entityId),"X-Csrf-Token":e.secretKey},body:r.__assign({id:e.commentId,text:e.text,replyTo:e.replyTo,type:e.type,entityId:e.entityId,supplierServiceSlug:e.supplierServiceSlug,payloadId:e.payloadId||o.getPayloadId()},e.analytics),store:e.store};a=o.addStatsToOptions(a,e.stats),i.default("/push",a,e.retryCount).then(function(e){return t(e)}).catch(function(e){return n(e)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(11));t.default=function(e){return new Promise(function(t,n){var a={method:"GET",headers:{"X-Cmnt-Api-Key":e.apiKey,"X-Balancing-Hash":o.hashCode(e.entityId[0]||"")},query:r.__assign({entityId:e.entityId,messagesCount:e.messagesCount},e.supplierServiceSlug?{supplierServiceSlug:e.supplierServiceSlug}:{},e.analytics)};a=o.addStatsToOptions(a,e.stats),i.default("/feed",a,e.retryCount).then(function(e){return t(e)}).catch(function(e){return n(e)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(11));t.default=function(e){return new Promise(function(t,n){var a={headers:{"X-Cmnt-Api-Key":e.apiKey,"X-Balancing-Hash":o.hashCode(e.entityId)},query:r.__assign({},e.sortQuery,{entityId:e.entityId},e.analytics),store:e.store};a=o.addStatsToOptions(a,e.stats);for(var s=0,c=["commentId","onlyDecent","onlyValuable","supplierServiceSlug"];s<c.length;s++){var l=c[s];void 0!==e[l]&&(a.query[l]=e[l])}i.default("/tree",a,e.retryCount).then(function(e){return t(e)}).catch(function(e){return n(e)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(11));t.default=function(e){return new Promise(function(t,n){var a={method:"GET",headers:{"X-Cmnt-Api-Key":e.apiKey,"X-Csrf-Token":e.secretKey},query:r.__assign({url:e.url},e.analytics),store:e.store};a=o.addStatsToOptions(a,e.stats),i.default("/rca",a,e.retryCount).then(function(e){return t(e)}).catch(function(e){return n(e)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(25)),o=n(1);t.default=function(e){return new Promise(function(t,n){var i=o.getConfigField("messengerHost"),a="/stickers/packs";e.id&&(a=a+"?"+r.default({id:e.id})),fetch(""+i+a).then(function(e){return t(e.json())}).catch(function(e){return n(e)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(11));t.default=function(e){return new Promise(function(t,n){var a={headers:{"X-Cmnt-Api-Key":e.apiKey,"X-Balancing-Hash":o.hashCode(e.entityId)},query:r.__assign({ids:e.ids,entityId:e.entityId},e.supplierServiceSlug?{supplierServiceSlug:e.supplierServiceSlug}:{},e.analytics),store:e.store};a=o.addStatsToOptions(a,e.stats),i.default("/message-info",a,e.retryCount).then(function(e){return t(e)}).catch(function(e){return n(e)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(11));t.default=function(e){return new Promise(function(t,n){var a={method:"DELETE",headers:{"X-Cmnt-Api-Key":e.apiKey,"X-Balancing-Hash":o.hashCode(e.entityId),"X-Csrf-Token":e.secretKey},body:r.__assign({id:e.commentId,entityId:e.entityId,supplierServiceSlug:e.supplierServiceSlug,payloadId:e.payloadId||o.getPayloadId()},e.analytics),store:e.store};a=o.addStatsToOptions(a,e.stats),i.default("/push",a,e.retryCount).then(function(e){return t(e)}).catch(function(e){return n(e)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(25)),i=n(1),a=n(17);t.default=function(e){return new Promise(function(t,n){var s=e.tld||a.getTld(),c=i.getConfigField("clickDaemon").replace("{tld}",s),l=i.getConfigField("environment"),u=r.__assign({},e.fields,{env:l,table:"commentator"}),d="/"+o.default(u,"/").replace(/%2C/g,",")+"/*";fetch(c,{method:"POST",body:d}).then(function(e){return t(e)}).catch(function(e){return n(e)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(11));t.default=function(e){return new Promise(function(t,n){var a={method:"GET",headers:{"X-Cmnt-Api-Key":e.apiKey},query:r.__assign({goal:e.goal,entityId:e.entityId},e.analytics),store:e.store};a=o.addStatsToOptions(a,e.stats),i.default("/mc",a,e.retryCount).then(function(e){return t(e)}).catch(function(e){return n(e)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(8),s=n(10),c=r.__importDefault(n(97)),l=r.__importDefault(n(228)),u=n(32),d=n(6),p=n(21),m=n(7),f=n(22),h=n(17);function _(e){return{apiKey:e.apiKey,autoFocus:Boolean(e.autoFocus),commentId:g(e),customSorts:e.sort,entityId:String(e.entityId),formPosition:p.convertToFormPosition(e.formPosition),iframe:Boolean(e.iframe),noComments:e.noComments||d.NoCommentsTypes.COMPACT,node:e.id,onlyDecent:e.onlyDecent,onlyValuable:e.onlyValuable,pessimizedMargin:v(e),readOnly:e.readOnly,scrollOffset:e.scrollOffset,stats:r.__assign({},e.stats,h.getQueryStats()),stickyInput:e.stickyInput,supplierServiceSlug:e.supplierServiceSlug,teaser:e.teaser,tld:e.tld||h.getTld(),viewMode:y(e)}}function v(e){var t=Number(e.pessimizedMargin);return s.isNumber(t)?t:2}function g(e){if(s.isNumber(Number(e.commentId)))return String(e.commentId)}function y(e){var t=e.isMobile,n=e.isNarrow;return t?"mobile":n?"narrow":"wide"}function b(e){if(!m.isExperiment(e.exp))return f.emptyExperiment;if(m.isExperimentFlags(e.exp.flags)){var t=f.resolveExperimentFlagsConflicts(e.exp.flags),n=f.getExperimentControlHeaders(t);if(n)return r.__assign({},f.emptyExperiment,{flags:t,controlHeaders:n})}return m.isExperimentTestIds(e.exp.testIds)?r.__assign({},f.emptyExperiment,{testIds:e.exp.testIds}):f.emptyExperiment}function k(e,t){var n=document.getElementById(e);if(n){for(var s=0,d=window.Ya.Cmnt.getInstances();s<d.length;s++){if(d[s].id===e){var p=o.default("cmnt-main");if(document.querySelector("[id='"+e+"'] ."+p))return;return x(e,t)}}n.firstChild&&n.removeChild(n.firstChild),(t=t||{}).id=e,window.Ya.Cmnt.addInstance(t);var m=_(t);m.meta=r.__assign({},m.meta,{exp:b(t),features:u.createFeatures(t.features)}),i.render(i.h(a.Provider,{store:l.default(m)},i.h(c.default,{serviceMetrika:t.metrika})),n)}}function x(e,t){var n=document.getElementById(e);if(n){for(var o={},s=0,d=window.Ya.Cmnt.getInstances(),p=0,m=d;p<m.length;p++){var f=m[p];if(f.id===e){o=f;break}s+=1}if(Object.keys(o).length){o=r.__assign({},o,t),d[s]=o;var h=window.Ya.Cmnt.getState[e](),v=r.__assign({},h,{errors:{},progresses:{}},_(o));v.meta=r.__assign({},v.meta,{exp:b(o),features:u.createFeatures(o.features,v.meta.features)}),i.render(i.h(a.Provider,{store:l.default(v)},i.h(c.default,{key:JSON.stringify(v),serviceMetrika:o.metrika})),n,n.lastChild)}}}function C(e){var t=document.getElementById(e);if(t){for(var n=window.Ya.Cmnt.getInstances(),r=0;r<n.length;r+=1){if(n[r].id===e){window.Ya.Cmnt.deleteInstance(r),delete window.Ya.Cmnt.getState[e],delete window.Ya.Cmnt.setExperiments[e],delete window.Ya.Cmnt.setExperimentFlags[e],delete window.Ya.Cmnt.unsetExperiments[e],delete window.Ya.Cmnt.unsetExperimentFlags[e],delete window.Ya.Cmnt.setFeatures[e];break}}i.render(null,t,t.lastChild)}}function P(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length){var n=e[0],r=e[1];return n===d.EventsTypes.WIDGET_READY&&r(),void document.body.addEventListener(n,r)}var o=e[0],i=e[1],a=e[2],s=document.getElementById(o);s&&s.addEventListener(i,a)}function E(e){var t=o.default("cmnt-textarea"),n=o.default("cmnt-form_type_root"),r=document.querySelector("[id='"+e+"'] ."+n+" ."+t);r&&r.focus()}t.default=function(){window.Ya.Cmnt.init=k,window.Ya.Cmnt.update=x,window.Ya.Cmnt.destroy=C,window.Ya.Cmnt.on=P,window.Ya.Cmnt.getState={},window.Ya.Cmnt.focus=E,window.Ya.Cmnt.setExperiments={},window.Ya.Cmnt.setExperimentFlags={},window.Ya.Cmnt.setFeatures={},window.Ya.Cmnt.unsetExperiments={},window.Ya.Cmnt.unsetExperimentFlags={}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(9)),a=n(6),s=r.__importDefault(n(98)),c=r.__importDefault(n(100)),l=r.__importDefault(n(101)),u=r.__importDefault(n(102));t.default=o.connect(function(){var e=o.select(function(e){return e.errors.tree});return function(t){return{error:e(t),formPosition:t.formPosition,isMobile:"mobile"===t.viewMode,isNarrow:"narrow"===t.viewMode,isProgress:t.progresses.tree===a.ProgressTypes.FETCH_TREE,meta:t.meta,node:t.node,stats:t.stats,hasTree:null!==t.tree,viewMode:t.viewMode}}},i.default,[s.default,c.default,l.default])(u.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(3)),o=n(26),i=n(7);t.default=o.withExperimentalClassName(i.ExperimentFlags.AUTH_MEDIA_POPUP,r.default("cmnt-exp-auth-media-popup"))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2);t.withExperimentalClassName=function(e,t){return function(n){return function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return r.__extends(s,a),s.prototype.render=function(){var a=this.props,s=a.flags,c=a.className,l=void 0===c?"":c;return s[e]?i.h(n,r.__assign({},this.props,{className:o.default(l,t)})):i.h(n,r.__assign({},this.props))},s}(i.Component)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(3)),o=n(26),i=n(7);t.default=o.withExperimentalClassName(i.ExperimentFlags.LOGIN_TO_COMMENT,r.default("cmnt-exp-login-to-comment"))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(3)),o=n(26),i=n(7);t.default=o.withExperimentalClassName(i.ExperimentFlags.ZERO_EXPERIMENT,r.default("cmnt-exp-zero-experiment"))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(1),s=n(4),c=n(21),l=n(6),u=r.__importDefault(n(45)),d=r.__importDefault(n(5)),p=r.__importDefault(n(15)),m=r.__importDefault(n(157)),f=n(36),h=r.__importDefault(n(46)),_=r.__importDefault(n(24));n(226);var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleRefreshClick=function(){t.props.fetchCommentsTree()},t.renderFetchError=function(){var e=t.props.error;return i.h("div",{className:"cmnt-main__error"},i.h("div",{className:"cmnt-main__error-spin"},i.h(_.default,null)),i.h("div",{className:"cmnt-main__error-message"},d.default(e.type,"front.errors")),i.h(h.default,{onRetry:t.handleRefreshClick}))},t.renderInactive=function(){return i.h("div",{className:"cmnt-main__inactive"},i.h("div",{className:"cmnt-main__inactive-icon"},i.h(p.default,{type:"comments-disabled"})),i.h("div",{className:"cmnt-main__inactive-message"},d.default("comments-disabled")))},t.setMetrikaParams=function(){var e=t.props,n=e.stats,r=void 0===n?{}:n,o={viewMode:e.viewMode};Object.keys(r).length&&(o.stats=r),s.setParams(o)},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.node,n=e.fetchCommentsTree,r=e.setStateGetter,o=e.setExperiments,i=e.setExperimentFlags,a=e.setFeatures,s=e.unsetExperiments,c=e.unsetExperimentFlags;this.setMetrikaParams(),n(),window.Ya.Cmnt.setExperiments[t]=o,window.Ya.Cmnt.setExperimentFlags[t]=i,window.Ya.Cmnt.unsetExperiments[t]=s,window.Ya.Cmnt.unsetExperimentFlags[t]=c,window.Ya.Cmnt.setFeatures[t]=a,r()},t.prototype.render=function(){var e=this.props,t=e.error,n=e.meta,r=e.serviceMetrika,o=void 0===r?[]:r,s=e.isProgress,d=e.hasTree,p=t&&t.type===l.ErrorTypes.FETCH_TREE,h=a.getProp(n,"user.ban.isBanned",!1),v="inactive"!==a.getProp(n,"state","active"),g=!h&&"readonly"!==a.getProp(n,"state"),y=this.props.formPosition||a.getProp(n,"formPosition",c.FormPosition.TOP),b=g&&i.h(u.default,{position:y}),k=a.getConfigField("metrika"),x=k.accounts.concat(o),C=v&&!p&&d&&null!==n,P=v&&!p&&s;return i.h("div",{className:this.classNames},!v&&this.renderInactive(),v&&p&&this.renderFetchError(),P&&i.h(_.default,{className:"cmnt-main__load-spin"}),C&&!P&&[y===c.FormPosition.TOP&&b,i.h(m.default,null),y===c.FormPosition.BOTTOM&&b],i.h(f.YMInitializer,{version:"1",accounts:x,options:k.options}))},Object.defineProperty(t.prototype,"classNames",{get:function(){var e=this.props,t=e.className,n=void 0===t?"":t,r=e.isNarrow,i=e.isMobile;return o.default("cmnt-main",{"cmnt-type_wide":!i&&!r},{"cmnt-type_mobile":i},{"cmnt-width_narrow":r},n)},enumerable:!0,configurable:!0}),t}(i.Component);t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(1),s=n(20),c=n(4),l=n(21),u=n(23),d=r.__importDefault(n(13)),p=r.__importDefault(n(27)),m=r.__importDefault(n(5)),f=r.__importDefault(n(14)),h=r.__importDefault(n(48)),_=r.__importStar(n(50)),v=r.__importDefault(n(133)),g=r.__importDefault(n(35));n(149);var y=function(e){function t(t){var n=e.call(this,t)||this;n.handleSubmit=function(){var e=n.state.value,t=n.props,r=t.addComment,o=t.edit,i=t.editComment,s=t.level,c=void 0===s?0:s,l=t.maxMessageLength,u=t.metaLevels,d=t.relatedId,p=!e.trim(),m=Boolean(l&&e.length>l);if(!p&&!m){if(o&&d)return i({body:{id:d,text:e,replyTo:a.getProp(o,"reply.id"),type:"text"}});r({body:{text:e,replyTo:d,type:"text"},level:d?Math.min(c+1,u.length-1):c})}},n.handleStickerClick=function(e){var t=n.props,r=t.relatedId,o=t.level,i=void 0===o?0:o,a=t.metaLevels;(0,t.addComment)({body:{sticker:e,type:"sticker",replyTo:r},level:r?Math.min(i+1,a.length-1):i})},n.handleCloseClick=function(){var e=n.props,t=e.onClose,r=e.relatedId,o=e.clearError;t&&r&&(t(r),o(r))},n.handleFocusTeaserTextarea=function(){a.createTeaserClickEvent(n.props.node)},n.handleStickersClick=function(){n.setState({stickersVisible:!n.state.stickersVisible}),c.reachGoal("cmnt.write.sticker")},n.handleStickersCloseClick=function(){n.setState({stickersVisible:!1})},n.getSendButtonText=function(){return m.default((n.props.edit?"save":"send")+"-button")},n.renderAuthInvation=function(){return i.h(h.default,{className:n.formClasses,position:n.props.position})},n.renderTeaserAuthInvation=function(){return i.h("div",{className:n.formClasses},i.h(g.default,{readonly:!0,onFocus:n.handleFocusTeaserTextarea}))},n.renderStickersButton=function(){var e=n.props.isProgress,t=n.state.stickersVisible;return i.h(d.default,{size:"m",theme:"clear",iconLeft:"sticker",title:m.default("stickers-button"),disabled:e,active:t,onClick:n.handleStickersClick})},n.setValue=function(e){n.setState({value:e},n.resizeList);var t=n.props,r=t.apiKey,o=t.entityId,i=t.relatedId;"edit"!==t.type&&s.saveValueToLS(r,o,i||"root",e)},n.refForm=function(e){n.form=e},n.refStickersButton=function(e){n.stickersButton=e},n.resizeList=function(){var e=n.props,t=e.stickyInput,r=e.type,i=void 0===r?"root":r,s=e.node,c=e.position,u=void 0===c?l.FormPosition.TOP:c,d=e.viewMode;if(t&&"root"===i&&"mobile"===d){var p=o.default("cmnt-list"),m=document.querySelector("[id='"+s+"'] ."+p);if(m&&n.form)if(u===l.FormPosition.TOP){var f=a.getProp(t,"style.top",0);m.style.paddingTop=n.form.offsetHeight+f+"px"}else{var h=a.getProp(t,"style.bottom",0);m.style.paddingBottom=n.form.offsetHeight+h+"px"}}},n.isDisabled=function(){var e=n.state,t=e.stickersVisible,r=e.value,o=n.props,i=o.defaultValue,a=o.maxMessageLength,s=o.isProgress,c=!r.trim(),l=Boolean(a&&r.length>a);return s||c||l||i===r||t};var r=t.apiKey,u=t.autoFocus,p=t.defaultValue,f=t.edit,_=t.entityId,v=t.relatedId,y=void 0===v?"root":v,b=t.reply,k=t.teaser,x=p||!k&&s.getDraftValueFromLS(r,_,y)||"";return n.hasAutoFocus=u||Boolean(b)||Boolean(f)||Boolean(x),n.state={value:x,stickersVisible:!1},n}return r.__extends(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.relatedId,n=e.openForm;t&&n(t),this.resizeList(),this.callPropOrOwn("onComponentDidMount")},t.prototype.componentDidUpdate=function(e){!e.isProgress||this.props.isProgress||this.props.hasError||(e.isAddCommentProgress&&this.callPropOrOwn("setValue",""),this.handleCloseClick()),this.props.lastOpenForm===this.props.relatedId||e.lastOpenForm===this.props.lastOpenForm||this.state.value.trim()||this.handleCloseClick()},t.prototype.render=function(){var e=this.props,t=e.hasError,n=e.isUGCEnabled,r=e.maxMessageLength,o=e.relatedId,a=e.size,s=void 0===a?"middle":a,c=e.stickyInput,l=e.teaser,u=e.user,d=this.state.value;if(!u||!n)return l?this.renderTeaserAuthInvation():this.callPropOrOwn("renderAuthInvation");var h,_=Boolean(r&&d.length>r);return this.isSticky&&(h=c.style),i.h("form",{className:this.formClasses,ref:this.refForm,style:h},i.h(f.default,{size:s,contentClassName:"cmnt-form__content",iconClassName:"cmnt-form__avatar",position:"top",hasIcon:!0,iconProps:{avatar:u.avatar,editProps:{isAuthor:!0,commentId:o}}},this.renderReplyTo(),this.renderFormTextarea(),!l&&this.renderFormControls()),_&&i.h(f.default,{size:s},i.h("div",{className:"cmnt-form__error"},m.default("max-length-reached","front.errors",{count:d.length-r}))),t&&i.h(f.default,{size:s},i.h(p.default,{errorId:o||"root",onRetry:this.getPropOrOwn("handleSubmit")})))},t.prototype.renderFormTextarea=function(){var e=this.props,t=e.defaultValue,n=e.maxMessageLength,r=e.isProgress,o=e.teaser,a=e.type,s=void 0===a?"root":a,c=this.state,l=c.value,u=c.stickersVisible,d=!l.trim(),p=Boolean(n&&l.length>n),f=r||d||p||t===l;return i.h("div",{className:"cmnt-form__textarea"},i.h(g.default,{autoFocus:this.hasAutoFocus,value:l,readonly:o,disabled:r||u,placeholder:m.default("form-placeholder-"+("reply"===s?"reply":"root")),setValue:this.getPropOrOwn("setValue"),onSubmit:!f&&this.getPropOrOwn("handleSubmit"),onFocus:o&&this.handleFocusTeaserTextarea}))},t.prototype.renderReplyTo=function(){var e=this.props,t=e.levels,n=e.relatedId,r=e.reply;if(!r||!n)return null;var o=a.getProp(r,"user.displayName",n),s=_.hasReply(n,r.path,t);return o&&s?i.h(_.default,{className:"cmnt-form__reply",to:String(o)}):null},t.prototype.renderFormControls=function(){var e=this.props,t=e.defaultValue,n=e.edit,r=e.maxMessageLength,o=e.isProgress,a=e.viewMode,s=this.state,c=s.stickersVisible,l=s.value,u=!l.trim(),p=Boolean(r&&l.length>r),f="wide"!==a,h=(o||u||p||t===l)&&!o?"send-arrow_white":"send-arrow",_=i.h(d.default,{pin:"circle",text:m.default("cancel-button"),className:"cmnt-form__cancel-button",disabled:o,onClick:this.handleCloseClick}),g=this.shouldRenderStickers&&i.h("div",{ref:this.refStickersButton,className:"cmnt-form__stickers-button"},this.callPropOrOwn("renderStickersButton")),y=this.callPropOrOwn("getSendButtonText");return i.h("div",{className:"cmnt-form__controls"},n&&f&&i.h("div",{className:"cmnt-form__left-controls"},_),i.h("div",{className:"cmnt-form__right-controls"},f&&!n&&g,i.h(d.default,{theme:"action",pin:"circle",className:"cmnt-form__send-button",iconLeft:f?h:"",text:!f&&y,title:f&&y,disabled:this.callPropOrOwn("isDisabled"),progress:o,onClick:this.getPropOrOwn("handleSubmit")}),!f&&!n&&g,n&&!f&&_),c&&i.h(v.default,{anchor:this.stickersButton,onStickerClick:this.handleStickerClick,onClose:this.handleStickersCloseClick}))},Object.defineProperty(t.prototype,"formClasses",{get:function(){var e=this.props,t=e.className,n=void 0===t?"":t,r=e.position,i=void 0===r?l.FormPosition.TOP:r,a=e.size,s=void 0===a?"middle":a,c=e.stickyInput,u=e.teaser,d=void 0!==u&&u,p=e.type,m=void 0===p?"root":p,f=i.toLowerCase(),h=o.default("cmnt-form",n,"cmnt-form_type_"+m,"cmnt-form_size_"+s,"cmnt-form_position_"+f,{"cmnt-form_has_stickers":this.shouldRenderStickers},{"cmnt-form_teaser":d});if(this.isSticky){var _=c.type||"normal";return o.default(h,"cmnt-form_sticky","cmnt-form_sticky_type_"+_)}return h},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSticky",{get:function(){var e=this.props,t=e.stickyInput,n=e.type,r=void 0===n?"root":n,o=e.viewMode;return Boolean(t)&&"root"===r&&("mobile"===o||a.isPositionStickySupport())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldRenderStickers",{get:function(){var e=this.props,t=e.stickerSets,n=e.viewMode,r=!this.state.value.trim();return t&&t.length>0&&("wide"===n||"wide"!==n&&r)},enumerable:!0,configurable:!0}),t}(u.Base);t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=r.__importDefault(n(15));n(108);var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hovered:!1},t.handleClick=function(e){var n=t.props,r=n.disabled,o=n.onClick;!r&&o&&o(e)},t.handleKeyPress=function(e){"Enter"===e.key&&t.handleClick(e)},t.handleMouseEnter=function(){t.setState({hovered:!0}),t.props.onMouseEnter&&t.props.onMouseEnter()},t.handleMouseLeave=function(){t.setState({hovered:!1}),t.props.onMouseLeave&&t.props.onMouseLeave()},t.renderButtonContent=function(){var e=t.props,n=e.text,r=e.iconLeft,o=e.iconRight,s=e.disabled,c=void 0!==s&&s,l=e.active,u=void 0!==l&&l,d=t.state.hovered;return i.h("div",{className:"cmnt-button__content"},r&&i.h(a.default,{className:"cmnt-button__icon",hovered:d,disabled:c,active:u,type:r}),n&&i.h("div",{className:"cmnt-button__text"},n),o&&i.h(a.default,{className:"cmnt-button__icon",hovered:d,disabled:c,active:u,type:o}))},t.renderClearButtonContent=function(){var e=t.props,n=e.text,r=e.iconLeft,o=e.iconRight,s=e.disabled,c=void 0!==s&&s,l=e.active,u=void 0!==l&&l,d=t.state.hovered;return[r&&i.h(a.default,{className:"cmnt-button__icon",hovered:d,disabled:c,active:u,type:r}),n,o&&i.h(a.default,{className:"cmnt-button__icon",hovered:d,disabled:c,active:u,type:o})]},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.disabled,n=void 0!==t&&t,r=e.className,a=void 0===r?"":r,s=e.theme,c=void 0===s?"default":s,l=e.type,u=void 0===l?"default":l,d=e.size,p=void 0===d?"m":d,m=e.progress,f=void 0!==m&&m,h=e.iconLeft,_=e.iconRight,v=e.title,g=e.active,y=e.pin,b=void 0===y?"round":y,k=o.default("cmnt-button","cmnt-button_theme_"+c,"cmnt-button_size_"+p,"cmnt-button_type_"+u,"cmnt-button_pin_"+b,a,{"cmnt-button_disabled":n},{"cmnt-button_active":g},{"cmnt-button_progress":f},{"cmnt-button_icon_left":h},{"cmnt-button_icon_right":_}),x=n?-1:0,C=this.props.children;return C&&C.length>0||(C="clear"===c?this.renderClearButtonContent():this.renderButtonContent()),i.h("div",{role:"button","aria-disabled":n,tabIndex:x,className:k,onClick:this.handleClick,onKeyPress:this.handleKeyPress,title:v,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},C)},t}(i.Component);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(3)),o=n(2);n(106);t.default=function(e){var t=e.className,n=void 0===t?"":t,i=e.type,a=e.hovered,s=void 0!==a&&a,c=e.disabled,l=void 0!==c&&c,u=e.active,d=void 0!==u&&u,p=e.title,m=e.onClick,f=void 0===m?void 0:m,h=r.default("cmnt-icon",n,"cmnt-icon_type_"+i,{"cmnt-icon_hovered":s},{"cmnt-icon_disabled":l},{"cmnt-icon_active":d});return o.h("span",{onClick:f,title:p,className:h})}},function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(1),s=n(4),c=r.__importDefault(n(13)),l=r.__importStar(n(5)),u=r.__importDefault(n(46)),d=r.__importDefault(n(24));n(115);var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={retryAvailable:!0},t.handleCancelClick=function(){var e=t.props,n=e.clearError,r=e.errorId;s.reachGoal("cmnt.fail.cancel"),n(r)},t.handleCancelRetry=function(){var e=t.props,n=e.clearProgress,r=e.errorId;t.setState({retryAvailable:!1}),n(r)},t.renderRetryTimer=function(){var e=t.props.onRetry;if(t.state.retryAvailable)return i.h("div",{className:"cmnt-fetch-error__retry"},i.h(u.default,{onRetry:e,onCancel:t.handleCancelRetry}),i.h(c.default,{theme:"clear",text:l.default("cancel-button"),size:"s",onClick:t.handleCancelClick}))},t.get400ErrorText=function(e){var t=e.internalCode,n=l.default("default","front.errors");return l.hasKey(t,"front.errors")&&(n=l.default(t,"front.errors")),n},t.get500ErrorText=function(e){var n=t.state.retryAvailable?e:"default";return l.default(n,"front.errors")},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=void 0===t?"":t,r=e.errors,s=e.errorId,c=e.onRetry,l=e.inline,u=e.withSpin,p=void 0===u||u,m=r[s]||{},f=a.getErrorCode(m.body),h=f>=500&&this.state.retryAvailable&&c&&p,_=o.default("cmnt-fetch-error",n,{"cmnt-fetch-error_has_spin":h},{"cmnt-fetch-error_inline":l});return i.h("div",{className:_},h&&i.h("div",{className:"cmnt-fetch-error__spin"},i.h(d.default,{size:"s"})),i.h("div",{className:"cmnt-fetch-error__content"},i.h("span",{className:"cmnt-fetch-error__message"},f<500?this.get400ErrorText(m.body):this.get500ErrorText(m.type)),f>=500&&this.renderRetryTimer()))},t}(i.Component);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(4),a=5,s=3,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={delay:t.props.delay||a,timeToRetry:t.props.delay||a,attempt:0},t.startTimer=function(){t.timerInterval=setInterval(t.tickTime,1e3)},t.stopTimer=function(){clearInterval(t.timerInterval)},t.tickTime=function(){var e=t.state,n=e.timeToRetry,r=e.delay,o=e.attempt,a=t.props.onCancel;if(n-1<0)return a&&o>=s?(i.reachGoal("cmnt.fail.retry"),a()):(t.props.onRetry(),void t.setState({timeToRetry:2*r,delay:2*r,attempt:o+1}));t.setState({timeToRetry:n-1})},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.startTimer()},t.prototype.componentWillUnmount=function(){this.stopTimer()},t.prototype.render=function(){return o.h("span",null)},t}(o.Component);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(3)),o=n(2);n(113);t.default=function(e){var t=e.position,n=void 0===t?"default":t,i=e.size,a=void 0===i?"m":i,s=e.className,c=void 0===s?"":s,l=r.default("cmnt-spin",c,"cmnt-spin_position_"+n,"cmnt-spin_size_"+a);return o.h("div",{className:l})}},function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=r.__importDefault(n(15)),s=r.__importDefault(n(18)),c=r.__importDefault(n(24)),l=r.__importDefault(n(121));n(124);var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderIcon=function(){var e=t.props,n=e.size,r=e.iconClassName,s=e.iconProps,c=void 0===s?{}:s,u=c.avatar,d=c.type,p=void 0===d?"img":d,m=c.iconType,f=void 0===m?"user-pic":m,h=c.src,_=c.editProps,v=o.default("cmnt-padding-item__icon",r);return"icon"===f?i.h(a.default,{type:p,className:v}):i.h(l.default,{className:v,avatarId:u,type:p,size:n,src:h,editProps:_})},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=void 0===t?"":t,a=e.contentClassName,l=e.spinClassName,u=e.iconClassName,d=e.position,p=void 0===d?"center":d,m=e.size,f=void 0===m?"middle":m,h=e.hasIcon,_=void 0!==h&&h,v=e.hasProgress,g=void 0!==v&&v,y=e.type,b=void 0===y?"default":y,k=e.linkProps,x=o.default("cmnt-padding-item",n,"cmnt-padding-item_size_"+f,"cmnt-padding-item_position_"+p,"cmnt-padding-item_type_"+b),C=o.default("cmnt-padding-item__content",a),P=o.default("cmnt-padding-item__spin",l);return"link"===b?i.h(s.default,r.__assign({className:x,iconClassName:u},k),i.h("div",{className:C},this.props.children)):i.h("div",{className:x},_&&this.renderIcon(),g&&i.h(c.default,{className:P,size:"s"}),i.h("div",{className:C},this.props.children))},t}(i.Component);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=r.__importDefault(n(3)),a=n(23),s=r.__importDefault(n(15));n(119);var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hovered:!1},t.handleHovered=function(e){return function(){t.setState({hovered:e})}},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=void 0===n?"":n,a=e.disabled,c=void 0!==a&&a,l=e.icon,u=e.iconClassName,d=void 0===u?"":u,p=e.iconLeft,m=e.inline,f=void 0!==m&&m,h=e.onClick,_=e.target,v=void 0===_?"_blank":_,g=e.theme,y=void 0===g?"normal":g,b=e.title,k=e.url,x=this.state.hovered,C=i.default("cmnt-link",r,"cmnt-link_theme_"+y,{"cmnt-link_hovered":x},{"cmnt-link_inline":f},{"cmnt-link_disabled":c}),P=i.default("cmnt-link__left-icon",d);return k?o.h("a",{className:C,rel:"noopener noreferrer",target:v,href:k,title:b,onClick:h,onMouseEnter:this.handleHovered(!0),onMouseLeave:this.handleHovered(!1)},p&&o.h(s.default,{className:P,hovered:x,type:p}),t,l&&o.h(s.default,{className:"cmnt-link__icon",hovered:x,type:l})):o.h("div",{className:C,role:"button",title:b,onClick:h,onMouseEnter:this.handleHovered(!0),onMouseLeave:this.handleHovered(!1)},p&&o.h(s.default,{className:P,hovered:x,type:p}),t,l&&" ",l&&o.h(s.default,{className:"cmnt-link__icon",hovered:x,type:l}))},t}(a.Base);t.default=c},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(8),i=n(1),a=r.__importDefault(n(47)),s=n(47);t.TUserPicSize=s.TUserPicSize,t.IEditUserPicProps=s.IEditUserPicProps;t.default=o.connect(function(e){return{auth:i.getProp(e,"meta.features.auth"),iframe:e.iframe,isMobile:"mobile"===e.viewMode,serviceSlug:i.getProp(e,"meta.serviceSlug"),tld:e.tld}})(a.default)},function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(1),s=n(4),c=n(17),l=n(34),u=n(21),d=r.__importDefault(n(5)),p=r.__importDefault(n(18)),m=r.__importDefault(n(49)),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleLoginClick=function(e){e.preventDefault(),s.reachGoal("cmnt.login.click");var n=t.props,r=n.isLoggedIn,o=n.iframe,i=n.auth.yandexApp;if(l.hasYandexAppAuthApi(o)&&!r)return l.initYandexAppAuthFinishedHandler(o,t.retpath,i),void l.showYandexAppAccountManager(o,t.origin);e.metaKey||e.ctrlKey?window.open(t.enterUrl,"_blank"):a.getWindow(o).location.href=t.enterUrl},t.refForm=function(e){t.form=e},t.resizeList=function(){var e=t.props,n=e.stickyInput,r=e.node,i=e.position,s=void 0===i?u.FormPosition.TOP:i,c=e.viewMode;if(t.isSticky&&"mobile"===c){var l=o.default("cmnt-list"),d=document.querySelector("[id='"+r+"'] ."+l);if(d&&t.form)if(s===u.FormPosition.TOP){var p=a.getProp(n,"style.top",0);d.style.paddingTop=t.form.offsetHeight+p+"px"}else{var m=a.getProp(n,"style.bottom",0);d.style.paddingBottom=t.form.offsetHeight+m+"px"}}},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.resizeList()},t.prototype.render=function(){var e,t=this.props,n=t.className,r=void 0===n?"":n,o=t.isLoggedIn,a=t.size,s=void 0===a?"middle":a,c=t.stickyInput,l=t.type,u=void 0===l?"comment":l,f=t.viewMode,h=o?d.default("confirm-phone"):d.default("login-to-yandex");return this.isSticky&&(e=c.style),i.h("div",{className:r,style:e,ref:this.refForm},i.h(m.default,{size:s,position:"wide"===f?"center":"top",type:"comment"===u?"inline":"normal"},i.h("span",null,d.default("login-text-"+u)),i.h(p.default,{target:"_self",url:this.enterUrl,onClick:this.handleLoginClick},h)))},Object.defineProperty(t.prototype,"origin",{get:function(){var e=this.props,t=e.serviceSlug,n=e.type;return["cmnt",t,void 0===n?"comment":n].join("_")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"retpath",{get:function(){var e=this.props,t=e.auth,n=e.commentId,r=e.type,o=void 0===r?"comment":r;return c.buildRetpath(t,[{name:"cmnt_login",value:o},{name:"commentId",value:n}])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enterUrl",{get:function(){var e=this.props,t=e.auth,n=e.commentId,r=e.isLoggedIn,o=e.tld,i=c.buildBackpath(t,[{name:"commentId",value:n}]),s=a.getConfigField("passportHost").replace("{tld}",o);return r?"//"+s+"/profile/phones":"//"+s+"/auth?origin="+this.origin+"&retpath="+encodeURIComponent(this.retpath)+"&backpath="+encodeURIComponent(i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSticky",{get:function(){var e=this.props,t=e.stickyInput,n=e.type,r=void 0===n?"comment":n,o=e.viewMode;return t&&"comment"===r&&("mobile"===o||a.isPositionStickySupport())},enumerable:!0,configurable:!0}),t}(i.Component);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=r.__importDefault(n(14));n(128);t.default=function(e){var t=e.position,n=e.children,r=e.className,s=void 0===r?"":r,c=e.size,l=void 0===c?"middle":c,u=e.type,d=void 0===u?"normal":u,p=o.default("cmnt-message",s,"cmnt-message_size_"+l,"cmnt-message_type_"+d);return i.h("div",{className:p},i.h(a.default,{hasIcon:!0,position:t,type:"table",iconProps:{type:"icon",avatar:"yandex"},size:l},n))}},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(3)),o=n(2);n(131),t.hasReply=function(e,t,n){return 1===n.length||t.length>2&&e!==t[t.length-2]};t.default=function(e){var t=e.className,n=void 0===t?"":t,i=e.to,a=r.default("cmnt-reply",n);return o.h("span",{className:a},i+", ")}},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(8),i=r.__importDefault(n(9)),a=r.__importDefault(n(134));t.default=o.connect(function(e){return{stickerSets:e.meta.stickerSets,stickersPacks:e.stickersPacks,isMobile:"mobile"===e.viewMode}},i.default)(a.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(51),s=n(1),c=r.__importDefault(n(13)),l=r.__importDefault(n(5)),u=r.__importDefault(n(135)),d=r.__importDefault(n(28));n(144);var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.packs=t.props.stickersPacks||[],t.state={activePack:t.packs.length?t.packs[0]:null,packsPage:0,orientation:a.Orientation.PORTRAIT},t.handlePackClick=function(e){return function(){t.setState({activePack:e})}},t.handleArrowClick=function(e){return void 0===e&&(e=!1),function(){var n=e?-1:1;t.setState({packsPage:Math.max(t.state.packsPage+t.getPacksPageSize(e)*n,0)})}},t.handleStickerClick=function(e){return function(){t.props.onStickerClick(e),t.props.onClose()}},t.handleScroll=function(e){var n="mousewheel"===e.type?e.wheelDelta:-40*e.detail;t.stickerItems&&(n<0&&t.stickerItems.scrollHeight-t.stickerItems.offsetHeight-t.stickerItems.scrollTop<=0?(t.stickerItems.scrollTop=t.stickerItems.scrollHeight,e.preventDefault()):n>0&&n>t.stickerItems.scrollTop&&(t.stickerItems.scrollTop=0,e.preventDefault()))},t.handleOrientationChange=function(){t.setState({orientation:a.getOrientation()})},t.renderStickersTable=function(e){void 0===e&&(e=5);var n=[],r=o.default("cmnt-stickers__sticker-image"),a=t.state.activePack,s=o.default("cmnt-stickers__stickers-row","cmnt-stickers__column_"+e);if(!a)return i.h("div",{className:"cmnt-stickers__items"});for(var c=0;c<a.stickers.length;){for(var l=[],u=0;u<e&&c<a.stickers.length;u+=1,c+=1){var d=a.stickers[c];l.push(i.h("div",{key:d.id,className:"cmnt-stickers__sticker",onClick:t.handleStickerClick({setId:a.id,id:d.id})},t.renderStickerImage(d.id,r)))}n.push(i.h("div",{className:s},l))}return i.h("div",{className:"cmnt-stickers__items",ref:t.refStickerItems},i.h("div",{className:"cmnt-stickers__stickers-table"},n))},t.renderStickerPack=function(e){var n=t.state.activePack,r=o.default("cmnt-stickers__tab",{"cmnt-stickers__tab_active":n&&n.id===e.id}),a=o.default("cmnt-stickers__pack-image"),c=s.getProp(e,"stickers.0.id");return c?i.h("div",{key:e.id,className:r,onClick:t.handlePackClick(e)},i.h("div",{className:"cmnt-stickers__pack"},t.renderStickerImage(c,a))):null},t.renderStickerImage=function(e,t){var n=s.getConfigField("messengerHost");return i.h("img",{className:t,src:n+"/"+e+"?size=small",alt:""})},t.getPacksPageSize=function(e){void 0===e&&(e=!1);var n=t.state.packsPage;return 0===n&&!e||8===n&&e?8:7},t.refStickerItems=function(e){t.stickerItems=e,t.stickerItems&&(t.stickerItems.addEventListener("mousewheel",t.handleScroll),t.stickerItems.addEventListener("DOMMouseScroll",t.handleScroll))},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.stickerSets,n=e.stickersPacks,r=e.getStickersPacks,o=e.isMobile;t&&!n&&r(t),o&&a.onOrientationReallyChange(this.handleOrientationChange)},t.prototype.componentWillReceiveProps=function(e){!this.props.stickersPacks&&e.stickersPacks&&(this.packs=e.stickersPacks,this.setState({activePack:this.packs[0],orientation:a.getOrientation()}))},t.prototype.componentWillUnmount=function(){var e=this.props.isMobile;this.stickerItems&&(this.stickerItems.removeEventListener("mousewheel",this.handleScroll),this.stickerItems.removeEventListener("DOMMouseScroll",this.handleScroll)),e&&window.removeEventListener("orientationchange",this.handleOrientationChange)},t.prototype.render=function(){var e=this,t=this.state,n=t.activePack,s=t.packsPage,p=this.props,m=p.isMobile,f=p.onClose,h=!m&&Boolean(s),_=!m&&s<this.packs.length-this.getPacksPageSize(),v=o.default("cmnt-stickers__tabs",{"cmnt-stickers__tabs_has_previous":h},{"cmnt-stickers__tabs_has_next":_}),g=i.h("div",{className:"cmnt-stickers__header"},i.h("div",{className:"cmnt-stickers__close-button"},i.h(c.default,{size:"s",theme:"clear",iconLeft:"close",title:l.default("close-button"),onClick:f})),i.h("div",{className:"cmnt-stickers__title"},n?n.title:""));if(m){var y=a.getOrientation()===a.Orientation.PORTRAIT?4:7;return i.h(u.default,{className:"cmnt-stickers__modal",onClose:f},i.h("div",{className:"cmnt-stickers cmnt-stickers_mobile"},g,this.renderStickersTable(y),i.h("div",{className:"cmnt-stickers__packs-wrapper"},i.h("div",{className:"cmnt-stickers__packs"},i.h("div",{className:v},this.packs.map(function(t){return e.renderStickerPack(t)}))))))}return i.h(d.default,r.__assign({className:"cmnt-popup_type_stickers",directions:["bottom-center","top-center","bottom-right","top-right","bottom-left","top-left"],mainOffset:8},this.props),i.h("div",{className:"cmnt-stickers cmnt-stickers_desktop"},g,this.renderStickersTable(),i.h("div",{className:"cmnt-stickers__packs"},h&&i.h("div",{className:"cmnt-stickers__arrow cmnt-stickers__arrow_previous"},i.h(c.default,{key:"arrow_left_"+s,size:"s",theme:"clear",iconLeft:"arrow-left",className:"cmnt-stickers__arrow-button",title:l.default("previous-button"),onClick:this.handleArrowClick(!0)})),i.h("div",{className:v},this.visibleStickers.map(function(t){return e.renderStickerPack(t)})),_&&i.h("div",{className:"cmnt-stickers__arrow cmnt-stickers__arrow_next"},i.h(c.default,{key:"arrow_right_"+s,size:"s",theme:"clear",iconLeft:"arrow-right",className:"cmnt-stickers__arrow-button",title:l.default("next-button"),onClick:this.handleArrowClick()})))))},Object.defineProperty(t.prototype,"visibleStickers",{get:function(){var e=this.state.packsPage;return this.packs.slice(e,this.getPacksPageSize()+e)},enumerable:!0,configurable:!0}),t}(i.Component);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(136);t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(1),s=r.__importDefault(n(28));n(142);var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={modalContent:void 0},t.refModalContent=function(e){t.setState({modalContent:e})},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){a.createEvent("modalOpen",document.body)},t.prototype.componentWillUnmount=function(){a.createEvent("modalClose",document.body)},t.prototype.render=function(){var e=this.state.modalContent,t=o.default("cmnt-modal__content",this.props.className);return i.h(s.default,{className:"cmnt-modal",anchor:document.body,isModal:!0,clickableArea:e,onClose:this.props.onClose},i.h("div",{ref:this.refModalContent,className:t},this.props.children),i.h("div",{className:"cmnt-modal__content-aligner"}))},t}(i.Component);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(51),s=r.__importDefault(n(138));n(140);var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.into=t.props.isModal?t.props.anchor:t.props.anchor.offsetParent,t.state={direction:"bottom-center",top:t.props.isModal?0:-9999,left:t.props.isModal?0:-9999},t.handleClickOutside=function(e){var n=e.target,r=t.props,o=r.clickableArea,i=r.anchor,a=r.onClose;if(o&&!o.contains(n))return e.preventDefault(),void a();t.popup.contains(n)||i.contains(n)||a()},t.handleOrientationChange=function(){t.redraw()},t.renderModal=function(){var e=t.renderPopup();return i.h(s.default,{into:t.into},e)},t.renderPopup=function(){var e=t.props,n=e.className,a=void 0===n?"":n,s=e.isModal,c=e.hasTail,l=e.type,u=void 0===l?"normal":l,d=e.tailInDirections,p=void 0===d?t.props.directions:d,m=t.state,f=m.left,h=m.top,_=m.direction,v=m.tail,g=c&&v&&(!p||-1!==p.indexOf(_)),y=o.default("cmnt-popup",a,"cmnt-popup_direction_"+_,"cmnt-popup_type_"+u,{"cmnt-popup_is_modal":Boolean(s)});return i.h("div",{className:y,style:{top:h,left:f},ref:t.refPopup},g&&i.h("div",{className:"cmnt-popup__tail",style:r.__assign({},v,t.calcTailDimension())}),i.h("div",{className:"cmnt-popup__content"},t.props.children))},t.redraw=function(e){var n=(void 0===e?{}:e).hidePopupBeforeCalculation,r=void 0===n||n;if(!t.props.isModal){var o=t.calcBestDrawingParams(r);t.setState(o)}},t.refPopup=function(e){e&&(t.popup=e)},t.calcBestDrawingParams=function(e){for(var n,o=t.calcPopupDimensions(),i=t.calcTargetDimensions(),a=t.calcViewportDimensions(e),s=t.props,c=s.directions,l=void 0===c?[]:c,u=s.indentFromViewportEdge,d=void 0===u?16:u,p=t.into.getBoundingClientRect(),m=l[0],f=0,h=0;h<l.length;h+=1){var _=l[h],v=t.calcPosition(_,i,o),g={top:v.top+p.top+window.pageYOffset,left:v.left+p.left+window.pageXOffset},y=t.calcViewportFactor(d,g,a,o);if((0===h||y>f)&&(m=_,f=y,n=v),f>.99)break}var b=t.calcTailPosition(m,i,o),k=t.maximizeIntersectionWithViewportOnTheX(d,n,b,e),x=k.popup,C=k.tail;return r.__assign({},x,{direction:m,tail:t.considerShowTailLimits(m,C)})},t.maximizeIntersectionWithViewportOnTheX=function(e,n,r,o){var i=t.into.getBoundingClientRect(),a=t.calcPopupDimensions(),s=t.calcTailDimension(),c=t.calcViewportDimensions(o),l=n.left+i.left+window.pageXOffset,u=(n.top,i.top,window.pageYOffset,0);if(l<c.left+e){var d=Math.min(e,r.left+l-c.left-8);u=l-(c.left+d)}else if(l+a.width>c.right-e){d=Math.min(e,c.right-l-r.left-s.width-10);u=l-Math.max(c.left+d,l-(l+a.width-c.right+d))}return{popup:{top:n.top,left:n.left-u},tail:{top:r.top,left:r.left+u}}},t.calcViewportFactor=function(e,t,n,r){var o=Math.max(t.left,n.left+e),i=Math.min(t.left+r.width,n.right-e),a=Math.max(t.top,n.top+e),s=Math.min(t.top+r.height,n.bottom-e);return o<i&&a<s?(i-o)*(s-a)/r.area:0},t.calcPosition=function(e,n,r){var o={},i=t.props,a=i.mainOffset,s=void 0===a?0:a,c=i.secondaryOffset,l=void 0===c?0:c;return t.checkMainDirection(e,"bottom")?o.top=n.top+n.height+s:t.checkMainDirection(e,"top")?o.top=n.top-r.height-s:t.checkMainDirection(e,"left")?o.left=n.left-r.width-s:t.checkMainDirection(e,"right")&&(o.left=n.left+n.width+s),t.checkSecondaryDirection(e,"right")?o.left=n.left+n.width-r.width-l:t.checkSecondaryDirection(e,"left")?o.left=n.left+l:t.checkSecondaryDirection(e,"bottom")?o.top=n.top+n.height-r.height-l:t.checkSecondaryDirection(e,"top")?o.top=n.top+l:t.checkSecondaryDirection(e,"center")&&(t.checkMainDirection(e,"top","bottom")?o.left=n.left+n.width/2-r.width/2:t.checkMainDirection(e,"left","right")&&(o.top=n.top+n.height/2-r.height/2)),o},t.calcTailPosition=function(e,n,r){var o={},i=t.calcTailDimension(),a=i.width/2,s=i.height/2,c=t.props,l=c.tailHorizontalOffset,u=void 0===l?0:l,d=c.secondaryOffset,p=void 0===d?0:d,m=c.tailVerticalOffset,f=void 0===m?0:m;return t.checkMainDirection(e,"bottom")?o.top=-s:t.checkMainDirection(e,"top")?o.top=Math.floor(r.popupHeight-s):t.checkMainDirection(e,"left")?o.left=Math.floor(r.popupWidth-a):t.checkMainDirection(e,"right")&&(o.left=-a),t.checkSecondaryDirection(e,"right")?o.left=r.popupWidth-Math.ceil(Math.min(r.popupWidth,n.width)/2)-a+p+u:t.checkSecondaryDirection(e,"left")?o.left=Math.ceil(Math.min(r.popupWidth,n.width)/2)-a-p+u:t.checkSecondaryDirection(e,"bottom")?o.top=r.popupHeight-Math.ceil(Math.min(r.popupHeight,n.height)/2)-s+p+f:t.checkSecondaryDirection(e,"top")?o.top=Math.ceil(Math.min(r.popupHeight,n.height)/2)-s-p+f:t.checkSecondaryDirection(e,"center")&&(t.checkMainDirection(e,"top","bottom")?o.left=Math.ceil(r.popupWidth/2)-a-p+u:o.top=Math.ceil(r.popupHeight/2)-s-p+u),o},t.considerShowTailLimits=function(e,n){var r=t.props.showTailLimits,o=void 0===r?{}:r,i=t.calcPopupDimensions().width,a=o[e];return a&&(t.checkSecondaryDirection(e,"right")&&n.left<i-a||t.checkSecondaryDirection(e,"left")&&n.left>a)?null:n},t.calcPopupDimensions=function(){var e=t.popup,n=e.clientWidth,r=e.clientHeight,o=t.popup.getBoundingClientRect(),i=o.width,a=o.height;return{width:Math.round(i),height:Math.round(a),popupWidth:n,popupHeight:r,area:n*r}},t.calcViewportDimensions=function(e){var n=getComputedStyle(t.popup).getPropertyValue("display");e&&(t.popup.style.display="none");var r=window.pageYOffset,o=window.pageXOffset,i=window.innerWidth,a=window.innerHeight;return t.popup.style.display=n,{top:r,left:o,bottom:r+a,right:o+i}},t.calcTailDimension=function(){var e=t.props.tailSize,n=void 0===e?{}:e;return r.__assign({height:10,width:10},n)},t.checkMainDirection=function(e,t,n){return 0===e.indexOf(t)||n&&0===e.indexOf(n)},t.checkSecondaryDirection=function(e,t){return e.indexOf("-"+t)>0},t.calcTargetDimensions=function(){var e=t.props.anchor;return{left:e.offsetLeft,top:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.redraw(),document.addEventListener("mousedown",this.handleClickOutside),document.addEventListener("touchstart",this.handleClickOutside,{passive:!1}),a.onOrientationReallyChange(this.handleOrientationChange)},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleClickOutside),document.removeEventListener("touchstart",this.handleClickOutside,{passive:!1})},t.prototype.render=function(){return this.props.isModal?this.renderModal():this.renderPopup()},t}(i.Component);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(139);t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.isMounted=!0,this.renderLayer=this.renderLayer.bind(this),this.renderLayer()},t.prototype.componentDidUpdate=function(e){for(var t in e)if(e[t]!==this.props[t])return setTimeout(this.renderLayer)},t.prototype.componentWillUnmount=function(){this.renderLayer(!1),this.isMounted=!1,this.remote&&this.remote.parentNode&&this.remote.parentNode.removeChild(this.remote)},t.prototype.render=function(){return null},t.prototype.renderLayer=function(e){if(void 0===e&&(e=!0),this.isMounted&&e){this.props.into!==this.intoPointer&&(this.intoPointer=this.props.into,this.into&&this.remote&&(this.remote=o.render(o.h(a,null),this.into,this.remote)),this.into=this.findNode(this.props.into));var t=this.remote&&null===this.remote.parentNode?void 0:this.remote;this.remote=o.render(o.h(a,{context:this.context},e&&this.props.children||null),this.into,t)}},t.prototype.findNode=function(e){return"string"==typeof e?document.querySelector(e):e},t}(o.Component);t.default=i;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getChildContext=function(){return this.props.context},t.prototype.render=function(e){var t=e.children;return t&&t[0]||null},t}(o.Component)},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=r.__importDefault(n(5));n(147);var s=32,c=92,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.caretPosition=(t.props.value||"").length||0,t.handleInput=function(e){var n=e.target;t.caretPosition=Number(n.selectionEnd),t.props.setValue&&t.props.setValue(n.value),t.resizeArea()},t.handleKeyDown=function(e){var n=t.props,r=n.value,o=void 0===r?"":r,i=n.onSubmit;o.trim()&&i&&"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&i()},t.handleKeyUp=function(e){"Backspace"===e.key&&t.handleInput(e)},t.handleFocus=function(){var e=t.props,n=e.readonly,r=e.onFocus;r&&r(),n&&t.textarea.blur()},t.refTextarea=function(e){t.textarea=e},t.resizeArea=function(){var e=t.props.onResizeArea,n=parseInt(t.textarea.style.height||"0",10);t.textarea.style.height="auto";var r=t.textarea.scrollHeight+t.borderHeight;t.props.isMobile&&(r=Math.min(r,c)),r=Math.max(s,r),t.textarea.style.height=r+"px",t.textarea.scrollTop=t.textarea.scrollHeight,e&&n!==r&&e()},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.props.autoFocus&&this.textarea.focus(),this.resizeArea()},t.prototype.componentDidUpdate=function(){document.activeElement===this.textarea&&(this.textarea.selectionStart=this.caretPosition,this.textarea.selectionEnd=this.caretPosition),this.resizeArea()},t.prototype.render=function(){var e=this.props,t=e.className,n=void 0===t?"":t,r=e.disabled,a=e.readonly,s=e.value,c=void 0===s?"":s,l=r?-1:0,u=o.default("cmnt-textarea",n);return i.h("textarea",{ref:this.refTextarea,className:u,tabIndex:l,rows:1,disabled:r,readonly:a,value:c||void 0,placeholder:this.placeholder,onInput:this.handleInput,onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus})},Object.defineProperty(t.prototype,"borderHeight",{get:function(){var e=getComputedStyle(this.textarea);return(parseInt(e.getPropertyValue("border-top-width"))||0)+(parseInt(e.getPropertyValue("border-bottom-width"))||0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){var e=this.props.placeholder,t=void 0===e?a.default("form-placeholder-root"):e;if(!(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>-1))return t},enumerable:!0,configurable:!0}),t}(i.Component);t.default=l},function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(7),a=r.__importDefault(n(29)),s=n(19),c=r.__importDefault(n(35));t.default=function(e){return function(t){function n(e){var n=t.call(this,e)||this;return n.renderAuthInvation=function(e){var t,r=n.props.stickyInput;return e.isSticky&&(t=r.style),o.h("div",{className:e.formClasses,style:t,ref:e.refForm},o.h(a.default,{secondaryOffset:0,type:"comment"},o.h(c.default,{readonly:!0})))},n.renderAuthInvation=n.bindProp(n.renderAuthInvation),n}return r.__extends(n,t),n.prototype.render=function(){return this.props.flags[i.ExperimentFlags.AUTH_MEDIA_POPUP]?o.h(e,r.__assign({},this.props,{renderAuthInvation:this.renderAuthInvation})):o.h(e,r.__assign({},this.props))},n}(s.Experimental)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=r.__importDefault(n(33)),s=n(1),c=n(4),l=n(17),u=n(34),d=r.__importDefault(n(5)),p=r.__importDefault(n(52)),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={visible:t.props.visible||!1},t.componentDidMount=function(){document.addEventListener("keydown",t.handleKeyPress,!1)},t.componentWillUnmount=function(){document.removeEventListener("keydown",t.handleKeyPress,!1)},t.renderMediaPopup=function(){var e=t.props,n=e.isLoggedIn,o=e.mainOffset,a=void 0===o?8:o,s=e.secondaryOffset,c=void 0===s?-20:s,l=e.tailHorizontalOffset,u=void 0===l?0:l,m=r.__rest(e,["isLoggedIn","mainOffset","secondaryOffset","tailHorizontalOffset"]),f={text:n?d.default("confirm-button"):d.default("log-in-button"),onClick:t.handleLoginClick},h=n?void 0:{text:d.default("register-button"),onClick:t.handleRegisterClick};return i.h(p.default,r.__assign({anchor:t.target,mainOffset:a,onClose:t.close,primaryButton:f,secondaryButton:h,secondaryOffset:c,tailHorizontalOffset:u,text:t.text},m))},t.handleKeyPress=function(e){"Escape"===e.key&&t.close()},t.refTarget=function(e){t.target=e},t.handleLoginClick=function(e){c.reachGoal("cmnt.login.click"),t.openPassport(e,"auth")},t.handleRegisterClick=function(e){c.reachGoal("cmnt.register.click"),t.openPassport(e,"registration")},t.openPassport=function(e,n){var r=t.getPassportUrl(n);t.close();var o=t.props,i=o.isLoggedIn,a=o.iframe,c=o.auth.yandexApp;if(u.hasYandexAppAuthApi(a)&&!i)return u.initYandexAppAuthFinishedHandler(a,t.retpath,c),void u.showYandexAppAccountManager(a,t.origin);e.metaKey||e.ctrlKey?window.open(r,"_blank"):s.getWindow(a).location.href=r},t.getPassportUrl=function(e){var n=t.props,o=n.auth,i=n.commentId,c=n.isLoggedIn,u=n.tld,d={protocol:"https",hostname:s.getConfigField("passportHost").replace("{tld}",u)};return c?a.default.format(r.__assign({},d,{pathname:"/profile/phones"})):a.default.format(r.__assign({},d,{pathname:"/"+e,query:{origin:t.origin,retpath:t.retpath,backpath:l.buildBackpath(o,[{name:"commentId",value:i}])}}))},t.show=function(e){e.stopPropagation(),t.state.visible||t.setState({visible:!0})},t.close=function(){var e=t.props.onClose;t.setState({visible:!1}),e&&e()},t}return r.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState({visible:e.visible})},t.prototype.render=function(){var e=this.props,t=e.captureClicks,n=void 0===t||t,r=e.containerClassName,a=void 0===r?"":r,s=e.children,c=e.isLoggedIn,l=e.isUGCEnabled,u=e.isReadOnly,d=e.targetClassName,p=void 0===d?"":d,m=this.state.visible,f=o.default("cmnt-auth-media-popup",a),h=o.default(p);return c&&l||u?Array.isArray(s)?s.length<2?s[0]:i.h("div",{className:f},i.h("div",{className:h},s)):s:i.h("div",{className:f},i.h("div",{className:h,ref:this.refTarget,onClickCapture:n&&this.show},s),m&&this.renderMediaPopup())},Object.defineProperty(t.prototype,"text",{get:function(){var e=this.props,t=e.isLoggedIn,n=e.type,r=t?d.default("confirm-phone-to-action"):d.default("login-to-action");return d.default(r,"front.common",{action:d.default("action-to-"+n)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"retpath",{get:function(){var e=this.props,t=e.auth,n=e.commentId,r=e.type,o=void 0===r?"comment":r;return l.buildRetpath(t,[{name:"cmnt_login",value:o},{name:"commentId",value:n}])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"origin",{get:function(){var e=this.props,t=e.serviceSlug,n=e.serviceOrigin,r=e.type;return["cmnt",n||"exp-amp-"+t,void 0===r?"comment":r].join("_")},enumerable:!0,configurable:!0}),t}(i.Component);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=r.__importDefault(n(13)),a=r.__importDefault(n(5)),s=r.__importDefault(n(28));n(154);var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.popupRef,n=e.primaryButton,c=e.secondaryButton,l=e.text,u=r.__rest(e,["popupRef","primaryButton","secondaryButton","text"]);return o.h(s.default,r.__assign({ref:t,className:"cmnt-popup_type_media",type:"media",directions:["bottom-left","top-left","bottom-right","top-right"],tailInDirections:["bottom-left","top-left","bottom-right"],mainOffset:5,hasTail:!0,tailSize:{width:21,height:16},secondaryOffset:-30},u),o.h("div",{className:"cmnt-media-popup__content"},o.h("div",{className:"cmnt-media-popup__text"},l),o.h("div",{className:"cmnt-media-popup__close-button"},o.h(i.default,{size:"s",theme:"clear",iconLeft:"close_media-popup",title:a.default("close-button"),onClick:this.props.onClose})),o.h("div",{className:"cmnt-media-popup__controls"},o.h("div",{className:"cmnt-media-popup__controls-wrapper"},c&&o.h(i.default,r.__assign({className:"cmnt-media-popup__secondary-button",theme:"clear",type:"media",size:"s"},c)),o.h(i.default,r.__assign({className:"cmnt-media-popup__primary-button",theme:"action",type:"media",size:"m"},n))))))},t}(o.Component);t.default=c},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(8),a=r.__importDefault(n(33)),s=n(1),c=n(20),l=n(17),u=n(34),d=n(7),p=r.__importDefault(n(29)),m=n(19),f=r.__importDefault(n(5)),h=r.__importDefault(n(52)),_=r.__importDefault(n(14)),v=r.__importDefault(n(35));t.default=function(e){var t=function(t){function n(e){var n=t.call(this,e)||this;return n.state={authPopupEnabled:"wide"!==n.props.viewMode,authPopupVisible:!1},n.renderStickersButton=function(e){var t=n.props.serviceSlug;return o.h(p.default,{commentId:n.props.relatedId,secondaryOffset:-20,serviceOrigin:"exp-ltc-"+t,type:"stickers_button"},e.renderStickersButton())},n.renderAuthInvation=function(e){var t,r=n.props,i=r.size,a=void 0===i?"middle":i,s=r.reply,c=r.stickyInput,l=r.maxMessageLength,u=Boolean(l&&e.state.value.length>l);e.isSticky&&(t=c.style);var d=u?o.h("div",{className:"cmnt-form__error"},f.default("max-length-reached","front.errors",{count:e.state.value.length-l})):null;return s&&s.path.length>2?o.h("div",{className:e.formClasses,style:t,ref:e.refForm},o.h(_.default,{contentClassName:"cmnt-form__content",size:a},e.renderReplyTo(),o.h("div",{ref:n.refFormContent},n.renderFormTextarea(e),e.renderFormControls(),n.renderAuthPopup())),d):o.h("div",{className:e.formClasses,style:t,ref:e.refForm},o.h("div",{ref:n.refFormContent,className:"cmnt-form__content"},n.renderFormTextarea(e),e.renderFormControls(),n.renderAuthPopup()),d)},n.renderFormTextarea=function(e){var t=n.props,r=t.defaultValue,i=t.maxMessageLength,a=t.isProgress,s=t.teaser,c=t.type,l=void 0===c?"root":c,u=e.state,d=u.value,p=u.stickersVisible,m=!d.trim(),h=Boolean(i&&d.length>i),_=a||m||h||r===d,g="reply"===l?"reply":"root";return o.h("div",{className:"cmnt-form__textarea"},o.h(v.default,{autoFocus:e.hasAutoFocus,disabled:a||p,placeholder:f.default("form-placeholder-"+g),readonly:s,setValue:e.getPropOrOwn("setValue"),value:d,onSubmit:!_&&e.getPropOrOwn("handleSubmit"),onFocus:s&&e.handleFocusTeaserTextarea,onResizeArea:n.handleTextareaResize}))},n.setValue=function(e,t){e.setValue(t);var r=n.state.authPopupVisible,o=t.trim().length;n.setState({authPopupVisible:o>0&&(r||o>5)})},n.refFormContent=function(e){n.formContent=e},n.renderAuthPopup=function(){var e=n.state,t=e.authPopupEnabled,r=e.authPopupVisible;if(t&&r){var i={text:f.default("button-login-now"),onClick:function(e){return n.openPassport(e,!1)}},a={text:f.default("button-later"),onClick:n.handleAuthPopupClose};return o.h(h.default,{anchor:n.formContent,directions:["bottom-center","top-center","bottom-left","top-left","bottom-right","top-right"],mainOffset:8,onClose:n.handleAuthPopupClose,popupRef:n.refAutoSavePopup,primaryButton:i,secondaryButton:a,secondaryOffset:0,tailInDirections:["bottom-center","top-center","bottom-left","top-left","bottom-right"],text:f.default("note-about-comment-autosave"),showTailLimits:{"top-left":50,"top-center":50}})}},n.refAutoSavePopup=function(e){n.autoSavePopup=e},n.handleAuthPopupClose=function(){n.setState({authPopupEnabled:!1,authPopupVisible:!1})},n.handleTextareaResize=function(){n.autoSavePopup&&n.autoSavePopup.redraw({hidePopupBeforeCalculation:!1})},n.getSendButtonText=function(e){var t=n.props,r=t.isLoggedIn,o=t.isUGCEnabled;return r&&o?e.getSendButtonText():f.default("login-and-send-button")},n.onComponentDidMount=function(e){var t=n.props.defaultValue,r=e.state.value;"send-comment"===l.getUrlQuery().cmnt_action&&r&&r!==t&&(e.handleSubmit(),l.removeParamsFromQuery("cmnt_action"))},n.handleSubmit=function(e,t){var r=n.props,o=r.apiKey,i=r.entityId,a=r.isLoggedIn,s=r.isUGCEnabled,l=r.relatedId,u=e.state.value;return c.saveValueToLS(o,i,l||"root",u),a&&s?e.handleSubmit():n.openPassport(t,!0)},n.openPassport=function(e,t){var r=n.props,o=r.relatedId,i=r.isLoggedIn,a=r.iframe,c=r.auth.yandexApp,l=n.getPassportUrl(o,t);if(u.hasYandexAppAuthApi(a)&&!i)return u.initYandexAppAuthFinishedHandler(a,n.getRetpath(o,t),c),void u.showYandexAppAccountManager(a,n.origin);e&&(e.metaKey||e.ctrlKey)?window.open(l,"_blank"):s.getWindow(a).location.href=l},n.getPassportUrl=function(e,t){var o=n.props,i=o.auth,c=o.isLoggedIn,u=o.serviceSlug,d=o.tld,p=o.type,m=void 0===p?"comment":p,f={protocol:"https",hostname:s.getConfigField("passportHost").replace("{tld}",d)};return c?a.default.format(r.__assign({},f,{pathname:"/profile/phones"})):a.default.format(r.__assign({},f,{pathname:"/auth",query:{origin:["cmnt","exp-ltc-"+u,m].join("_"),retpath:n.getRetpath(e,t),backpath:l.buildBackpath(i,[{name:"commentId",value:e}])}}))},n.getSendButtonText=n.bindProp(n.getSendButtonText),n.handleSubmit=n.bindProp(n.handleSubmit),n.onComponentDidMount=n.bindProp(n.onComponentDidMount),n.renderAuthInvation=n.bindProp(n.renderAuthInvation),n.renderStickersButton=n.bindProp(n.renderStickersButton),n.setValue=n.bindProp(n.setValue),n}return r.__extends(n,t),n.prototype.render=function(){return this.props.flags[d.ExperimentFlags.LOGIN_TO_COMMENT]?o.h(e,r.__assign({},this.props,{getSendButtonText:this.getSendButtonText,handleSubmit:this.handleSubmit,isDisabled:this.isDisabled,onComponentDidMount:this.onComponentDidMount,renderAuthInvation:this.renderAuthInvation,renderStickersButton:this.renderStickersButton,setValue:this.setValue})):o.h(e,r.__assign({},this.props))},n.prototype.componentDidMount=function(){var e=this.props,t=e.apiKey,n=e.defaultValue,r=e.entityId,o=e.relatedId,i=void 0===o?"root":o,a=e.teaser,s=n||!a&&c.getDraftValueFromLS(t,r,i)||"";this.setState({authPopupVisible:s.trim().length>5})},Object.defineProperty(n.prototype,"origin",{get:function(){var e=this.props,t=e.serviceSlug,n=e.type;return["cmnt","exp-ltc-"+t,void 0===n?"comment":n].join("_")},enumerable:!0,configurable:!0}),n.prototype.getRetpath=function(e,t){var n=this.props,r=n.auth,o=n.type,i=void 0===o?"comment":o;return l.buildRetpath(r,[{name:"cmnt_login",value:i},{name:"commentId",value:e},t&&{name:"cmnt_action",value:"send-comment"}].filter(Boolean))},n}(m.Experimental);return i.connect(function(e){return{auth:s.getProp(e,"meta.features.auth"),isLoggedIn:Boolean(s.getProp(e,"meta.user")),serviceSlug:s.getProp(e,"meta.serviceSlug"),tld:e.tld}})(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(8),i=r.__importDefault(n(9)),a=r.__importDefault(n(158));t.default=o.connect(function(e){return{commentId:e.commentId?Number(e.commentId):void 0,levels:e.meta.levels,noComments:e.noComments,pessimizedMargin:e.pessimizedMargin,state:e.meta.state,tree:e.tree,user:e.meta.user}},i.default)(a.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(1),a=n(4),s=r.__importDefault(n(53)),c=r.__importDefault(n(54)),l=r.__importDefault(n(5)),u=r.__importDefault(n(49)),d=r.__importDefault(n(58)),p=r.__importDefault(n(218)),m=r.__importDefault(n(222)),f=n(16),h=function(e){function t(t){var n=e.call(this,t)||this;return n.handleListIntercept=function(){a.reachGoal("cmnt.view.widget"),n.props.sendMC("widget_shown")},n.renderSegments=function(){var e=n.buildSegments(),t=e.segments,r=e.expandPessimizedIdAfter,i=e.expandPessimizedIdBefore;return t.map(function(e,a){var s=e.comments,c=e.deletedComments,l=e.hiddenComments,u=e.isPessimized,d=e.expandPessimized,m=0===a,f=a===t.length-1,h=a>0&&a<t.length-1;return u&&(s.length>1||1===s.length&&f)?d?o.h(p.default,{key:"segment-"+a,type:"root",visibleByDefault:!0},m&&n.renderBeforeButton(),n.renderComments(s,!0),f&&n.renderAfterButton()):h?o.h(p.default,{key:"segment-"+a,type:"root",deletedCount:c,hiddenCount:l},m&&n.renderBeforeButton(),n.renderComments(s,!0),f&&n.renderAfterButton()):o.h(p.default,{key:"segment-"+a,type:"root"},m&&n.renderBeforeButton(),n.renderComments(s,!0),f&&n.renderAfterButton()):o.h("div",{className:"cmnt-visible",key:"segment-"+a},m&&n.renderBeforeButton(i),n.renderComments(s,d||!1),f&&n.renderAfterButton(r))})},n.renderAfterButton=function(e){var t=n.props,r=t.levels,a=t.tree,c=i.getProp(a,"0.children"),l=i.getProp(c,f.MoreDirection.AFTER,[]),u=i.getProp(r,"0.limit",0),d=l[0];return l.length>0&&u>0&&o.h(s.default,{className:"cmnt-list__more",commentChildren:c,direction:f.MoreDirection.AFTER,expandPessimizedId:e,key:"after-"+d,level:0,type:"root"})},n.renderBeforeButton=function(e){var t=n.props,r=t.levels,a=t.tree,c=i.getProp(a,"0.children"),l=i.getProp(c,f.MoreDirection.BEFORE,[]),u=i.getProp(r,"0.limit",0),d=l[l.length-1];return l.length>0&&u>0&&o.h(s.default,{className:"cmnt-list__more",commentChildren:c,direction:f.MoreDirection.BEFORE,expandPessimizedId:e,key:"before-"+d,level:0,type:"root"})},n.renderComments=function(e,t){return e.map(function(e,r){return o.h(c.default,{comment:e,expandPessimized:t,key:"comment-"+r,onItemIntersect:n.handleItemIntersect,level:0})})},n.buildSegments=function(){var e,t=n.props,r=t.tree,o=t.pessimizedMargin,a=i.getProp(r,"0.children.before",[]),s=i.getProp(r,"0.children.visible",[]),c=i.getProp(r,"0.children.after",[]),l=[];if(o<0)return{segments:[{comments:s.map(function(e){return r[e]}),deletedComments:0,hiddenComments:0,isPessimized:!1}]};for(var u=0,d=-1;u<s.length;u++){var p=s[u],m=r[p],f=n.isCommentHiddenForUser(m),h=n.isCommentDeletedForUser(m),_=f||h;_!==e&&(e=_,l[d+=1]={comments:[],deletedComments:0,hiddenComments:0,isPessimized:_}),l[d].comments.push(m),h&&l[d].deletedComments++,f&&l[d].hiddenComments++,m.expandPessimized&&(l[d].expandPessimized=!0)}0===s.length&&l.push({comments:[],deletedComments:0,hiddenComments:0,isPessimized:!1});var v,g=l[0],y=l[l.length-1],b=a[a.length-1],k=c[0];if(!y.isPessimized){var x=n.getNotPessimizedInRowCount(c.slice(0,o));for(u=0;u<x;u++){m=r[c[u]];y.comments.push(m)}}if(!g.isPessimized)for(x=n.getNotPessimizedInRowCount(a.slice(-o)),u=0;u<x;u++){m=r[a[u]];y.comments.unshift(m)}return y.isPessimized&&y.comments.length<=o&&k&&r[k]&&n.isCommentPessimizedForUser(r[k])&&l.pop(),g.isPessimized&&g.comments.length<=o&&b&&r[b]&&n.isCommentPessimizedForUser(r[b])&&l.shift(),n.isAllCommentsPessimized(c.slice(0,o+1))&&(v=r[k].path.join(".")),{segments:l,expandPessimizedIdAfter:v,expandPessimizedIdBefore:void 0}},n.isAllCommentsPessimized=function(e){for(var t=n.props.tree,r=0;r<e.length;r++)if(!t[e[r]]||!n.isCommentPessimizedForUser(t[e[r]]))return!1;return e.length>0},n.getNotPessimizedInRowCount=function(e){for(var t=n.props.tree,r=0,o=0;o<e.length;o++){if(!t[e[o]])return r;if(!n.isCommentPessimizedForUser(t[e[o]]))break;r++}return e.length!==r?r:0},n.isCommentPessimizedForUser=function(e){return n.isCommentDeletedForUser(e)||n.isCommentHiddenForUser(e)},n.isCommentDeletedForUser=function(e){return n.isCommentDeleted(e)&&!n.isCommentCurrent(e)&&!n.isCommentBelongsToAuthor(e)},n.isCommentDeleted=function(e){return Boolean(e.isDeleted)},n.isCommentHiddenForUser=function(e){return n.isCommentHidden(e)&&!n.isCommentCurrent(e)&&!n.isCommentBelongsToAuthor(e)},n.isCommentHidden=function(e){var t=e.moderation;return Boolean(t&&"hide"===t.action)},n.isCommentCurrent=function(e){var t=n.props,r=t.commentId,o=t.tree;if(!r||!o[r])return!1;for(;o[r]&&o[r].collapsedIn;)r=o[r].collapsedIn;for(var i=0,a=o[r].path;i<a.length;i++){var s=a[i];if(e.path[e.path.length-1]===s)return!0}return!1},n.isCommentBelongsToAuthor=function(e){return i.getProp(e,"user.isAuthor",!1)},n.onItemIntersect=function(e){return n.props.sendCommentShownEvent(e)},n.handleItemIntersect=i.commentShownThrottle(n.onItemIntersect,2e3),n}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.tree,r=t.user,a=t.state,s=t.noComments,p=i.getProp(r,"ban.isBanned",!1),f=i.getProp(n,"0.children"),h=(!f||!Object.keys(f).length||0===i.getProp(f,"visible",[]).length&&i.getProp(s,"text"))&&!p&&"readonly"!==a;return o.h(d.default,{className:"cmnt-list",onIntersect:this.handleListIntercept},p&&o.h(u.default,{position:"top"},l.default("message-banned")),"readonly"===a&&o.h(u.default,{position:"center"},l.default("message-readonly")),h&&o.h(m.default,null),i.getProp(f,"beforeVisible",[]).map(function(t){return o.h(c.default,{level:0,comment:n[t],onItemIntersect:e.handleItemIntersect})}),this.renderSegments(),i.getProp(f,"afterVisible",[]).map(function(t){return o.h(c.default,{level:0,comment:n[t],onItemIntersect:e.handleItemIntersect})}))},t}(o.Component);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(1),s=n(4),c=n(16),l=r.__importDefault(n(27)),u=r.__importDefault(n(5)),d=r.__importDefault(n(14));n(160);var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleButtonClick=function(){var e=t.props,n=e.commentChildren,r=e.direction,o=e.expandPessimizedId,i=e.level,c=e.loadComments,l=e.meta.levels,u=e.node,d=e.pessimizedMargin,p=e.teaser,m=e.type,f=e.tree;if(p)return a.createTeaserClickEvent(u);var h=a.getNextComments({children:n,direction:r,level:i,levels:l,lookAheadMargin:d+1,tree:f});c(h.ids,h.directions,h.lookAheadIds,o),s.reachGoal("cmnt.load."+("root"===m?"comments":"replies")),o&&s.reachGoal("cmnt.view.pessimized")},t.renderLoadMoreAndExpandPessimized=function(){var e=u.default("show-hidden-comments-unknown-count");return t.renderButton(e,{iconLeft:"expand-arrow",theme:"grey"})},t.renderLoadMore=function(){var e=t.props,n=e.commentChildren,r=e.direction,o=e.level,i=e.meta.levels,s=e.teaser,c="next"+("root"===e.type?"-comments":"-replies")+(s?"-teaser":""),l=(n[r]||[]).length,d=a.getLevelLimit(l,i,o),p=u.default(c,"front.common",{count:s?l:d,length:l});return t.renderButton(p,{iconLeft:"more-arrow"})},t.renderButton=function(e,n){var a=t.props,s=a.className,c=a.hasError,l=a.isProgress,u=a.type,p="root"===u?"middle":"small",m=l||c?"default":"link",f=o.default("cmnt-button-more",s,"cmnt-button-more_type_"+u,{"cmnt-button-more_progress":l}),h=o.default("cmnt-button-more__icon","cmnt-button-more__icon_size_"+p);return i.h("div",null,i.h(d.default,{className:f,hasProgress:l,iconClassName:h,linkProps:r.__assign({onClick:t.handleButtonClick},n),size:p,type:m},c?t.renderError():e))},t.renderError=function(){var e=t.props,n=e.commentChildren,r=e.direction,o=n[r]||[],a=r===c.MoreDirection.AFTER?o[0]:o[o.length-1];return i.h(l.default,{errorId:a,inline:!0,onRetry:t.handleButtonClick,withSpin:!1})},t}return r.__extends(t,e),t.prototype.render=function(){return this.props.expandPessimizedId?this.renderLoadMoreAndExpandPessimized():this.renderLoadMore()},t}(i.Component);t.default=p},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(7),a=n(19);t.default=function(e){return function(t){function n(e){var n=t.call(this,e)||this;return n.handleShowPassportForm=function(e){var t=n.props.comment.path,r=t[t.length-1];return e.handleReplyForm(r)},n.handleShowPassportForm=n.bindProp(n.handleShowPassportForm),n}return r.__extends(n,t),n.prototype.render=function(){return this.props.flags[i.ExperimentFlags.LOGIN_TO_COMMENT]?o.h(e,r.__assign({},this.props,{handleShowPassportForm:this.handleShowPassportForm})):o.h(e,r.__assign({},this.props))},n}(a.Experimental)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(1),s=n(20),c=n(23),l=r.__importDefault(n(53)),u=r.__importDefault(n(45)),d=r.__importDefault(n(164)),p=r.__importDefault(n(48)),m=r.__importDefault(n(54));n(216);var f=n(16),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={replyMessageId:null,editMessageId:null,passportForm:null},t.handleReplyForm=function(e){t.setState({replyMessageId:e})},t.handleCloseReplyForm=function(){t.setState({replyMessageId:null})},t.handleEditForm=function(e){var n=t.state.editMessageId===e?null:e;t.setState({editMessageId:n})},t.handleShowPassportForm=function(e){t.setState({passportForm:e})},t}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.comment,s=t.level,c=t.tree,u=t.meta.levels,d=a.getProp(n,"children"),p=a.getProp(u,[s+1,"limit"],0),h=a.getProp(u,[s+1,"limit"])?s+1:s,_=o.default("cmnt-group","cmnt-group_level_"+s),v=a.getProp(d,f.MoreDirection.BEFORE,[]),g=a.getProp(d,"visible",[]),y=a.getProp(d,f.MoreDirection.AFTER,[]);return i.h("div",{className:_},this.renderItem(),a.getProp(d,"beforeVisible",[]).map(function(t){return i.h(m.default,r.__assign({},e.props,{level:h,comment:c[t]}))}),p>0&&v.length>0&&i.h(l.default,{key:"before-"+d.before[0],direction:f.MoreDirection.BEFORE,type:"reply",className:"cmnt-group__more-btn",level:s+1,commentChildren:d}),g.map(function(t){return i.h(m.default,r.__assign({},e.props,{level:h,comment:c[t]}))}),p>0&&y.length>0&&i.h(l.default,{key:"after-"+d.after[0],direction:f.MoreDirection.AFTER,type:"reply",className:"cmnt-group__more-btn",level:s+1,commentChildren:d}),a.getProp(d,"afterVisible",[]).map(function(t){return i.h(m.default,r.__assign({},e.props,{level:h,comment:c[t]}))}))},t.prototype.renderItem=function(){var e=this.props,t=e.apiKey,n=e.comment,r=e.entityId,o=e.expandPessimized,c=e.level,l=e.onItemIntersect,m=e.teaser,f=this.state.passportForm;if(n){var h=n.path[n.path.length-1],_=h===this.state.replyMessageId||!m&&s.hasDraftInLS(t,r,h),v=c>0||_?"small":"middle";return[h===this.state.editMessageId?i.h(u.default,{key:h+"-edit",level:c,type:"edit",size:v,edit:n,defaultValue:a.getProp(n,"content.0.text"),relatedId:h,onClose:this.handleEditForm}):i.h(d.default,{expandPessimized:o,key:h+"-item",open:_,comment:n,onItemIntersect:l,onReply:this.handleReplyForm,onEdit:this.handleEditForm,onNotLoggedUserAction:this.getPropOrOwn("handleShowPassportForm")}),_&&i.h(u.default,{key:h+"-reply",className:"cmnt-group__form",level:c,type:"reply",size:v,reply:n,relatedId:h,onClose:this.handleCloseReplyForm}),f&&i.h("div",{className:"cmnt-group__form"},i.h(p.default,{className:"cmnt-group__passport-form",size:"small",type:f,commentId:h}))]}},t}(c.Base);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(9)),a=n(6),s=r.__importDefault(n(165)),c=r.__importDefault(n(168)),l=r.__importDefault(n(171)),u=r.__importDefault(n(174)),d=r.__importDefault(n(175));t.default=o.connect(function(){var e=o.select(function(e,t){var n=t.comment.path,r=n[n.length-1];return e.errors[r]}),t=o.select(function(e){for(var t=r.__assign({},e.errors),n=0,o=Object.keys(t);n<o.length;n++){var i=o[n];t[i].type!==a.ErrorTypes.RCA&&delete t[i]}return e.errors});return function(n,r){var i=r.comment.path,a=i[i.length-1];return{commentId:n.commentId,commentModificationSettings:n.meta.commentModificationSettings,error:e(n,r),features:n.meta.features,isLoggedIn:Boolean(n.meta.user)&&o.isUGCEnabled(n),isRichContentAllowed:n.meta.isRichContentAllowed,levels:n.meta.levels,node:n.node,parentNode:n.node,progress:n.progresses[a],rcaErrors:t(n),scrollOffset:n.scrollOffset,serviceSlug:o.getProp(n,"meta.serviceSlug"),state:n.meta.state,subscriptionState:n.meta.subscriptionState,teaser:n.teaser,user:n.meta.user,viewMode:n.viewMode}}},i.default,[s.default,c.default,l.default,u.default])(d.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(4),s=n(7),c=r.__importDefault(n(29)),l=n(19);n(166),t.default=function(e){return function(t){function n(e){var n=t.call(this,e)||this;return n.renderReplyButton=function(e){return i.h(c.default,{containerClassName:o.default("cmnt-item__reply-button-container"),commentId:e.id,secondaryOffset:-12,targetClassName:o.default("cmnt-item__reply-button-target"),type:"reply"},e.renderReplyButton())},n.renderLike=function(e){return i.h(c.default,{containerClassName:o.default("cmnt-item__like-container"),commentId:e.id,secondaryOffset:-20,tailHorizontalOffset:-2,targetClassName:o.default("cmnt-item__like-target"),type:"reaction_like"},e.renderLike())},n.renderDislike=function(e){return i.h(c.default,{containerClassName:o.default("cmnt-item__dislike-container"),commentId:e.id,secondaryOffset:-20,tailHorizontalOffset:-2,targetClassName:o.default("cmnt-item__dislike-target"),type:"reaction_dislike"},e.renderDislike())},n.renderMenuButton=function(e){var t=n.state,r=t.menuButtonPopupType,a=t.menuButtonPopupVisible;return i.h(c.default,{captureClicks:!1,containerClassName:o.default("cmnt-item__menu-button-container"),commentId:e.id,onClose:n.onMenuButtonPopupClose,secondaryOffset:-20,tailHorizontalOffset:-1,targetClassName:o.default("cmnt-item__menu-button-target"),type:r,visible:a},e.renderMenuButton())},n.handleMenuClick=function(e){e.handleMenuClick(),n.setState({menuButtonPopupType:null,menuButtonPopupVisible:!1})},n.handleComplainClick=function(e){var t=n.props.isLoggedIn;if(a.reachGoal("cmnt.complaint.click"),t)return e.setState({complaintsVisible:!0});n.setState({menuButtonPopupType:"complain",menuButtonPopupVisible:!0})},n.onMenuButtonPopupClose=function(){n.setState({menuButtonPopupType:null,menuButtonPopupVisible:!1})},n.handleMenuClick=n.bindProp(n.handleMenuClick),n.handleComplainClick=n.bindProp(n.handleComplainClick),n.renderReplyButton=n.bindProp(n.renderReplyButton),n.renderLike=n.bindProp(n.renderLike),n.renderDislike=n.bindProp(n.renderDislike),n.renderMenuButton=n.bindProp(n.renderMenuButton),n}return r.__extends(n,t),n.prototype.render=function(){return this.props.flags[s.ExperimentFlags.AUTH_MEDIA_POPUP]?i.h(e,r.__assign({},this.props,{handleMenuClick:this.handleMenuClick,handleComplainClick:this.handleComplainClick,renderReplyButton:this.renderReplyButton,renderLike:this.renderLike,renderDislike:this.renderDislike,renderMenuButton:this.renderMenuButton})):i.h(e,r.__assign({},this.props))},n}(l.Experimental)}},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(3)),o=n(26),i=n(7);n(169),t.default=o.withExperimentalClassName(i.ExperimentFlags.CONTOUR_LIKES,r.default("cmnt-item_contour"))},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(4),s=n(7),c=r.__importDefault(n(29)),l=n(19);n(172),t.default=function(e){return function(t){function n(e){var n=t.call(this,e)||this;return n.renderLike=function(e){var t=n.props.serviceSlug;return i.h(c.default,{containerClassName:o.default("cmnt-item__like-container"),commentId:e.id,secondaryOffset:-20,serviceOrigin:"exp-ltc-"+t,tailHorizontalOffset:-2,targetClassName:o.default("cmnt-item__like-target"),type:"reaction_like"},e.renderLike())},n.renderDislike=function(e){var t=n.props.serviceSlug;return i.h(c.default,{containerClassName:o.default("cmnt-item__dislike-container"),commentId:e.id,secondaryOffset:-20,serviceOrigin:"exp-ltc-"+t,tailHorizontalOffset:-2,targetClassName:o.default("cmnt-item__dislike-target"),type:"reaction_dislike"},e.renderDislike())},n.renderMenuButton=function(e){var t=n.props.serviceSlug,r=n.state,a=r.menuButtonPopupType,s=r.menuButtonPopupVisible;return i.h(c.default,{captureClicks:!1,containerClassName:o.default("cmnt-item__menu-button-container"),commentId:e.id,onClose:n.onMenuButtonPopupClose,secondaryOffset:-20,serviceOrigin:"exp-ltc-"+t,tailHorizontalOffset:-1,targetClassName:o.default("cmnt-item__menu-button-target"),type:a,visible:s},e.renderMenuButton())},n.handleComplainClick=function(e){var t=n.props.isLoggedIn;if(a.reachGoal("cmnt.complaint.click"),t)return e.setState({complaintsVisible:!0});n.setState({menuButtonPopupType:"complain",menuButtonPopupVisible:!0})},n.handleMenuClick=function(e){e.handleMenuClick(),n.setState({menuButtonPopupType:null,menuButtonPopupVisible:!1})},n.onMenuButtonPopupClose=function(){n.setState({menuButtonPopupType:null,menuButtonPopupVisible:!1})},n.handleComplainClick=n.bindProp(n.handleComplainClick),n.handleMenuClick=n.bindProp(n.handleMenuClick),n.renderLike=n.bindProp(n.renderLike),n.renderDislike=n.bindProp(n.renderDislike),n.renderMenuButton=n.bindProp(n.renderMenuButton),n}return r.__extends(n,t),n.prototype.render=function(){return this.props.flags[s.ExperimentFlags.LOGIN_TO_COMMENT]?i.h(e,r.__assign({},this.props,{handleComplainClick:this.handleComplainClick,handleMenuClick:this.handleMenuClick,renderLike:this.renderLike,renderDislike:this.renderDislike,renderMenuButton:this.renderMenuButton})):i.h(e,r.__assign({},this.props))},n}(l.Experimental)}},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(7),a=n(19);t.default=function(e){return function(t){function n(e){var n=t.call(this,e)||this;return n.handleCommentReaction=function(e,t){var r;e.handleCommentReaction(t);var o=n.props,a=o.isLoggedIn,s=o.setStats,c=o.teaser,l=o.onReply;a&&!c&&(s(((r={})[i.ExperimentFlags.REPLY_AFTER_REACTION]=e.id,r)),l(e.id))},n.handleCommentReaction=n.bindProp(n.handleCommentReaction),n}return r.__extends(n,t),n.prototype.render=function(){return this.props.flags[i.ExperimentFlags.REPLY_AFTER_REACTION]?o.h(e,r.__assign({},this.props,{handleCommentReaction:this.handleCommentReaction})):o.h(e,r.__assign({},this.props))},n}(a.Experimental)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=r.__importDefault(n(176)),s=n(1),c=n(4),l=n(6),u=n(23),d=r.__importDefault(n(13)),p=r.__importDefault(n(177)),m=r.__importDefault(n(27)),f=r.__importDefault(n(55)),h=r.__importDefault(n(184)),_=r.__importDefault(n(188)),v=r.__importDefault(n(5)),g=r.__importStar(n(56)),y=r.__importDefault(n(18)),b=r.__importDefault(n(192)),k=r.__importDefault(n(58)),x=r.__importDefault(n(14)),C=r.__importDefault(n(197)),P=r.__importDefault(n(206)),E=r.__importStar(n(50)),M=r.__importDefault(n(210));n(214);var O=function(e){function t(t){var n=e.call(this,t)||this;n.humanDate=new _.default({date:new Date(n.id/1e3)}),n.commentDate=n.humanDate.formatRelative(),n.handlePopupClose=function(){n.setState({menuVisible:!1})},n.handleMenuClick=function(){n.props.comment.isNew&&n.props.deleteNewFlag(n.id),n.toggleMenuPopup()},n.handleMenuButtonClick=function(e){switch(n.handlePopupClose(),e){case"complain":return n.callPropOrOwn("handleComplainClick");case"edit":return n.handleEditClick();case"remove":return n.handleRemoveClick()}},n.handleEditClick=function(){n.props.mergeCutTextContent(n.id),n.props.onEdit(n.id)},n.handleComplainClick=function(){var e=n.props.isLoggedIn;c.reachGoal("cmnt.complaint.click"),e?n.setState({complaintsVisible:!0}):n.props.onNotLoggedUserAction("complain")},n.handleComplainClose=function(){n.setState({complaintsVisible:!1})},n.handleCommentReaction=function(e){var t=n.props,r=t.comment.reactions,o=t.changeReaction,i=t.isLoggedIn,a=t.node,c=t.onNotLoggedUserAction,l=t.teaser;if(!i)return l?s.createTeaserClickEvent(a):c("reaction_"+e);var u=s.getProp(r,e+".hasMyReaction",!1),d=s.getProp(r,e+".hasMyReaction",!1)?-1:1;o(n.id,e,d),n.setItemReaction(e,u)},n.handleReplyClick=function(){var e=n.props,t=e.isLoggedIn,r=e.node,o=e.onNotLoggedUserAction,i=e.onReply;if(e.teaser)return s.createTeaserClickEvent(r);c.reachGoal("cmnt.write.reply"),t?i(n.id):o("reply")},n.handleRemoveClick=function(){n.props.removeComment(n.id)},n.handleRestoreClick=function(){var e=n.props,t=e.comment;(0,e.editComment)({body:{id:n.id,text:t.removedText,replyTo:s.getProp(t,"reply.id"),type:"text"},progressType:l.ProgressTypes.RESTORE_COMMENT,errorType:l.ErrorTypes.RESTORE_COMMENT})},n.handleExpandClick=function(){n.setState({hidden:"cmnt-bubble"})},n.handleLinkClick=function(){c.reachGoal("cmnt.link.click")},n.handleMoreContentClick=function(){n.props.mergeCutTextContent(n.id),c.reachGoal("cmnt.view.cut")},n.handleIntersectItem=function(){n.props.onItemIntersect(n.id)},n.handleMouseEnter=function(){n.props.editCommentInTree(n.id,{isViewed:!0})},n.setItemReaction=function(e,t){var r=n.props,o=r.error,i=r.removeReaction,a=r.addReaction;!e&&o&&(t=o.type===l.ErrorTypes.REMOVE_REACTION,e=o.reactionType||""),(t?i:a)(n.id,e)},n.isReadOnly=function(){var e=n.props,t=e.user,r=e.state;return s.getProp(t,"ban.isBanned",!1)||"readonly"===r},n.toggleMenuPopup=function(){n.setState({menuVisible:!n.state.menuVisible})},n.refMenuButton=function(e){e&&(n.menuButton=e)},n.findLinks=function(e){var t=n.props.isRichContentAllowed;return e&&void 0!==t&&t?new a.default({fuzzyLink:!0,fuzzyIP:!1,fuzzyEmail:!1}).match(e):null},n.wrapProgressElement=function(e){return i.h(x.default,{size:n.avatarSize},e)},n.renderText=function(e,t){if(!t)return e;for(var r=[],o=e.length,a=0,s=0,c=t;s<c.length;s++){var l=c[s];if(o<=l.index)break;a<l.index&&r.push(e.slice(a,l.index));var u=Math.min(l.lastIndex,o),d=e.slice(l.index,u);if(d.length>60&&(d=d.slice(0,60)+"…"),r.push(i.h(y.default,{url:l.url,onClick:n.handleLinkClick},d)),(a=l.lastIndex)>=o)break}return a<o&&r.push(e.slice(a,o)),r},n.renderHiddenItem=function(e){var t=n.props.comment;return i.h("section",{id:"comment-"+n.id,className:e},i.h(h.default,{comment:t,onExpandClick:n.handleExpandClick}))},n.renderContent=function(e){for(var t=n.props.comment.content,r=[],o=0;o<t.length;o+=1){var a=t[o],s=a.type,c=a.text;if("text"===s&&r.push(n.renderText(c,e)),"cut"===s){r.push(i.h(y.default,{key:"cut",inline:!0,theme:"normal",onClick:n.handleMoreContentClick}," "+v.default("read-more")));break}}return r},n.renderRemovedItem=function(e){var t=n.props,r=t.comment,o=t.error,a=t.progress,s=Boolean(o)&&o.type===l.ErrorTypes.RESTORE_COMMENT,c=a===l.ProgressTypes.RESTORE_COMMENT;return i.h("section",{id:"comment-"+n.id,className:e},i.h(P.default,{comment:r,onRestore:n.handleRestoreClick}),c&&!s&&i.h(f.default,{className:"cmnt-item__progress",progressId:n.id,wrapProgressElement:n.wrapProgressElement}),s&&i.h(x.default,{size:n.avatarSize},i.h(m.default,{className:"cmnt-item__error",errorId:n.id,onRetry:n.handleRestoreClick})))},n.renderFooter=function(){var e=n.props,t=e.comment,r=e.commentModificationSettings,o=e.teaser,a=n.isReadOnly(),c=s.getProp(t,"user.isAuthor",!1),l=g.getModificationPossibility("editDelay",t,n.id,r),u=g.getModificationPossibility("deleteDelay",t,n.id,r),d=(!c||l||u)&&!o;return i.h("div",{className:"cmnt-item__footer"},!a&&i.h("div",{className:"cmnt-item__controls"},n.callPropOrOwn("renderReplyButton"),d&&n.callPropOrOwn("renderMenuButton")),i.h("div",{className:"cmnt-item__likes"},n.callPropOrOwn("renderLike"),n.callPropOrOwn("renderDislike")))},n.renderDislike=function(){var e=n.props,t=e.comment,r=e.features.reactions.dislike,o=n.isReadOnly();return r&&i.h(C.default,{type:"dislike",pair:"like",disabled:n.isItemProgress||o,reactions:t.reactions,onClick:n.getPropOrOwn("handleCommentReaction")})},n.renderLike=function(){var e=n.props,t=e.comment,r=e.features.reactions.like,o=n.isReadOnly();return r&&i.h(C.default,{className:"cmnt-item__btn-like",type:"like",pair:"dislike",disabled:n.isItemProgress||o,reactions:t.reactions,onClick:n.getPropOrOwn("handleCommentReaction")})},n.renderReplyButton=function(){var e=n.props.open;return i.h(d.default,{className:"cmnt-item__btn-reply",disabled:e||n.isItemProgress,size:"s",onClick:n.handleReplyClick,theme:"clear",text:v.default("reply-button")})},n.renderMenuButton=function(){var e=o.default("cmnt-item__menu",{"cmnt-item__menu_active":n.state.menuVisible});return i.h("div",{ref:n.refMenuButton,className:e},i.h(d.default,{size:"s",theme:"clear",iconLeft:"menu",title:v.default("other-action"),disabled:n.isItemProgress,active:n.state.menuVisible,onClick:n.getPropOrOwn("handleMenuClick")}))},n.renderItemFetchError=function(){var e=n.props.error;if(Boolean(e)&&[l.ErrorTypes.REMOVE_COMMENT,l.ErrorTypes.ADD_REACTION,l.ErrorTypes.REMOVE_REACTION].indexOf(e.type)>-1){var t=n.setItemReaction;return e.type===l.ErrorTypes.REMOVE_COMMENT&&(t=n.handleRemoveClick),i.h(x.default,{size:n.avatarSize},i.h(m.default,{className:"cmnt-item__error",errorId:n.id,onRetry:t}))}},n.renderRemoveFetchProgress=function(){var e=n.props,t=e.progress,r=e.error,o=t===l.ProgressTypes.REMOVE_COMMENT,a=Boolean(r)&&r.type===l.ErrorTypes.REMOVE_COMMENT;if(o&&!a)return i.h(f.default,{className:"cmnt-item__progress",progressId:n.id,wrapProgressElement:n.wrapProgressElement})};var r=t.commentId,u=t.expandPessimized,p="none";if("hide"===s.getProp(t,"comment.moderation.action")){var b=Number(r)===n.id;p=u||b?"cmnt-bubble":"hide"}return n.state={complaintsVisible:!1,hidden:p,menuVisible:!1},n}return r.__extends(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.comment,r=t.deleteNewFlag;if(n.isNew){setTimeout(function(){e.props.comment.isNew&&r(e.id)},450)}},t.prototype.render=function(){var e=this.props,t=e.comment,n=t.content,r=t.image,a=t.isDeleted,c=t.isNew,l=t.lastEdit,u=t.path,d=t.reply,m=t.sticker,f=t.type,_=void 0===f?"other":f,y=t.user,C=e.className,P=void 0===C?"":C,O=e.comment,S=e.rcaErrors,I=e.levels,w=e.teaser,T=this.state,D=T.complaintsVisible,N=T.hidden,A=T.menuVisible,R=d?"reply":"root",F=n&&this.findLinks(n[0].text),L=F&&F[0]&&!S[F[0].url]?F[0]:null,j=s.getProp(y,"isAuthor",!1),B=Boolean(L)&&"none"===N&&!w,z=o.default("cmnt-item",P,"cmnt-item_type_"+R,"cmnt-item_comment-type_"+_,{"cmnt-item_mark":this.isMark},{"cmnt-item_new":c},{"cmnt-item_unviewed":this.isUnviewed&&!this.isMark},{"cmnt-item_is_author":j},{"cmnt-item_has_bottom-bubble":B||"cmnt-bubble"===N},{"cmnt-item_has_link":B});if(a||-1===["sticker","image","text"].indexOf(_))return this.renderRemovedItem(z);if("hide"===N)return this.renderHiddenItem(z);var H=d&&E.hasReply(d.id,u,I)&&s.getProp(d,"user.displayName"),V=s.getConfigField("messengerHost");return i.h("section",{id:"comment-"+this.id,className:z},i.h(x.default,{iconClassName:"cmnt-item__avatar",contentClassName:"cmnt-item__content",position:"top",size:this.avatarSize,hasIcon:!0,iconProps:{avatar:s.getProp(y,"avatar"),editProps:{isAuthor:j,commentId:this.id}}},i.h(k.default,{className:"cmnt-item__bubble",onIntersect:this.handleIntersectItem,containerProps:{onMouseEnter:this.isUnviewed&&this.handleMouseEnter}},i.h("header",{className:"cmnt-item__header"},i.h("div",{className:"cmnt-item__author"},i.h(M.default,{className:"cmnt-item__login",user:y})),i.h("div",{className:"cmnt-item__date"},i.h("div",{className:"cmnt-item__create-date",title:this.humanDate.getFullFormat()},this.commentDate))),n&&i.h("div",{className:"cmnt-item__text"},Boolean(H)&&i.h(E.default,{to:String(H)}),this.renderContent(F),l&&i.h("span",{className:"cmnt-item__edited"},"  "+v.default("edited"))),m&&[Boolean(H)&&i.h(E.default,{className:"cmnt-item__sticker-reply",to:String(H)}),i.h("div",{className:"cmnt-item__sticker-wrapper"},i.h("img",{className:"cmnt-item__sticker",alt:"",src:V+"/"+m.id+"?size=middle-450"}))],r&&i.h("img",{className:"cmnt-item__image",alt:"",src:V+"/"+r.id+"?size=middle-400"}),this.renderFooter()),"cmnt-bubble"===N&&i.h(h.default,{mode:"bubble",comment:O}),B&&i.h(b.default,{url:L.url})),D&&i.h(x.default,{size:this.avatarSize},i.h(p.default,{className:"cmnt-item__complaints-choice",commentId:this.id,disabled:this.isItemProgress,onClose:this.handleComplainClose})),this.renderRemoveFetchProgress(),this.renderItemFetchError(),A&&i.h(g.default,{comment:O,commentId:this.id,anchor:this.menuButton,onButtonClick:this.handleMenuButtonClick,onClose:this.handlePopupClose}))},Object.defineProperty(t.prototype,"id",{get:function(){var e=this.props.comment.path;return e[e.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"avatarSize",{get:function(){return this.props.comment.path.length>2?"small":"middle"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnviewed",{get:function(){var e=this.props,t=e.subscriptionState,n=e.comment.isViewed;return!(void 0!==n&&n)&&(s.getProp(t,"lastViewTs",!1)&&t.lastViewTs<this.humanDate.timestamp)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isMark",{get:function(){return this.props.commentId===String(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isItemProgress",{get:function(){return[l.ProgressTypes.EDIT_COMMENT,l.ProgressTypes.ADD_COMMENT,l.ProgressTypes.REMOVE_COMMENT,l.ProgressTypes.ADD_REACTION,l.ProgressTypes.REMOVE_REACTION,l.ProgressTypes.COMPLAIN_COMMENT].indexOf(this.props.progress)>-1},enumerable:!0,configurable:!0}),t}(u.Base);t.default=O},function(e,t,n){e.exports=n(12)(2)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(9)),a=n(6),s=r.__importDefault(n(178));t.default=o.connect(function(){var e=o.select(function(e,t){return e.errors[t.commentId]});return function(t,n){var r=e(t,n),o=t.progresses[n.commentId];return{error:r,hasError:Boolean(r&&r.type===a.ErrorTypes.COMPLAIN_COMMENT),isProgress:o===a.ProgressTypes.COMPLAIN_COMMENT}}},i.default)(s.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(1),s=n(4),c=r.__importDefault(n(13)),l=r.__importDefault(n(27)),u=r.__importDefault(n(55)),d=r.__importDefault(n(5)),p=r.__importDefault(n(15));n(182);var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.reasons=a.getConfigField("complaintsReasons"),t.state={complainComplete:!1},t.handleComplainButtonClick=function(e){return function(){var n=t.props,r=n.commentId,o=n.error,i=n.complainComment;e&&s.reachGoal("cmnt.complaint.type."+e.toLowerCase()),i(r,e=e||o.complainReason)}},t}return r.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){!this.props.isProgress||e.isProgress||e.hasError||this.setState({complainComplete:!0})},t.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.disabled,a=void 0!==r&&r,s=t.commentId,m=t.hasError,f=t.isProgress,h=t.onClose,_=this.state.complainComplete,v=o.default("cmnt-complaints-choice",n);return m?i.h("div",{className:v},i.h(l.default,{className:"cmnt-complaints-choice__error",inline:!0,errorId:s,onRetry:this.handleComplainButtonClick()})):f?i.h("div",{className:v},i.h(u.default,{className:"cmnt-complaints-choice__progress",renderMessage:!0,progressId:s})):_?i.h("div",{className:v},i.h(p.default,{type:"check",className:"cmnt-complaints-choice__complete-icon"})," ",i.h("div",{className:"cmnt-complaints-choice__complete"},d.default("complain-complete"))):i.h("div",{className:v},i.h("div",{className:"cmnt-complaints-choice__question"},d.default("complain-question")),i.h("div",{className:"cmnt-complaints-choice__reasons-wrapper"},i.h("div",{className:"cmnt-complaints-choice__reasons-list"},this.reasons.map(function(t){return i.h(c.default,{className:"cmnt-complaints-choice__reason",text:d.default("complain-reason-"+t),disabled:a||f,onClick:e.handleComplainButtonClick(t)})}))),i.h("div",{className:"cmnt-complaints-choice__cancel"},i.h(c.default,{size:"s",theme:"clear",disabled:a||f,text:d.default("complain-cancel"),onClick:h})))},t}(i.Component);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(4),s=r.__importDefault(n(5)),c=r.__importDefault(n(24));n(180);var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={renderMessage:t.props.renderMessage||!1},t.renderProgressElement=function(){var e=t.props,n=e.className,r=void 0===n?"":n,a=e.progress,l=void 0===a?"":a,u=o.default("cmnt-fetch-progress",r);return i.h("div",{className:u},i.h("div",{className:"cmnt-fetch-progress__spin"},i.h(c.default,{size:"s"})),i.h("div",{className:"cmnt-fetch-progress__message"},s.default(l)))},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.timerId=setTimeout(function(){e.setState({renderMessage:!0}),a.reachGoal("cmnt.view.long_progress")},1e3)},t.prototype.componentWillUnmount=function(){clearTimeout(this.timerId)},t.prototype.render=function(){var e=this.props.wrapProgressElement;return this.state.renderMessage?e?e(this.renderProgressElement()):this.renderProgressElement():null},t}(i.Component);t.default=l},function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(185);t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(1),a=n(4),s=r.__importDefault(n(5)),c=r.__importDefault(n(18)),l=r.__importDefault(n(14));n(186);var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleExpandClick=function(){var e=t.props.onExpandClick;e&&e(),a.reachGoal("cmnt.view.hidden")},t.handleRulesClick=function(){a.reachGoal("cmnt.rules.click")},t.renderNormal=function(){var e=t.props.comment.path.length>2?"small":"middle";return o.h(l.default,{className:"cmnt-hidden-item cmnt-hidden-item_normal",position:"top",size:e},o.h(c.default,{className:"cmnt-hidden-item__expand-link",theme:"grey",iconLeft:"expand-arrow",iconClassName:"cmnt-hidden-item__expand-icon",onClick:t.handleExpandClick},o.h("span",{className:"cmnt-hidden-item__verdict cmnt-hidden-item__verdict_normal"},t.verdict.message)))},t.renderBubble=function(){return o.h(c.default,{theme:"grey",title:s.default("commenting-rules"),className:"cmnt-hidden-item cmnt-hidden-item_bubble",url:t.verdict.link,iconLeft:t.verdict.link&&"help",iconClassName:"cmnt-hidden-item__rules",disabled:!t.verdict.link,onClick:t.handleRulesClick},o.h("div",{className:"cmnt-hidden-item__verdict cmnt-hidden-item__verdict_bubble"},t.verdict.message))},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props.mode;return"bubble"===(void 0===e?"normal":e)?this.renderBubble():this.renderNormal()},Object.defineProperty(t.prototype,"verdict",{get:function(){var e=this.props,t=e.comment,n=e.mode,r=void 0===n?"normal":n,o=t.path,a=t.user,c=i.getProp(a,"isAuthor",!1),l=o.length>2?"reply":"comment",u=c?"your-":"",d=i.getVerdict(t),p=d.link,m=d.message;return{message:s.default(""+u+l+"-hidden-by-verdict","front.common",{verdict:"bubble"===r&&m?" "+m:""}),link:p}},enumerable:!0,configurable:!0}),t}(o.Component);t.default=u},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(189);t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=r.__importDefault(n(5)),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.i18n=function(e,t){return void 0===t&&(t={}),i.default(e,"front.date",t)},t.formatTime=function(e){return[(e=e||t.props.date).getHours(),("0"+e.getMinutes()).slice(-2)].join(":")},t.formatDate=function(e){var n=(e=e||t.props.date).getMonth(),r=e.getFullYear(),o=(new Date).getFullYear(),i=t.i18n("month"+n).toLowerCase(),a=[e.getDate(),i];return(t.props.showYear||o!==r)&&a.push(r),a.join(" ")},t.getFullFormat=function(e,n){var r=n?"edited-at":"created-at";return t.i18n(r,{date:t.formatDate(e),time:t.formatTime(e)})},t.formatRelative=function(e){e=e||t.props.date;var n=new Date,r=n.getTime()-e.getTime(),o=r<0,i=e.getDay(),a=n.getDay(),s=t.props.showTime;if(r=Math.abs(r),o&&r<1728e5){if((a+1)%7===i)return s?t.i18n("tomorrow-at",{time:t.formatTime(e)}):t.i18n("tomorrow");if(a===i)return s?t.i18n("today-at",{time:t.formatTime(e)}):t.i18n("today")}else if(!o){if(r<864e5)return r<6e4?t.i18n("now"):r<36e5?t.i18n("M",{count:Math.floor(r/6e4)}):t.i18n("H",{count:Math.floor(r/36e5)});if(r<1728e5&&(i+1)%7===a)return s?t.i18n("yesterday-at",{time:t.formatTime(e)}):t.i18n("yesterday");var c=Math.floor(r/864e5);if(c<30)return t.i18n("d",{count:c})}return t.formatDate(e)},t}return r.__extends(t,e),t.prototype.render=function(){return null},Object.defineProperty(t.prototype,"timestamp",{get:function(){return this.props.date.getTime()},enumerable:!0,configurable:!0}),t}(o.Component);t.default=a},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(8),i=r.__importDefault(n(9)),a=n(6),s=r.__importDefault(n(193));t.default=o.connect(function(e,t){return{rca:e.rca,isProgress:e.progresses[t.url]===a.ProgressTypes.RCA,isWide:"wide"===e.viewMode}},i.default)(s.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(4),s=r.__importDefault(n(18)),c=r.__importDefault(n(24));n(194);var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleLinkClick=function(){a.reachGoal("cmnt.rca.click")},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.url,n=e.rca,r=e.getRCA;n[t]||r(t)},t.prototype.componentWillReceiveProps=function(e){var t=this.props,n=t.url,r=t.rca,o=t.getRCA;n===e.url||r[e.url]||o(e.url)},t.prototype.render=function(){var e=this.props,t=e.rca,n=e.url,r=e.isProgress,a=e.isWide,l=t[n],u=o.default("cmnt-link-preview",{"cmnt-link-preview_progress":r});return i.h(s.default,{className:u,url:n,theme:"main",onClick:this.handleLinkClick},r&&i.h(c.default,{position:"center",size:"s"}),l&&[i.h("div",{className:"cmnt-link-preview__content-wrapper"},i.h("div",{className:"cmnt-link-preview__content"},l.title&&i.h("div",{className:"cmnt-link-preview__title"},l.title),a&&l.snippet&&i.h("div",{className:"cmnt-link-preview__snippet"},l.snippet),i.h("div",{className:"cmnt-link-preview__host"},l.host))),l.image&&i.h("div",{className:"cmnt-link-preview__image",style:{backgroundImage:"url("+l.image.replace(/largePreview$/,"thumbnail")+")"}})])},t}(i.Component);t.default=l},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.io=new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&(e.props.onIntersect(),e.io&&e.io.disconnect())})},this.props.observerInit),this.container&&this.io.observe(this.container)},t.prototype.componentWillUnmount=function(){this.io&&this.io.disconnect()},t.prototype.render=function(){var e=this;return o.h("div",r.__assign({className:this.props.className,ref:function(t){e.container=t}},this.props.containerProps),this.props.children)},t}(o.Component);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(198);t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(1),a=r.__importDefault(n(199)),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleReactionClick=function(){var e=t.props,n=e.type,r=e.onClick,o=e.disabled;void 0!==o&&o||r(n)},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.type,r=e.reactions,s=void 0===r?{}:r,c=e.pair,l=this.props.disabled,u=void 0!==l&&l,d=i.getProp(s,n+".count",0),p=i.getProp(s,n+".hasMyReaction",!1);return c&&(u=u||i.getProp(s,c+".hasMyReaction",!1)),o.h(a.default,{className:t,disabled:u,type:n,count:d,active:p,onClick:this.handleReactionClick})},t}(o.Component);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=r.__importDefault(n(200)),a=r.__importDefault(n(203));t.default=o.connect([a.default])(i.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(23),s=r.__importDefault(n(13)),c=r.__importDefault(n(5));n(201);var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderLikeIconPath=function(){return i.h("path",{d:"M7.664.002C9-.066 9.926 1.463 9.926 2.755c0 1.291-.176 3.561-.176 3.561h3.169c1.348 0 2.005.575 2.005 1.866 0 .798-.485 1.753-.485 1.753s.013.142.022.402c.017.492.146 1.062-.183 1.72-.351.704-.89 1.035-1.188 1.437-.09.121-.205.204-.205.204s-.023.293-.078.442c-.229.63-.755 1.676-2.303 1.676H7.441c-2.799 0-3.445-.645-3.441-2.583V7.816c1.84-1.104 2.318-2.926 2.65-4.65.412-2.138.018-3.113 1.014-3.164zM0 8.816a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1v-6z"})},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.active,n=void 0!==t&&t,r=e.className,a=void 0===r?"":r,l=e.count,u=e.disabled,d=void 0!==u&&u,p=e.onClick,m=e.onMouseEnter,f=e.onMouseLeave,h=e.type,_=o.default("cmnt-likes",a,"cmnt-likes_type_"+h,{"cmnt-likes_disabled":d},{"cmnt-likes_active":n});return i.h(s.default,{className:_,title:c.default(h),theme:"clear",size:"s",disabled:d,onMouseLeave:f,onMouseEnter:m,onClick:p},i.h("svg",{className:"cmnt-likes__icon",width:"16",height:"20",xmlns:"http://www.w3.org/2000/svg"},this.callPropOrOwn("renderLikeIconPath")),0!==l&&i.h("div",{className:"cmnt-likes__counter"},l))},t}(a.Base);t.default=l},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(7),s=n(19);n(204),t.default=function(e){return function(t){function n(e){var n=t.call(this,e)||this;return n.renderLikeIconPath=function(){return n.props.active?i.h("path",{d:"M7.664.002C9-.066 9.926 1.463 9.926 2.755c0 1.291-.176 3.561-.176 3.561h3.169c1.348 0 2.005.575 2.005 1.866 0 .798-.485 1.753-.485 1.753s.013.142.022.402c.017.492.146 1.062-.183 1.72-.351.704-.89 1.035-1.188 1.437-.09.121-.205.204-.205.204s-.023.293-.078.442c-.229.63-.755 1.676-2.303 1.676H7.441c-2.799 0-3.445-.645-3.441-2.583V7.816c1.84-1.104 2.318-2.926 2.65-4.65.412-2.138.018-3.113 1.014-3.164zM0 8.816a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1v-6z"}):i.h("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.382 5.475h1.828c1.762 0 2.787.937 2.787 2.653 0 .537-.079.887-.26 1.343l-.054.134c-.047.113-.086.23-.115.35-.012.05-.011.136.01.41.056.755.015 1.21-.282 1.805a3.787 3.787 0 0 1-.649.914c-.06.064-.193.197-.302.306l-.164.165a.621.621 0 0 0-.112.143c-.157.423-.259.645-.495.965-.573.78-1.473 1.24-2.705 1.24H7.686c-.84 0-1.52-.146-2.054-.416-.275.316-.68.516-1.132.516h-3a1.5 1.5 0 0 1-1.5-1.5v-5.5a1.5 1.5 0 0 1 1.5-1.5h3c.11 0 .218.012.322.034.67-.65 1.432-2.166 1.683-3.47.056-.291.102-.582.146-.91.025-.185.096-.76.101-.802v-.003C6.953.793 7.29.102 8.5.102c1.501 0 3.02 1.549 3.02 3.19 0 .618-.046 1.344-.138 2.183zM2 14.003v-4.5h2v4.5H2zM8.435 3.397c.028-.204.104-.825.103-.816.04-.318.076-.526.11-.659.482.12 1.073.778 1.073 1.37 0 .763-.083 1.752-.25 2.96a.9.9 0 0 0 .892 1.023h2.847c.802 0 .987.17.987.853 0 .286-.03.42-.133.68l-.054.134c-.08.193-.144.392-.193.595-.071.3-.07.492-.035.962.035.457.018.636-.096.866-.093.18-.212.344-.353.488-.031.034-.117.12-.207.21-.106.105-.218.218-.263.266-.223.24-.379.465-.482.743-.1.272-.15.38-.256.523-.236.321-.6.508-1.256.508H7.686c-1.43 0-1.783-.416-1.783-1.527V8.981c1.074-.94 2.04-2.859 2.37-4.573.062-.328.114-.652.162-1.011z"})},n.renderLikeIconPath=n.bindProp(n.renderLikeIconPath),n}return r.__extends(n,t),n.prototype.render=function(){var t=this.props,n=t.flags,s=t.className;return n[a.ExperimentFlags.CONTOUR_LIKES]?i.h(e,r.__assign({},this.props,{className:o.default(s,"cmnt-likes_contour"),renderLikeIconPath:this.renderLikeIconPath})):i.h(e,r.__assign({},this.props))},n}(s.Experimental)}},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(8),i=r.__importDefault(n(207));t.default=o.connect(function(e){return{commentModificationSettings:e.meta.commentModificationSettings}})(i.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(1),a=n(4),s=r.__importDefault(n(13)),c=r.__importDefault(n(5)),l=n(56),u=r.__importDefault(n(18)),d=r.__importDefault(n(14));n(208);var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleRulesClick=function(){a.reachGoal("cmnt.rules.click")},t.renderCollapsedContent=function(){var e=t.props.comment.collapsedCount;return c.default(t.commentType+"s-deleted","front.common",{count:e+1})},t.renderUserDeletedContent=function(){var e=t.props,n=e.comment,r=e.commentModificationSettings,i=e.onRestore,a=l.getModificationPossibility("editDelay",n,t.id,r);return[o.h("span",{className:"cmnt-removed-item__message cmnt-removed-item__message_by_user"},c.default(t.commentType+"-deleted-by-user")),a&&o.h(s.default,{size:"s",theme:"clear",text:c.default("restore-comment"),onClick:i})]},t.renderDeletedWithVerdictContent=function(){var e=t.props.comment,n=i.getVerdict(e,!0),r=n.link,a=n.message;return[o.h("span",{className:"cmnt-removed-item__message cmnt-removed-item__message_by_verdict"},c.default(""+t.keyPrefix+t.commentType+"-deleted-by-verdict","front.common",{verdict:a?" "+a:""})),r&&o.h(u.default,{className:"cmnt-removed-item__rules",title:c.default("commenting-rules"),icon:"help",url:r,onClick:t.handleRulesClick})]},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props.comment.path.length>2?"small":"middle";return o.h(d.default,{className:"cmnt-removed-item",position:"top",size:e},this.content)},Object.defineProperty(t.prototype,"id",{get:function(){var e=this.props.comment.path;return e[e.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commentType",{get:function(){return this.props.comment.path.length>2?"reply":"comment"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){var e=this.props.comment,t=e.collapsedCount,n=e.moderation,r=e.removedText,o=Boolean(r),a=i.getProp(n,"verdict",!1);return t?this.renderCollapsedContent():o?this.renderUserDeletedContent():a?this.renderDeletedWithVerdictContent():c.default(""+this.keyPrefix+this.commentType+"-deleted-by-author")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyPrefix",{get:function(){var e=this.props.comment.user;return i.getProp(e,"isAuthor",!1)?"your-":""},enumerable:!0,configurable:!0}),t}(o.Component);t.default=p},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(8),i=r.__importDefault(n(211));t.default=o.connect(function(e){return{userLinkTemplate:e.meta.userLinkTemplate,tld:e.tld}})(i.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(1),s=r.__importDefault(n(5)),c=r.__importDefault(n(18));n(212);t.default=function(e){var t=e.user,n=e.className,r=void 0===n?"":n,l=e.userLinkTemplate,u=e.tld,d=o.default("cmnt-user-login",r,{"cmnt-user-login_link":Boolean(l)}),p=s.default("deleted-user"),m=a.getProp(t,"login"),f="deleted"===a.getProp(t,"status");if(p=f?p:a.getProp(t,"displayName",s.default("default-displayName")),!f&&l&&m){var h=l.replace(/{login}/g,m).replace("{tld}",u);return i.h(c.default,{className:d,theme:"black",url:h},p)}return i.h("div",{className:d},p)}},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(219);t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=n(2),a=n(4),s=r.__importDefault(n(5)),c=r.__importDefault(n(14));n(220);var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={visible:t.props.visibleByDefault||!1},t.handleButtonClick=function(){a.reachGoal("cmnt.view.pessimized"),t.setState({visible:!0})},t.renderButton=function(){var e="root"===t.props.type?"middle":"small",n=o.default("cmnt-pessimized__button-icon","cmnt-pessimized__button-icon_size_"+e),r={iconLeft:"expand-arrow",onClick:t.handleButtonClick,theme:"grey"};return i.h(c.default,{className:"cmnt-pessimized__button",iconClassName:n,linkProps:r,position:"top",size:e,type:"link"},t.buttonText)},t}return r.__extends(t,e),t.prototype.render=function(){return i.h("div",{class:"pessimized"},this.state.visible?this.props.children:this.renderButton())},Object.defineProperty(t.prototype,"buttonText",{get:function(){var e=this.props,t=e.deletedCount,n=e.hiddenCount,r="front.common",o=s.default("show-hidden-comments-unknown-count");if(void 0===t||void 0===n)return o;var i=s.default("deleted-comments-plural",r,{count:t}),a=s.default("hidden-comments-plural",r,{count:n}),c=s.default("hidden-comments-plural-short",r,{count:n});return t>0&&n>0?s.default("hidden-and-deleted-comments-known-count",r,{deleted:i,hidden:c}):t>0?i:n>0?a:o},enumerable:!0,configurable:!0}),t}(i.Component);t.default=l},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(8),i=r.__importDefault(n(223));t.default=o.connect(function(e){return{noComments:e.noComments}})(i.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(6),a=r.__importDefault(n(5)),s=r.__importDefault(n(15)),c=r.__importDefault(n(14));n(224);t.default=function(e){var t=e.noComments;if(t===i.NoCommentsTypes.NONE)return null;if("object"==typeof t||t===i.NoCommentsTypes.COMPACT){var n=t.text||a.default("zero-comments"),r=t.icon?{src:t.icon}:{type:"zero-comments",iconType:"icon"};return o.h("div",{className:"cmnt-zero-comments cmnt-zero-comments_type_compact"},o.h(c.default,{iconClassName:"cmnt-zero-comments__icon",hasIcon:!0,position:"top",iconProps:r},o.h("div",{className:"cmnt-zero-comments__bubble"},n)))}return t===i.NoCommentsTypes.FULL?o.h("div",{className:"cmnt-zero-comments cmnt-zero-comments_type_full"},o.h("div",{className:"cmnt-zero-comments__full-icon"},o.h(s.default,{type:"zero-comments_full"})),o.h("div",{className:"cmnt-zero-comments__full-message"},a.default("zero-comments"))):void 0}},function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(229)),i=n(22),a=n(1),s={customSorts:null,errors:{},lastOpenForm:null,meta:{exp:i.emptyExperiment},progresses:{},rca:{},scrollOffset:0,stats:{},stickyInput:null,tree:null,viewMode:"wide",sid:a.uuidv4()};t.default=function(e){return o.default(r.__assign({},s,e,{meta:r.__assign({},s.meta,e.meta)}))}},function(e,t,n){e.exports=n(12)(15)}]);