(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"+49F":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(){function t(){}return t.prototype.updateDependencies=function(t){Object.assign(this,t)},t}()},udd0:function(t,e,n){"use strict";n.r(e);var i=n("VbXa"),r=n.n(i),a=n("+49F"),c=n("n73F"),d=n("gQdx"),o=n("5k1W"),u=n("+3en"),s=n("S7YN"),p=function(t){function e(){return t.apply(this,arguments)||this}return r()(e,t),e.prototype.execute=function(t){var e=t.board,n=t.env;if(c.a.getInstanceFromCache({id:e.id})===e){var i=n.di.getDefinition("redux").instance;if(i){var r=i.getState().entities.boards;if(r){var a=r[e.id];if(a){var p=Object(o.a)(a,e.toJSON(),["ban","is_private","is_subscribed","is_wishlist","slug","title","description",["stat",["competition_cards_count","subscribers_count","fulfilled_count","cards_count"]]]);if(p){n.dispatch(Object(d.a)({id:e.id,value:p}));var f=i.getState(),v=Object(u.a)(f);!1===p.is_wishlist&&v&&v.id===e.id&&i.dispatch(Object(s.a)({storeKey:"boardCards",url:"/collections/api/cards",query:{"board.id":e.id,sort:"-service.created_at",page_size:24}}))}}}}}},e}(a.a),f=n("pVnL"),v=n.n(f),l=n("cX81"),b=n("gF9f"),h=n("O/ol"),g=n("ZK//"),O=n("aKBe"),y=function(t){function e(){return t.apply(this,arguments)||this}return r()(e,t),e.prototype.execute=function(t){var e=t.env,n=t.card;if(l.a.getInstanceFromCache({id:n.id})===n){var i=e.di.getDefinition("redux").instance;if(i){var r=i.getState(),a=r.contest,c=n.getContests()||[];if(a&&c.length){var d=Object(h.a)(r,a.id);c.find((function(t){return t.slug===d.slug}))&&r.contestCards&&i.dispatch(Object(b.a)({contestCards:v()({},r.contestCards,{results:r.contestCards.results.filter((function(t){return t.id!==n.id}))})}))}n.clearContests(),e.dispatch(Object(O.a)({id:n.id,value:{competitions:void 0}})),a&&e.dispatch(Object(g.a)({id:a.id,value:{participation:void 0}}))}}},e}(a.a),j=n("TChA"),C=function(t){function e(){return t.apply(this,arguments)||this}return r()(e,t),e.prototype.execute=function(t){var e=t.env,n=t.card;e.dispatch(Object(j.a)({id:n.id}))},e}(a.a),x=n("o0o1"),S=n.n(x),w=n("3lXt"),_=n("Tff5"),m=n("Jxqj"),R=n("4RqY"),F=n("sioy");function k(t,e){var n=t&&t.card_previews;return Boolean(n&&n.length>0&&n.find((function(t){return t.id===e})))}var T=Object(R.a)((function(t,e){var n,i,r,a,c,o,u,s,p;return S.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:return n=t.id,i=e.getState,r=e.dispatch,a=i(),c=Object(_.a)(a,n),o=Object(m.a)(a,n),u=[],c&&(s=Object(w.a)(a,c),p=s.card_previews,k(s,n)&&p.find((function(t){return t.id===n}))&&u.push(r(Object(d.a)({id:c,value:{card_previews:p.filter((function(t){return t.id!==n}))}})))),k(o,n)&&u.push(r(Object(F.a)({id:o.id,value:{card_previews:o.card_previews.filter((function(t){return t.id!==n}))}}))),f.next=10,S.a.awrap(Promise.all(u));case 10:return f.abrupt("return",f.sent);case 11:case"end":return f.stop()}}))})),J=n("t0kG"),N=function(t){function e(){return t.apply(this,arguments)||this}return r()(e,t),e.prototype.execute=function(t){var e,n,i,r;return S.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:e=t.env,n=t.cardId,i=t.board,r=function(){var t=e.dispatch;t(T({id:n})),t(Object(j.a)({id:n}))},e.invokeStrategy(J.a.BoardToReduxStrategy,{board:i}).then(r,r).catch((function(t){console.error(t)}));case 3:case"end":return a.stop()}}))},e}(a.a),D=n("lc+m"),K=n("T6Rw"),B=n("3WeZ"),I=Object(K.a)((function(t,e){return Object(B.a)(t,{currentCard:e})})),V=n("aNOA"),X=n("xalX"),q=function(t){function e(){return t.apply(this,arguments)||this}return r()(e,t),e.prototype.execute=function(t){var e=t.env,n=t.card,i=t.stateKey,r=e.di.getDefinition("redux").instance;r&&(n?Object(D.a)(r.getState(),n.id)?(i&&e.dispatch(I({stateKey:i})),e.dispatch(Object(V.a)({key:"card",value:{id:n.id}}))):e.dispatch(Object(V.a)({key:"card",value:Object(X.a)(n.toViewJSON())})):e.dispatch(Object(V.a)({key:"card",value:null})))},e}(a.a),A=function(t){function e(){return t.apply(this,arguments)||this}return r()(e,t),e.prototype.execute=function(t){var e=t.env,n=t.card;if(l.a.getInstanceFromCache({id:n.id})===n){var i=e.di.getDefinition("redux").instance;if(i){var r=i.getState().entities.cards;if(r){var a=r[n.id];if(a){var c=Object(o.a)(a,n.toViewJSON(),[["board",["id"]],"description","is_liked","is_private","stat","labels","mine_cards","content"]);c&&e.dispatch(Object(O.a)({id:n.id,value:c})),a.content&&n.getContent()&&a.content.length!==n.getContent().length&&e.dispatch(Object(O.a)({id:n.id,value:{content:n.getContent().toJSON()}})),n.getComplaint()&&e.dispatch(Object(j.a)({id:n.id}))}}}}},e}(a.a);n.d(e,"BoardToReduxStrategy",(function(){return p})),n.d(e,"CardRemoveFromContestReduxStrategy",(function(){return y})),n.d(e,"CardRemoveFromFeedToReduxStrategy",(function(){return C})),n.d(e,"CardRemoveStrategy",(function(){return N})),n.d(e,"CardSetCurrentCardToReduxStrategy",(function(){return q})),n.d(e,"CardToReduxStrategy",(function(){return A}))}}]);