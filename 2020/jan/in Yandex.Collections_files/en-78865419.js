(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"+3Hv":function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({switchOnLabel:"Включить чат",switchOffLabel:"Чат включен"})},"+CQK":function(e,t,r){"use strict";var a=r("pVnL"),n=r.n(a),o=r("cDcd"),c=r("JxqJ"),i=r("QodL"),s=r("3lXt"),l=r("RWwA"),p=r("i1uP"),u=Object(p.a)(s.a,(function(e){if(e&&e.card_previews&&e.card_previews.length)return e.card_previews[0].image})),d=r("Ot8I");function h(e,t,r){void 0===r&&(r="smart56");var a=u(e,t);return Object(d.b)(a,{size:r})}var m=r("X4fP"),b=r("lPPs"),f=r("rANK"),v=r("xFYi"),O=r("VRo3"),y=r("bphC"),g=r("lc+m"),C=r("Tff5"),j=r("7/cf"),E=r("U9Ap"),w=r("XPFG"),_=r("Wopx"),k=r("7JBc"),D=r("BKHA"),x=r("u3Je"),P=r("84fb"),S=r("785c"),L=r("gLBg"),N=r("hFHJ"),T=r("I7lw"),I=r("SDCS"),F=r("nAK0"),A=r("riXN"),B=r("yiA1");r.d(t,"a",(function(){return R}));var R=Object(c.b)((function(e,t){var r=t.boardId,a=t.hasQueue,n=Object(j.b)(e);if(!n||!n.id){var o=Object(D.a)(e);if(o.cards){var c=o.cards[0],p=Object(C.a)(e,c);o.cards.every((function(t){return p===Object(C.a)(e,t)}))&&(n=Object(g.a)(e,c))}}var u,d=Object(w.a)(n),N=Object(s.a)(e,r),T=Object(v.a)(N),I=Object(f.a)(N),F=(n&&n.board&&n.board.id)===r,B=Object(P.a)(e)&&!T,R=Object(_.a)(e),U=!R.isYandexBroWebView,M=A.a.getRetpathUrl(R,!d||R.isYandexBroWebView?Object(k.a)(e):Object(L.k)(d)),W=Object(x.a)(e)||{},V=W.id,H=W.type,K=Object(D.a)(e),z=Boolean(n&&n.task_id);return u=Boolean(F&&a&&!z),{cardId:d,title:Object(b.a)(N),isWishlist:Object(O.a)(N),bgImage:h(e,r),sourceType:Object(l.a)(N),isOwner:Object(E.a)(e,n)||Object(y.a)(e,N),coauthorsCount:Object(m.a)(N),isDefaultBoard:I,isPrivate:T,isSaving:u,isCurrentBoard:F,shouldShowVerificationModal:B,retpath:M,isSupportOpenInNewTab:U,isAddModal:V===S.b&&H===i.c.ADD_CARD,isBulk:Boolean(K&&K.cards)}}))((function(e){var t=e.title,r=e.query,a=e.isWishlist,c=e.isPrivate,i=e.bgImage,s=e.boardId,l=e.isCurrentBoard,p=e.isSaving,u=e.hasQueue,d=(e.sourceType,e.isDefaultBoard,e.coauthorsCount),h=e.cardId,m=e.isOwner,b=e.shouldShowVerificationModal,f=e.retpath,v=e.isSupportOpenInNewTab,O=e.isAddModal,y=e.isBulk,g=e.dispatch,C=e.counter,j={onClick:function(){if(!u)if(l)g(Object(N.f)({boardId:s}));else if(b){var e=function(){return g(Object(I.a)({place:C.loc,retpath:f,isSupportOpenInNewTab:v}))};O?g(Object(N.e)()).then(e):e()}else g(Object(N.c)({boardId:s,counter:C}))}};return h&&m&&!y&&(j.onRemoveClick=function(){g(Object(T.removeCardClick)(h)),F.d.clickCardRemove(n()({},C,{cardId:h}))}),o.createElement(B.a,n()({boardId:s,isPrivate:c,isWishlist:a,title:t,bgImage:i,isCurrentBoard:l,isSaving:p,query:r,coauthorsCount:d},j))}))},"/KDC":function(e,t,r){},"/WWM":function(e,t,r){},"0G42":function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({offline:"Couldn't upload collections"})},"1A3b":function(e,t,r){var a=r("C4oF").translateWrapper,n=r("YU6D").Utils.escapeExpression;e.exports=a({title:"Что делать с выбранными картинками и видео?",seriesMode:"Карточка-серия",cardsTitle:[function(e){return"Создать "+n(e.count)+" карточку"},function(e){return"Создать "+n(e.count)+" отдельные карточки"},function(e){return"Создать "+n(e.count)+" отдельных карточек"}],cardsDescription:"Из каждой выбранной картинки или видео будет создана одна карточка",seriesTitle:"Создать одну карточку-серию",seriesDescription:"Выбранные картинки и видео попадут в одну карточку",editSeries:"Добавить несколько картинок"})},"1GvB":function(e,t,r){},"1R8C":function(e,t,r){"use strict";var a=r("VbXa"),n=r.n(a),o=r("cDcd"),c=r("w1Ut"),i=r("VqUl"),s=r("6ga4");r("cG1V");var l=function(e){function t(){return e.apply(this,arguments)||this}return n()(t,e),t.prototype.render=function(){var e=this.props,t=e.value,r=e.placeholder,a=e.id,n=e.onChange,c=e.rows,i=void 0===c?4:c;return o.createElement("div",{className:"cl-form-textarea"},o.createElement("textarea",{id:a,className:Object(s.a)("cl-form-textarea__field",{visible:!0}),placeholder:r||"",onChange:n,value:t,rows:i}))},t}(o.Component);r.d(t,"a",(function(){return p}));var p=function(e){function t(t){var r=e.call(this,t)||this;return r.htmlFor=Object(c.a)(),r}return n()(t,e),t.prototype.render=function(){var e=this.props,t=(e.e2eLabel,e.value),r=e.label,a=e.placeholder,n=e.validator,c=e.onChange,s=e.onValidate,p=this.htmlFor;return o.createElement(i.a,{htmlFor:p,label:r,validator:n,onValidate:s,value:t},o.createElement(l,{id:p,value:t,placeholder:a,onChange:c}))},t}(o.PureComponent)},"1S5O":function(e,t,r){},"2rC0":function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({placeholder:"Search"})},"3G3r":function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var a,n,o=r("VbXa"),c=r.n(o),i=r("U+yc"),s=r.n(i),l=r("cDcd"),p=r("JxqJ"),u=r("2rC0"),d=r("LH8O"),h=r("ORuK"),m=r("c+Ap");r("ectj"),r("ttVL");var b=(a=Object(d.a)(),n=function(e){function t(){return e.apply(this,arguments)||this}c()(t,e);var r=t.prototype;return r.onKeyUp=function(e){Object(h.a)(e)&&this.input&&this.input.blur()},r.render=function(){var e=this,t=this.props,r=t.text,a=t.placeholder,n=t.onChange,o=t.onClick;return l.createElement("div",{className:"cl-input-search"},l.createElement("span",{className:"cl-input-search__icon"},l.createElement("i",{className:"cl-input-search__search-icon"})),l.createElement("input",{ref:function(t){return e.input=t},value:r,placeholder:a||u.placeholder(),type:"text",className:"cl-input-search__input",spellCheck:!m.w,onChange:n,onClick:o,onKeyUp:void 0}))},t}(l.Component),s()(n.prototype,"onKeyUp",[a],Object.getOwnPropertyDescriptor(n.prototype,"onKeyUp"),n.prototype),n),f=Object(p.a)()(b)},"3elJ":function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({openCoauthors:"К управлению соавторами"})},"7MTc":function(e,t,r){},"7sWk":function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({more:"Upload more"})},"8/83":function(e,t,r){"use strict";var a=r("pVnL"),n=r.n(a),o=r("cDcd"),c=r("JxqJ"),i=r("6ga4"),s=r("Heix"),l=r("qQB9"),p=r("7/cf"),u=function(e){var t=Object(p.b)(e),r=t&&t.content||[],a=Object(s.a)(t)||0,n=Object(l.a)(t)||0;return r&&r.length===a||a>=n},d=r("x9gI"),h=r("ICaW"),m=r("hFHJ"),b=r("o0o1"),f=r.n(b),v=r("rT8E"),O=r("r/yX"),y=r("osxO"),g=r("y144"),C=r("8nDD"),j=r("U0LE"),E=r("4RqY"),w=r("nAK0"),_=Object(E.a)((function(e,t){var r,a,n,o,c,i,s,u,d,h;return f.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:r=e.value,a=t.getState,n=t.dispatch,o=a(),c=Object(p.b)(o),i=c&&c.content||[],s=Object(l.a)(c)||0,u=i&&i.slice(0,s),d=Array.from(u||[],(function(e){return e.id})),h=Object(v.a)(i[0]),r?(n(Object(g.a)({value:{selected_contents:d}})),i&&i.length>=s&&n(Object(j.a)({type:y.b.SELECTED_LIMIT,options:{count:s}})),w.d.clickAuthorsSelectAll({action:"select",type:h}),u.forEach((function(e){(e._error||Object(O.a)(e))&&n(Object(C.a)({id:e.id}))}))):(n(Object(g.a)({value:{selected_contents:[]}})),w.d.clickAuthorsSelectAll({action:"unselect",type:h}));case 10:case"end":return m.stop()}}))})),k=r("EvZm"),D=r("dW9n"),x=r("Qme+"),P=r.n(x);r("9J9F"),r.d(t,"a",(function(){return S})),r("luvV");var S=Object(c.b)((function(e){return{isSelectEnabled:!u(e),isSelectAllExperiment:Object(d.a)(e,h.d.COLLECTIONS_DESKTOP_INTERNAL_ADD_SELECT_ALL)}}))((function(e){var t=e.label,r=e.backLabel,a=e.onClick,c=e.disabled,s=e.actionDisabled,l=e.mods,p=e.actionType,u=void 0===p?"action":p,d=e.hideBack,h=e.hideBorder,b=e.counter,f=e.isSelectEnabled,v=e.isSelectAllExperiment,O=e.showSelectAll,y=(e.showCoauthorButton,e.removeCollection),g=e.children,C=e.dispatch,j=v&&O;return o.createElement("div",{className:Object(i.a)("add-footer",n()({border:!h},l))},g,(!d||j||y)&&o.createElement("div",{className:"add-footer__left-controls"},!d&&o.createElement(k.a,{label:r||D.back(),onClick:function(){C(Object(m.b)())},size:"M",ei:!0,type:"normal",disabled:c,props:{"data-c":w.c.clickAuthorsBack(b)}}),j&&o.createElement(k.a,{label:f?D.selectAll():D.reset(),onClick:function(){C(_({value:f}))},size:"M",disabled:c,ei:!0,type:"normal",props:{}}),y&&o.createElement(k.a,{onClick:y,ei:!0,type:"normal",size:"M",iconOnly:!0,iconComponent:o.createElement(P.a,{className:Object(i.a)("button__icon",{trash:!0})}),props:{}})),t&&a&&o.createElement(k.a,{className:"cl-add-footer__button",size:"M",type:u,label:t,onClick:a,disabled:s,ei:!0,props:{}}),!1,!1)}))},"9IEF":function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({descEmptyPlaceholder:"Click to add description",descPlaceholder:"Card description"})},"9J9F":function(e,t,r){},"9nmH":function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({boardTitleTitle:"Collection name",boardDescriptionTitle:"Description",titlePlaceholder:"New collection name",descriptionPlaceholder:"New collection description",privateLabel:"Only visible to me",privateCoauthorsLabel:"Будет видна только мне и соавторам коллекции",wishlistLabel:"Wish list",wishlistDescription:"This is where you can collect wishes and mark wishes fulfilled",banDescription:"Коллекция была заблокирована. Её нельзя сделать видимой для всех",createLabel:"Create collection"})},AFF7:function(e,t,r){},ATSa:function(e,t,r){},BZ3Z:function(e,t,r){var a=r("cDcd");function n(e){return a.createElement("svg",e,a.createElement("g",{fill:"none",fillRule:"evenodd"},[a.createElement("path",{d:"M5.426 11H23v2H5.426l8.293 8.293-1.414 1.414L1.598 12 12.305 1.293l1.414 1.414L5.426 11zm-.988.988L4.426 12l.012.012v-.024z",fill:"#000",key:0}),a.createElement("path",{d:"M0 0h24v24H0z",key:1})]))}n.defaultProps={viewBox:"0 0 24 24"},e.exports=n,n.default=n},BrWi:function(e,t,r){"use strict";function a(e){return void 0===e&&(e=100),function(t,r,a){return{configurable:!0,enumerable:a.enumerable,get:function(){var t,n,o,c;return Object.defineProperty(this,r,{configurable:!0,enumerable:a.enumerable,value:(t=a.value.bind(this),n=e,function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];var i=this;c?(clearTimeout(o),o=setTimeout((function(){Date.now()-c>=n&&(t.apply(i,r),c=Date.now())}),n-(Date.now()-c))):(t.apply(i,r),c=Date.now())})}),this[r]}}}}r.d(t,"a",(function(){return a}))},CC2E:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var a=r("pVnL"),n=r.n(a),o=r("QodL"),c=r("+3en"),i=r("bphC"),s=r("XPFG"),l=r("4RqY"),p=r("1WnH"),u=r("nAK0"),d=Object(l.a)((function(e,t){var r=e.counter,a=t.getState,l=t.dispatch,d=a(),h=Object(c.a)(d),m=Object(s.a)(h),b=Object(i.a)(d,h);u.d.clickBoardCoauthor(n()({},r,{boardId:m,isOwner:b})),l(Object(p.a)({type:o.c.COAUTHOR,id:"coauthor"}))}))},CqvR:function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({userUpdated:"Changes saved"})},CyAQ:function(e,t,r){},Dpht:function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({title:"What are you adding?",mobileTitle:"Выберите формат",image:"Images",imageByLink:"Картинки по ссылке",imageByPhoto:"Сделать фотографию",imageByDevice:"Картинки с устройства",video:"Video",link:"Link",product:"Товар",collection:"Collection",addImages:"Add images",addImagesByLink:"Добавить картинки по ссылке",addLink:"Add link",addProduct:"Добавить товар",editProduct:"Редактировать товар"})},EFl1:function(e,t,r){},Eqx2:function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({title:"Where do you want to add the card?",createBoardLabel:"Add to a new collection",removeCard:"Delete card"})},"F/w0":function(e,t,r){},Gphu:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var a,n,o,c=r("pVnL"),i=r.n(c),s=r("VbXa"),l=r.n(s),p=r("U+yc"),u=r.n(p),d=r("cDcd"),h=r("JxqJ"),m=r("LH8O"),b=r("6ga4"),f=r("hFHJ"),v=r("nAK0"),O=r("t8Is"),y=r("fRdb"),g=r("BZ3Z");r("tb2r");var C=(a=Object(m.a)(),n=Object(m.a)(),o=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).state={hideTitle:!1,hasShadow:!1},t}l()(t,e);var r=t.prototype;return r.onBackClick=function(){var e=this.props,t=e.dispatch,r=e.hideDialog;t(Object(f.b)(r?{hideDialog:r}:{}))},r.onCloseClick=function(){var e=this.props,t=e.dispatch,r=e.hideDialog;t(Object(f.g)(r?{hideDialog:r}:{}))},r.render=function(){var e=this.props,t=e.title,r=e.tabs,a=e.close,n=e.back,o=void 0!==n&&n,c=e.counter,s=e.children,l=e.mods,p=e.dispatch,u=this.state,h=u.hideTitle,m=u.hasShadow,f=a&&o,C=d.createElement(d.Fragment,null,d.createElement("div",{className:"add-header__back",onClick:this.onBackClick,"data-c":v.c.clickAuthorsBack(c)},d.createElement(g,{className:Object(b.a)("add-header__icon",{back:!0})}),d.createElement("span",{className:Object(b.a)("add-header__back-text",{hidden:h})},y.back())),!1);return d.createElement("div",{className:Object(b.a)("add-header",i()({back:!a&&o,close:a&&!f,nav:f,column:Boolean(r)},l))},a?f?d.createElement("div",{className:Object(b.a)("add-header__nav-panel",{shadow:m})},C,d.createElement(O.a,{onClick:this.onCloseClick,mods:i()({flex:!0},l)})):d.createElement(O.a,{onClick:this.onCloseClick,mods:l}):o&&C,(s||t)&&d.createElement("div",{className:"add-header__title"},s||t),r&&d.createElement("div",{className:"add-header__tabs"},r.map((function(e){var t=e.title,r=e.cur,a=e.action;return d.createElement("div",{key:t,className:Object(b.a)("add-header__tab",{cur:r}),onClick:function(){return!r&&a&&p(a())}},t)}))))},t}(d.Component),u()(o.prototype,"onBackClick",[a],Object.getOwnPropertyDescriptor(o.prototype,"onBackClick"),o.prototype),u()(o.prototype,"onCloseClick",[n],Object.getOwnPropertyDescriptor(o.prototype,"onCloseClick"),o.prototype),o),j=Object(h.b)()(C)},Ho6D:function(e,t,r){"use strict";var a,n,o,c,i,s,l,p,u,d,h,m,b,f,v,O=r("pVnL"),y=r.n(O),g=r("VbXa"),C=r.n(g),j=r("U+yc"),E=r.n(j),w=r("cDcd"),_=r("JxqJ"),k=r("LH8O"),D=r("xalX"),x=r("fD+j"),P=r("FIs7"),S=r("y1pN"),L=r("bphC"),N=r("Tff5"),T=r("lc+m"),I=r("om3R"),F=r("i1uP"),A=Object(F.a)(T.a,(function(e){if(e&&e.content){var t=Object(I.a)(e);return t&&t.content&&t.content.derived_from}})),B=r("7z6F"),R=r("W7A8"),U=r("7dCv"),M=r("Heix"),W=r("7/cf"),V=r("CZvv"),H=r("XIU/"),K=r("U9Ap"),z=r("GGxO"),q=r("pzCj"),J=r("rT8E"),G=r("CHZ4"),Y=r("nUi2"),Z=r("82Jb"),Q=r("izju"),X=r("gLBg"),$=r("hFHJ"),ee=r("7Hn5"),te=r("y144"),re=r("t8Is"),ae=r("o0o1"),ne=r.n(ae),oe=r("Sipo"),ce=r("T6Rw"),ie=Object(ce.a)((function(e,t){var r=t.direction,a=Object(W.b)(e);if(a&&a.selected_contents){var n,o=a.preview_content,c=o?a.selected_contents.indexOf(o):0,i=a.selected_contents.length-1;return"next"===r?++c>i&&(c=0):--c<0&&(c=i),y()({},e,((n={}).currentCard=y()({},a,{preview_content:a.selected_contents[c]}),n))}return e})),se=Object(F.a)(T.a,(function(e){return e&&e.selected_contents&&e.preview_content?e.selected_contents.indexOf(e.preview_content):0})),le=r("EvZm"),pe=r("x9gI"),ue=r("ICaW"),de=r("4RqY"),he=Object(de.a)((function(e,t){var r,a,n,o,c;return ne.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:r=e.index,a=t.getState,n=t.dispatch,(o=Object(W.b)(a()))&&o.selected_contents&&(c=o.selected_contents[r],n(Object(te.a)({value:{preview_content:c,selected_contents:[c].concat(o.selected_contents.filter((function(e){return e!==c})))}})),o.original_id&&n(Object(ee.a)()));case 4:case"end":return i.stop()}}))})),me=r("nAK0"),be=r("HtIP"),fe=r("2+s3"),ve=r("jgrJ"),Oe=r("dQn9"),ye=r("ZnC7"),ge=r("CUhL"),Ce=Object(_.a)()((function(e){var t=e.resolve,r=e.reject;return w.createElement(ge.a,{dialogType:"removeImage"},w.createElement(Oe.a,{title:ye.title(),primaryLabel:ye.cancelLabel(),secondaryLabel:ye.confirmLabel(),secondaryDangerous:!0,onPrimary:function(){r(new Error("don't close dialog"))},onSecondary:function(){t()},onOut:function(){r(new Error("don't close dialog"))}}))})),je=Object(de.a)((function(e,t){var r;return ne.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,e.next=3,ne.a.awrap(r(Object(ve.a)(Object(w.createElement)(Ce))));case 3:case"end":return e.stop()}}))})),Ee=r("vdFK"),we=r("GhlN"),_e=r("qyl4"),ke=r.n(_e),De=(r("Zz/2"),"current-card-temp"),xe=(a=Object(k.a)(),n=Object(k.a)(),o=Object(k.a)(),c=Object(k.a)(),i=Object(k.a)(),s=function(e){function t(){return e.apply(this,arguments)||this}C()(t,e);var r=t.prototype;return r.onPrevClick=function(){this.props.dispatch(ie({direction:"prev"})),me.d.clickAuthorsPreviewSlide()},r.onNextClick=function(){this.props.dispatch(ie({direction:"next"})),me.d.clickAuthorsPreviewSlide()},r.makeCover=function(){var e=this.props,t=e.current,r=e.dispatch,a=e.type;r(he({index:t})),me.d.clickAuthorsPreviewCover({type:a})},r.onEditClick=function(){var e=this.props,t=e.dispatch,r=e.type;t(Object(Ee.v)()),me.d.clickAuthorsPreviewSeriesEdit({type:r})},r.onRemoveImage=function(){var e,t,r,a;return ne.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=this.props,t=e.previewId,r=e.counter,a=e.dispatch,n.prev=1,n.next=4,ne.a.awrap(a(je({counter:r})));case 4:a(Object(fe.a)({id:t})),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(1);case 9:a(Object(ee.a)());case 10:case"end":return n.stop()}}),null,this,[[1,7]])},r.render=function(){var e=this.props,t=e.children,r=e.current,a=e.total,n=e.isCurrentPreview,o=e.isPreviewLoading,c=e.type,i=e.hideMakeCover,s=e.isMyCard,l=e.openCardFromAdd,p=a>1;return!p&&c!==Q.a.IMAGE||!s?t||null:w.createElement("div",{className:"cl-teaser__picture-wrap"},w.createElement("div",{className:"cl-series"},o&&w.createElement("div",{className:"cl-series__loading"},w.createElement(be.a,{gif:!1})),w.createElement("div",{className:"cl-series__controls"},w.createElement("div",{className:"cl-series__controls-group"},p&&w.createElement(w.Fragment,null,w.createElement(le.a,{className:"cl-series__button",label:oe.imageCounter.r({current:r+1,total:a}),ei:!0,type:"black",shape:"round",size:"M",props:{}}),(l||!n)&&w.createElement(le.a,{className:"cl-series__button",ei:!0,type:"whitegrey",shape:"round",size:"M",iconOnly:!0,iconComponent:w.createElement(ke.a,{className:"cl-series__trash-icon"}),onClick:this.onRemoveImage,props:{}})),!1),w.createElement("div",{className:"cl-series__controls-group"},p&&w.createElement(w.Fragment,null,w.createElement("div",{className:"cl-series__cover"},n?w.createElement(le.a,{className:Object(we.a)("cl-series__button",{cover:!0}),label:oe.cover(),ei:!0,type:"black",shape:"round",size:"M"}):!i&&w.createElement(le.a,{className:Object(we.a)("cl-series__button",{cover:!0}),label:oe.makeCover(),ei:!0,type:"whitegrey",shape:"round",size:"M",onClick:this.makeCover})),w.createElement("div",{className:"cl-series__switch"},w.createElement(le.a,{className:Object(we.a)("cl-series__button",{switch:!0}),ei:!0,type:"whitegrey",shape:"round",size:"M",iconOnly:!0,icon:!0,iconMods:{"back-left-9x14":!0},onClick:this.onPrevClick,props:{}}),w.createElement(le.a,{className:Object(we.a)("cl-series__button",{switch:!0}),ei:!0,type:"whitegrey",size:"M",shape:"round",iconOnly:!0,icon:!0,iconMods:{"back-right-9x14":!0},onClick:this.onNextClick,props:{}})))))),t)},t}(w.Component),E()(s.prototype,"onPrevClick",[a],Object.getOwnPropertyDescriptor(s.prototype,"onPrevClick"),s.prototype),E()(s.prototype,"onNextClick",[n],Object.getOwnPropertyDescriptor(s.prototype,"onNextClick"),s.prototype),E()(s.prototype,"makeCover",[o],Object.getOwnPropertyDescriptor(s.prototype,"makeCover"),s.prototype),E()(s.prototype,"onEditClick",[c],Object.getOwnPropertyDescriptor(s.prototype,"onEditClick"),s.prototype),E()(s.prototype,"onRemoveImage",[i],Object.getOwnPropertyDescriptor(s.prototype,"onRemoveImage"),s.prototype),s),Pe=Object(_.b)((function(e){var t=Object(W.b)(e),r=Object(I.a)(t),a=Object(U.a)(t),n=Boolean(t&&t.original_id),o=t&&Object(K.a)(e,t),c=t&&t.id===De&&!t.original_id;return{current:se(t)||0,total:Object(M.a)(t)||0,isCurrentPreview:r&&a&&r.id===a.id,isPreviewLoading:a&&a._loading,previewId:a&&a.id?a.id:void 0,type:Object(J.a)(r),hideMakeCover:!Object(pe.a)(e,ue.d.COLLECTIONS_DESKTOP_SHOW_MAKE_COVER)&&n,isMyCard:o||c}}))(xe),Se=r("f8gw"),Le=r("JmMj"),Ne=r("zJZA"),Te=r("G7p/"),Ie=r("GFr9"),Fe=r("vjVR"),Ae=r("e5iJ"),Be=r("irYq"),Re=r("9IEF"),Ue=(r("J3Be"),l=Object(k.a)(),p=Object(k.a)(),u=Object(k.a)(),d=Object(k.a)(),h=Object(k.a)(),m=Object(k.a)(),b=Object(k.a)(),f=Object(k.a)(),v=function(e){function t(t){var r=e.call(this,t)||this;return r.state={editing:Boolean(t.autoFocus),description:t.description},r}C()(t,e);var r=t.prototype;return r.componentDidMount=function(){var e=this;this.state.editing&&(this.onTextareaClick(),Object(Te.b)((function(){e.ctrl&&e.ctrl.scrollIntoView()})))},r.componentDidUpdate=function(e){e.description!==this.props.description&&this.setState({description:this.props.description})},r.onChange=function(e){this.setState({description:e.target.value})},r.onKeyDown=function(e){e.keyCode===Fe.b&&(this.onSaveClick(),e.preventDefault())},r.startEditing=function(){this.state.editing||this.props.disabled||this.setState({editing:!0})},r.onTextareaClick=function(){document.addEventListener("mousedown",this.onClickWhileEditing,!0),me.d.clickEditPopupAdd(this.props.counter),this.startEditing()},r.onClickWhileEditing=function(e){if(!Object(Ie.a)(e)||!this.state.editing){var t=this.props.teaser,r=t&&t.contains(e.target);r||(e.preventDefault(),e.stopPropagation(),this.onSaveClick()),r&&this.form&&!this.form.contains(e.target)&&this.onSaveClick()}},r.onSaveClick=function(){var e=this.props,t=e.counter,r=e.index,a=e.onChange;this.setState({editing:!1}),this.scrollTextareaToTop(),a(this.state.description,r),me.d.submitEditPopupAdd(t),document.removeEventListener("mousedown",this.onClickWhileEditing,!0)},r.onCancelClick=function(){var e=this.props,t=e.counter,r=e.description;this.setState({description:r,editing:!1}),this.scrollTextareaToTop(),me.d.cancelEditPopupAdd(t)},r.scrollTextareaToTop=function(){this.textarea&&(this.textarea.scrollTop=0)},r.render=function(){var e,t=this,r=this.state,a=r.editing,n=r.description,o=this.props.disabled,c=!a&&!o;return o&&!n?null:(e=Boolean(n)||a?Re.descPlaceholder():Re.descEmptyPlaceholder(),w.createElement("div",{className:Object(we.a)("cl-teaser__form",{editable:c,editing:a,disabled:o}),onClick:c?this.onTextareaClick:void 0,ref:function(e){return t.form=e}},w.createElement("div",{className:"cl-teaser__form-wrap"},c&&w.createElement("span",{className:"cl-teaser__form-icon"}),w.createElement(Ae.a,{className:"card-preview-form",mods:{"teaser-preview":!0,editing:a,editable:c},focused:a,focusRows:0,disabled:o,value:n,placeholder:e,selectText:!0,minRows:3,maxRows:8,maxLength:Ne.a,setRef:function(e){return t.textarea=e},onChange:this.onChange,onFocus:c?this.onTextareaClick:void 0,onKeyDown:this.onKeyDown})),a&&w.createElement("div",{className:"cl-teaser__form-ctrl",ref:function(e){return t.ctrl=e}},w.createElement(le.a,{ei:!0,type:"normal",size:"M",label:Be.cancel(),onClick:this.onCancelClick}),w.createElement(le.a,{ei:!0,type:"action",size:"M",label:Be.save(),onClick:this.onSaveClick}))))},t}(w.Component),E()(v.prototype,"onChange",[l],Object.getOwnPropertyDescriptor(v.prototype,"onChange"),v.prototype),E()(v.prototype,"onKeyDown",[p],Object.getOwnPropertyDescriptor(v.prototype,"onKeyDown"),v.prototype),E()(v.prototype,"startEditing",[u],Object.getOwnPropertyDescriptor(v.prototype,"startEditing"),v.prototype),E()(v.prototype,"onTextareaClick",[d],Object.getOwnPropertyDescriptor(v.prototype,"onTextareaClick"),v.prototype),E()(v.prototype,"onClickWhileEditing",[h],Object.getOwnPropertyDescriptor(v.prototype,"onClickWhileEditing"),v.prototype),E()(v.prototype,"onSaveClick",[m],Object.getOwnPropertyDescriptor(v.prototype,"onSaveClick"),v.prototype),E()(v.prototype,"onCancelClick",[b],Object.getOwnPropertyDescriptor(v.prototype,"onCancelClick"),v.prototype),E()(v.prototype,"scrollTextareaToTop",[f],Object.getOwnPropertyDescriptor(v.prototype,"scrollTextareaToTop"),v.prototype),v),Me=Object(_.b)()(Ue),We=r("/+oc"),Ve=r("AhEr"),He=Object(F.a)(T.a,(function(e){if(e&&e.content){var t=Object(I.a)(e);if(t&&t.source)return t.source.metadata}})),Ke=Object(F.a)(T.a,(function(e){var t=He(e);if(t)return t.rating})),ze=r("Mp5Z"),qe=r("6/ZC"),Je=r("6jw5"),Ge=r("LyO5"),Ye=r("P/1b"),Ze=r("Hxdx"),Qe=r("RYE9"),Xe=r("8fc2"),$e=r("lpMR"),et=r("Oi3d"),tt=r("oNsL"),rt=r("ixsu"),at=r("7oCh"),nt=r("auIy"),ot=r("az6Z"),ct=r("ICKy"),it=(r("rLhg"),function(e){var t=e.index,r=e.content,a=e.showAvatarsPicture,n=e.selectedCount,o=Object(et.a)(W.b),c=Ke(o),i=c&&Number(c).toFixed(1),s=Number(t)>=0,l=Object(J.a)(r)===Q.a.LINK,p=Object(Ze.a)(r),u=Object(Ye.a)(r),d=a?u:l?void 0:p;if(!a){var h=Object(Ge.a)(r);h&&h.preview&&(d=h.preview)}var m,b,f,v=Object(tt.a)(ue.d.COLLECTIONS_PRODUCT_PRICE_LABEL)&&Object(V.a)(o),O=o&&Object(Ve.a)(o),y=Object(w.useState)(!1),g=y[0],C=y[1],j=Object(w.useState)(!1),E=j[0],_=j[1],k=Object(w.useRef)(null),D=Object(w.useRef)(null),x=function(){if(k.current&&D.current){var e=k.current.clientHeight>360;E||E===e||_(e)}},P=!g&&d,S=Object(J.a)(r),L=Object(Qe.a)(r),N=Object($e.a)(r),T=Object(Je.a)(r),I=Object(qe.a)(S),F=Object(z.a)(S),A=Boolean(n&&n>1);v?(m="price",b=O):I?m="geo":A&&!s?(m="series",b=n):N&&T?(m="video",b=Object(We.a)(T),f=Object(Xe.a)(r)?"hd":""):L&&(m="gif",b="gif");var B=l&&!P;return w.createElement("div",{className:"cl-card-preview-picture cl-teaser__picture",style:B?{backgroundImage:Object(ze.a)(p)}:{},ref:function(e){e&&k&&k.current!==e&&(k.current=e,x())}},w.createElement(rt.a,{mods:{fit:!0,"teaser-card":!0,empty:g,"broken-image":!l&&!P,"cut-image":E,gradient:B},src:B?void 0:d,label:w.createElement(w.Fragment,null,w.createElement(at.a,{position:"bottom-left"},w.createElement(ct.a,{labelSize:"S",labelType:m,labelPosition:"static",labelValue:b,labelSub:f})),(N||L)&&w.createElement(nt.a,null,w.createElement("span",{className:Object(we.a)("cl-teaser-video-play__icon",{size:"M"})}))),onImageError:function(){C(!0)},onImageLoad:function(){D.current&&0===D.current.naturalHeight&&C(!0),x()},onImageRef:function(e){e&&D&&D.current!==e&&(D.current=e)}},(i||F)&&w.createElement(ot.a,{rating:i})))}),st=r("/MKj");r("pi52");var lt,pt,ut,dt,ht=function(e){var t=e.iconComponent,r=e.title,a=e.description,n=e.onClick;return w.createElement("div",{className:"cl-card-mode-menu-item",onClick:n},t,w.createElement("div",{className:"cl-card-mode-menu-item__title"},w.createElement("p",{className:"cl-card-mode-menu-item__title_text"},r),w.createElement("p",{className:"cl-card-mode-menu-item__title_subtext"},a)))},mt=r("1A3b"),bt=r("M6Vg"),ft=r.n(bt),vt=r("lvpS"),Ot=r.n(vt),yt=r("Pevp"),gt=r.n(yt),Ct=(r("jIFO"),function(e){var t=e.onEditClick,r=e.close,a=e.count,n=e.setRef,o=Object(st.useDispatch)();return w.createElement("div",{className:"cl-card-mode-menu",ref:n},w.createElement(gt.a,{fill:"#fff",className:"cl-card-mode-menu__tail"}),w.createElement("div",{className:"cl-card-mode-menu__title"},mt.title()),w.createElement("div",null,w.createElement(ht,{iconComponent:w.createElement(ft.a,{className:"cl-card-mode-menu__icon"}),title:mt.cardsTitle({count:a}),description:mt.cardsDescription(),onClick:function(){r(),o(Object($.a)({mode:P.a}))}}),w.createElement(ht,{iconComponent:w.createElement(Ot.a,{className:"cl-card-mode-menu__icon"}),title:mt.seriesTitle({count:a}),description:mt.seriesDescription(),onClick:function(){r(),o(Object($.a)({mode:P.b}))}})),w.createElement("div",{className:"cl-card-mode-menu__button",onClick:t},mt.editSeries()))}),jt=r("W64T"),Et=r("wyFA"),wt=r.n(Et),_t=(r("F/w0"),function(){var e,t,r=w.useState(!1),a=r[0],n=r[1],o=Object(st.useDispatch)(),c=Object(et.a)(W.b),i=Object(et.a)(x.a),s=Object(et.a)(P.c),l=Object(M.a)(c)||0,p=Object(w.useState)(),u=p[0],d=p[1],h=Object(w.useRef)(),m=Object(w.useCallback)((function(e){e&&(h.current=e)}),[]),b=Boolean(c&&c.original_id),f=Object(U.a)(c),v=Boolean(i&&i===P.b),O=s&&!b&&!Object(V.a)(c)&&l>1,y=Object(J.a)(f),g=function(){o(Object(Ee.v)()),me.d.clickAuthorsPreviewSeriesEdit({sourceType:y})},C=function(){return n(!a)};return e=h,t=function(e){a&&u&&!u.contains(e.target)&&n(!1)},Object(w.useEffect)((function(){function r(r){e.current&&!e.current.contains(r.target)&&t(r)}return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}})),w.createElement("div",{className:Object(we.a)("cl-card-preview-header",{open:a})},O?w.createElement(w.Fragment,null,w.createElement(le.a,{className:"cl-card-preview-header__button",label:v?jt.seriesMode():jt.cardsMode({count:l}),buttonRef:d,ei:!0,shape:"round",type:"normal",size:"M",onClick:C,icon:!0,iconComponent:w.createElement(wt.a,{className:"button__icon button__icon_right",fill:"#000"})}),a&&w.createElement(Ct,{count:l,onEditClick:g,close:C,setRef:m})):w.createElement(le.a,{className:"cl-card-preview-header__button",label:jt.editSeries(),ei:!0,shape:"round",type:"normal",size:"M",onClick:g}))}),kt=r("Toh8"),Dt=(r("AFF7"),function(e){return w.createElement(kt.a,y()({className:"cl-card-preview-placeholder",picture:!0,title:!0,desc:!0},e))}),xt=r("5/dx");r.d(t,"a",(function(){return St}));var Pt=(lt=Object(k.a)(),pt=Object(k.a)(),ut=Object(k.a)(),dt=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).state={teaserPreview:{}},t}C()(t,e);var r=t.prototype;return r.onDescriptionChange=function(e,t){var r=this.props,a=r.dispatch;if(r.isCardsBulkMode&&void 0!==t){var n=Object(D.a)(this.props.card),o=this._selectedContents[t];if(o&&n&&n.content){var c=n.content,i=c.find((function(e){var t=e.id;return o.id===t}));i&&(i._description=e,a(Object(te.a)({value:{content:c}})))}}else a(Object(te.a)({value:{description:e}})),a(Object(ee.a)())},r.onClickClose=function(){(0,this.props.dispatch)(Object($.g)({}))},r.componentDidUpdate=function(e){var t=this;e.isCardsBulkMode!==this.props.isCardsBulkMode&&setTimeout((function(){return t._preview&&t._preview.scrollTo(0,0)}))},r.render=function(){var e,t=this,r=this.props,a=r.card,n=r.isAddRoute,o=r.showEditSeriesButton,c=Boolean(a&&a.task_id),i=Boolean(a&&a.id&&("current-card-temp"!==a.id||a.original_id));return e=i||c||!n?this.getContent({hasCardId:i}):w.createElement(Dt,null),w.createElement("div",{className:"add-column_preview",ref:function(e){return t._preview=e}},w.createElement(re.a,{onClick:this.onClickClose,base:!0}),o&&w.createElement(_t,null),e)},r.getPictureContents=function(){var e=this.props.card,t=e.selected_contents,r=e.content;return this._selectedContents=t.map((function(e){return r.find((function(t){var r=t.id;return e===r}))})),this._selectedContents},r.getContent=function(e){var t=this,r=e.hasCardId,a=this.props,n=a.isCardsBulkMode,o=a.selectedContentCount,c=a.card;return n?this.getPictureContents().map((function(e,a){return t.getTeaser({hasCardId:r,index:a,content:e,count:o})})):this.getTeaser({hasCardId:r,index:0,count:1,content:Object(U.a)(c)})},r.setTeaserPreviewRef=function(e){var t=this;return function(r){var a;r&&t.state.teaserPreview[e]!==r&&t.setState({teaserPreview:y()({},t.state.teaserPreview,(a={},a[e]=r,a))})}},r.getTeaser=function(e){var t=e.hasCardId,r=e.index,a=e.count,n=e.content,o=this.props,c=o.card,i=o.sourceType,s=o.hasThumbId,l=o.isCardLocked,p=o.isDisableEditing,u=o.isCardsBulkMode,d=o.showAvatarsPicture,h=o.autoFocus,m=o.openCardFromAdd,b=o.selectedContentCount,f=Object(z.a)(i),v=i===Q.a.BOOK,O=i===Q.a.LINK,y=i===Q.a.VIDEO,g=Object(V.a)(c),C=1===a?Object(B.a)(c):n._description,j=t&&(d||s)?w.createElement(Le.a,{cardId:c.id,preview:!0,isAdd:!0}):w.createElement(it,{showAvatarsPicture:d,content:n,selectedCount:b,index:1===a?void 0:r});return w.createElement(xt.a,{mod:"card",mods:{preview:!0,"preview-empty":!t||!(d||s),video:y,cover:v?[!0,"book"]:f,link:O,locked:l},key:r},w.createElement("div",{className:"add-teaser",ref:1===a?this.setTeaserPreviewRef(r):null},u?j:w.createElement(Pe,{openCardFromAdd:m},j),(t||g)&&w.createElement(Se.a,{cardId:c.id,wrapper:!0}),w.createElement(Me,{onChange:this.onDescriptionChange,disabled:p,teaser:this.state.teaserPreview[r],autoFocus:1===a&&h,description:C,index:r})))},t}(w.Component),E()(dt.prototype,"onDescriptionChange",[lt],Object.getOwnPropertyDescriptor(dt.prototype,"onDescriptionChange"),dt.prototype),E()(dt.prototype,"onClickClose",[pt],Object.getOwnPropertyDescriptor(dt.prototype,"onClickClose"),dt.prototype),E()(dt.prototype,"setTeaserPreviewRef",[ut],Object.getOwnPropertyDescriptor(dt.prototype,"setTeaserPreviewRef"),dt.prototype),dt),St=Object(_.a)((function(e,t){var r=t.isEditAction,a=Object(W.b)(e),n=Object(U.a)(a),o=Object(J.a)(n),c=Boolean(Object(q.a)(n)),i=Boolean(n&&n.source&&(n.source.thumb_id||n.source.thumb_link)),s=A(a)!==Z.a.PLACEHOLDER&&c,l=Object(G.a)(e,X.a.ADD_FLOW),p=a&&Object(K.a)(e,a),u=a&&"current-card-temp"===a.id&&!a.original_id,d=!r&&Object(H.a)(e),h=p||u,m=a&&Boolean(a.competitions),b=!l&&o===Q.a.IMAGE&&h&&!d&&!m,f=Object(M.a)(a)||0,v=Object(x.a)(e),O=Object(N.a)(a),y=Object(L.a)(e,O),g=Object(S.a)(e,O),C=Object(Y.a)(g);return{card:a,sourceType:o,isAddRoute:l,hasThumbId:i,showAvatarsPicture:s,isDisableEditing:!(h||y||C)||d,showEditSeriesButton:b,selectedContentCount:f,isCardLocked:a&&Object(R.a)(e,a.id),isCardsBulkMode:Boolean(v&&v===P.a)&&!Object(V.a)(a)}}))(Pt)},J3Be:function(e,t,r){},JDoN:function(e,t,r){},JKQB:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var a,n,o=r("VbXa"),c=r.n(o),i=r("U+yc"),s=r.n(i),l=r("cDcd"),p=r("LH8O");r("V5i1"),r("Yuug");var u=(a=Object(p.a)(),n=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).state={result:{valid:!0},isFirstRender:!0,errorMessage:void 0},t}c()(t,e);var r=t.prototype;return r.componentDidMount=function(){var e=this,t=this.props,r=t.value,a=t.children;this.state.isFirstRender&&!r||l.Children.map(a,(function(t){e.onChange(t.props)({target:{value:r}})}))},r.onChange=function(e){var t=this,r=this.props,a=r.validator,n=r.onValidate,o=r.validateWithThrottle;return function(r){var c=r.target.value,i=a(c);if(e.onChange(r),n&&n(i),t.setState({result:i,isFirstRender:!1}),i.message){var s=i.message();o?setTimeout((function(){t.setState({errorMessage:s})}),500):t.setState({errorMessage:s})}else i.valid&&t.setState({errorMessage:void 0})}},r.render=function(){var e=this,t=this.props.children,r=this.state,a=r.result.valid,n=r.errorMessage;return l.Children.map(t,(function(t){return l.createElement(l.Fragment,null,l.cloneElement(t,{onChange:e.onChange(t.props)}),l.createElement("div",{className:"validation-error"},!a&&n))}))},t}(l.Component),s()(n.prototype,"onChange",[a],Object.getOwnPropertyDescriptor(n.prototype,"onChange"),n.prototype),n)},Jdkk:function(e,t,r){},Jym4:function(e,t,r){},LnpB:function(e,t,r){"use strict";var a,n,o=r("pVnL"),c=r.n(o),i=r("VbXa"),s=r.n(i),l=r("U+yc"),p=r.n(l),u=r("cDcd"),d=r("JxqJ"),h=r("LH8O"),m=r("2qyN"),b=r("X4fP"),f=r("lPPs"),v=r("j1o0"),O=r("xFYi"),y=r("VRo3"),g=r("bphC"),C=r("HpZU"),j=r("m2PT"),E=r("7/cf"),w=r("Wopx"),_=r("7JBc"),k=r("ukm6"),D=r("84fb"),x=r("gLBg"),P=r("hFHJ"),S=r("SDCS"),L=r("BCLc"),N=r("nAK0"),T=r("riXN"),I=r("GhlN"),F=r("q5W4"),A=r("1R8C"),B=r("8/83"),R=r("EvZm"),U=r("6ga4");r("EFl1"),r("Y0jL");var M,W,V,H,K,z,q,J,G,Y=(a=Object(h.a)(),n=function(e){function t(t){var r=e.call(this,t)||this;return r.state={checked:Boolean(t.checked)},r}s()(t,e);var r=t.prototype;return r.onChange=function(){var e=!this.state.checked;this.setState({checked:e}),this.props.onChange&&this.props.onChange(e)},r.render=function(){var e=this.props,t=e.title,r=e.icon,a=e.disabled,n=e.children,o=e.props,i=this.state.checked;return u.createElement("button",c()({className:Object(U.a)("cl-checkbox",{theme:"normal",checked:i,icon:r,disabled:a}),onClick:this.onChange},o),u.createElement("span",{className:"cl-checkbox__box"}),u.createElement("span",{className:"cl-checkbox__label"},t),n)},t}(u.Component),p()(n.prototype,"onChange",[a],Object.getOwnPropertyDescriptor(n.prototype,"onChange"),n.prototype),n),Z=r("CC2E"),Q=r("3elJ"),X=(M=Object(h.a)(),W=function(e){function t(){return e.apply(this,arguments)||this}s()(t,e);var r=t.prototype;return r.openCoauthors=function(){var e=this.props,t=e.dispatch,r=e.counter;t(Object(P.e)()).then((function(){t(Object(Z.a)({counter:r}))}))},r.render=function(){var e=this.props.className;return u.createElement(R.a,{size:"M",ei:!0,type:"normal",icon:!0,iconMods:{"coauthor-24x24":!0},className:e,label:Q.openCoauthors(),onClick:this.openCoauthors,props:{}})},t}(u.Component),p()(W.prototype,"openCoauthors",[M],Object.getOwnPropertyDescriptor(W.prototype,"openCoauthors"),W.prototype),W),$=Object(d.b)()(X),ee=r("9nmH");r("T4fb"),r.d(t,"a",(function(){return re})),r("PmZa");var te=(V=Object(h.a)(),H=Object(h.a)(),K=Object(h.a)(),z=Object(h.a)(),q=Object(h.a)(),J=Object(h.a)(),G=function(e){function t(t){var r=e.call(this,t)||this,a=t.title,n=t.description,o=t.isPrivate,c=t.isWishlist;return r.state={title:a||"",description:n||"",isPrivate:Boolean(o),isWishlist:Boolean(c),validation:{}},r}s()(t,e);var r=t.prototype;return r.onChange=function(e){var t=this,r=this.props.setDirtyForm;return function(a){var n;t.setState(((n={})[e]=a.target.value,n)),r&&r()}},r.onCheckChange=function(e){var t=this,r=this.props.setDirtyForm;return function(a){var n;"isPrivate"===e?N.d.clickAuthorsCollectionPrivate():"isWishlist"===e&&N.d.clickAuthorsCollectionWishlist(),t.setState(((n={})[e]=a,n)),r&&r()}},r.getBoardData=function(){var e=this.state;return{title:e.title,description:e.description,is_private:e.isPrivate,is_wishlist:e.isWishlist}},r.onValidate=function(e){var t=this;return function(r){var a=r.valid;t.setState((function(t){var r;return{validation:c()({},t.validation,(r={},r[e]=a,r))}}))}},r.isBoardValid=function(){var e=this.state.validation,t=e.title,r=e.description;return t&&!1!==r},r.onSave=function(){if(this.isBoardValid()){var e=this.getBoardData(),t=this.props,r=t.isUserUnverified,a=t.retpath,n=t.onSaveClick,o=t.dispatch;r&&!e.is_private?o(Object(P.e)()).then((function(){o(Object(S.a)({place:"create_board",retpath:a}))})):(o(Object(L.a)(e)),n(e))}},r.render=function(){var e=this.state,t=e.title,r=e.description,a=e.isPrivate,n=e.isWishlist,o=this.props,c=o.hasCoauthors,i=o.isOwner,s=o.isProfileCompanyParticipant,l=o.isBanned,p=void 0!==l&&l,d=o.saveLabel,h=o.backLabel,m=o.footer,b=o.hideBack,f=o.removeCollection,v=o.showCoauthorButton,O=o.disableFocus,y=!this.isBoardValid();return u.createElement(u.Fragment,null,u.createElement("div",{className:Object(I.a)("cl-board-form",{footer:m})},u.createElement(F.a,{value:t,focused:!O,label:ee.boardTitleTitle(),placeholder:ee.titlePlaceholder(),validator:j.a,onChange:this.onChange("title"),onValidate:this.onValidate("title")}),u.createElement(A.a,{value:r,label:ee.boardDescriptionTitle(),placeholder:ee.descriptionPlaceholder(),validator:C.a,onChange:this.onChange("description"),onValidate:this.onValidate("description")}),u.createElement(Y,{title:c&&i?ee.privateCoauthorsLabel():ee.privateLabel(),checked:a||p,disabled:p||s,onChange:this.onCheckChange("isPrivate"),icon:!0,props:{}},u.createElement("i",{className:"board-list__icon-padlock"}),p&&u.createElement("span",{className:"cl-board-form__description"},ee.banDescription())),u.createElement(Y,{title:ee.wishlistLabel(),checked:n,disabled:s,onChange:this.onCheckChange("isWishlist"),icon:!0,props:{}},u.createElement("i",{className:"board-list__icon-giftbox"}),u.createElement("span",{className:"cl-board-form__description"},ee.wishlistDescription())),v&&i&&u.createElement($,null),!m&&u.createElement(R.a,{size:"M",type:"action",ei:!0,disabled:y,label:Boolean(d)?d:ee.createLabel(),onClick:this.onSave})),m&&u.createElement(B.a,{label:d||ee.createLabel(),backLabel:h,onClick:this.onSave,hideBack:b||s,mods:{border:!0},actionType:y?"normal":"action",removeCollection:f,showCoauthorButton:v&&i}))},t}(u.Component),p()(G.prototype,"onChange",[V],Object.getOwnPropertyDescriptor(G.prototype,"onChange"),G.prototype),p()(G.prototype,"onCheckChange",[H],Object.getOwnPropertyDescriptor(G.prototype,"onCheckChange"),G.prototype),p()(G.prototype,"getBoardData",[K],Object.getOwnPropertyDescriptor(G.prototype,"getBoardData"),G.prototype),p()(G.prototype,"onValidate",[z],Object.getOwnPropertyDescriptor(G.prototype,"onValidate"),G.prototype),p()(G.prototype,"isBoardValid",[q],Object.getOwnPropertyDescriptor(G.prototype,"isBoardValid"),G.prototype),p()(G.prototype,"onSave",[J],Object.getOwnPropertyDescriptor(G.prototype,"onSave"),G.prototype),G),re=Object(d.a)((function(e,t){var r=t.boardId,a=Object(w.a)(e),n=Object(D.a)(e),o=Object(E.b)(e),c=o&&o.original_id,i=Object(_.a)(e),s=c?Object(x.k)(c):i,l=n?T.a.getRetpathUrl(a,s):void 0,p=Object(k.a)(e).currentBoard||{},u=p.title,d=void 0===u?"":u,h=p.description,C=void 0===h?"":h,j=p.is_private,P=void 0!==j&&j,S=p.is_wishlist,L=void 0!==S&&S;if(r){var N=Number(Object(b.a)(e,r))>0,I=Object(g.a)(e,r);return{title:d||Object(f.a)(e,r),description:C||Object(m.a)(e,r),isPrivate:P||Object(O.a)(e,r),isWishlist:L||Object(y.a)(e,r),isBanned:Object(v.a)(e,r),hasCoauthors:N,isOwner:I,isUserUnverified:n,retpath:l}}return{title:t.title||d,description:C,isPrivate:P,isWishlist:L,isUserUnverified:n,retpath:l}}))(te)},M0w2:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("2WP6");function n(e,t){return(Object(a.a)(e)||{})[t]}},M6Vg:function(e,t,r){var a=r("cDcd");function n(e){return a.createElement("svg",e,[a.createElement("rect",{x:"26",width:"40",height:"52",rx:"3",fill:"#76B3F9",key:0}),a.createElement("path",{opacity:".15",d:"M26 35h40v14a3 3 0 01-3 3H29a3 3 0 01-3-3V35z",fill:"#fff",key:1}),a.createElement("rect",{x:"12",y:"9",width:"40",height:"52",rx:"3",fill:"#2A87F2",key:2}),a.createElement("path",{opacity:".15",d:"M12 44h40v14a3 3 0 01-3 3H15a3 3 0 01-3-3V44z",fill:"#fff",key:3}),a.createElement("rect",{y:"18",width:"40",height:"52",rx:"3",fill:"#0065D9",key:4}),a.createElement("path",{opacity:".15",d:"M0 53h40v14a3 3 0 01-3 3H3a3 3 0 01-3-3V53z",fill:"#fff",key:5})])}n.defaultProps={width:"66",height:"71",fill:"none"},e.exports=n,n.default=n},OLcw:function(e,t,r){},ORuK:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r("vjVR"),n="Enter";function o(e){return!!e&&(e.key===n||e.keyCode===a.b)}},OlFL:function(e,t,r){},"P/1b":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r("Ot8I"),n=r("6huc"),o=r("LyO5"),c=r("Hxdx"),i=r("82Jb");function s(e){var t=Object(o.a)(e),r=Object(a.b)(e,{size:"s375"});return r&&Object(n.a)(e)!==i.a.PLACEHOLDER?r:t&&t.preview?t.preview:Object(c.a)(e)}},Pevp:function(e,t,r){var a=r("cDcd");function n(e){return a.createElement("svg",e,a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 7.322H0l.856-.139c1.521-.248 2.906-.95 3.933-1.992L9.027.884c.722-.734 1.968-.8 2.782-.148a865.82 865.82 0 014.39 4.443c1.01 1.027 2.368 1.723 3.862 1.981l.939.162z"}))}n.defaultProps={width:"21",height:"8",viewBox:"0 0 21 8"},e.exports=n,n.default=n},PmZa:function(e,t,r){},Q04d:function(e,t,r){var a=r("C4oF").translateWrapper,n=r("YU6D").Utils.escapeExpression;e.exports=a({title:"Название товара",price:"Цена",description:"Описание",descriptionPlaceholder:"Подробное описание товара",source:"Ссылка на сайт",save:"Save changes",add:"Добавить товар",next:"Далее",photos:"Фотографии",photosFrom:function(e){return"Показать картинки с "+n(e.domain)},removePhotosFrom:function(e){return"Удалить картинки с "+n(e.domain)},incorrectTitle:"В названии товара должна быть хотя бы одна буква или цифра",emptyTitle:"Придумайте название для вашего товара",longTitle:"Название не может быть таким длинным",incorrectUrl:"Введите корректный адрес страницы",onboardingChatTitle:"Включите чат, чтобы покупатели смогли с вами связаться",onboardingChatSubtitle:"На страницах вашего профиля, коллекций и карточек появится кнопка чата с вами"})},"QY/0":function(e,t,r){},"Qme+":function(e,t,r){var a=r("cDcd");function n(e){return a.createElement("svg",e,a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 3C4 1.34315 5.34315 0 7 0H9C10.6569 0 12 1.34315 12 3H14C14.5523 3 15 3.44772 15 4C15 4.55228 14.5523 5 14 5H13.3462L12.6065 14.615C12.5464 15.3965 11.8948 16 11.111 16H4.88905C4.10524 16 3.45358 15.3965 3.39347 14.615L2.65385 5H2C1.44772 5 1 4.55228 1 4C1 3.44772 1.44772 3 2 3H4ZM5.58554 5.95092C5.14502 5.98498 4.81554 6.3697 4.8496 6.81022L5.27529 12.3148C5.30936 12.7554 5.69408 13.0848 6.13459 13.0508C6.57511 13.0167 6.9046 12.632 6.87053 12.1915L6.44484 6.68685C6.41077 6.24634 6.02605 5.91685 5.58554 5.95092ZM9.55476 6.69202C9.58883 6.25151 9.97355 5.92202 10.4141 5.95609C10.8546 5.99015 11.1841 6.37488 11.15 6.81539L10.7252 12.3082C10.6912 12.7487 10.3064 13.0782 9.86592 13.0441C9.42541 13.0101 9.09592 12.6253 9.12998 12.1848L9.55476 6.69202ZM7 2C6.44772 2 6 2.44772 6 3H10C10 2.44772 9.55229 2 9 2H7Z",fill:"black"}))}n.defaultProps={width:"16",height:"16",fill:"#000"},e.exports=n,n.default=n},S4QV:function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({title:"Если изменить адрес, то загруженные ранее картинки с текущего адреса будут удалены",cancelLabel:"Не менять адрес",confirmLabel:"Изменить"})},Sipo:function(e,t,r){var a=r("C4oF").translateWrapper,n=r("YU6D").Utils.escapeExpression;e.exports=a({addToSerial:"Add several images",makeCover:"Use as cover",cover:"Cover",imageCounter:function(e){return n(e.current)+" of "+n(e.total)}})},T1Tg:function(e,t,r){var a=r("C4oF").translateWrapper,n=r("cDcd"),o=r("9TW5").e,c=r("9TW5").er,i=r("9TW5").f,s=r("9TW5").fr;e.exports=a({description:{v:"To upload images,<br>drag and drop them to this page or",r:function(e){return n.createElement(n.Fragment,null,"To upload images,",n.createElement("br",{}),"drag and drop them to this page or")},h:function(e){return(this.isRestored?s:i)(["To upload images,",(this.isRestored?c:o)("br","",{},[],{view:this}),"drag and drop them to this page or"])}},inputLabel:"Upload images from your computer",inputLabelDevice:"Загрузите картинки с устройства"})},T4fb:function(e,t,r){},TjeA:function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({saved:"Saved to this collection"})},UjgB:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var a=r("cDcd"),n=r("zARl"),o=r("6ga4"),c=function(e){var t=e.title,r=e.thumb,c=e.onClick,i={};return r&&(i.backgroundImage="url("+r+")"),a.createElement("div",{className:"board-list__item",onClick:function(){return c(t)}},a.createElement("div",{className:Object(o.a)("board-list__thumb",{empty:!r,create:!0}),style:i},a.createElement("i",{className:"board-list__plus"})),a.createElement("div",{className:"board-list__title"},a.createElement("div",{className:"board-list__title-wrap"},a.createElement("span",{className:"board-list__title-text board-list__title-text_bold"},t||n.newCollection())),t&&a.createElement("div",{className:"board-list__title-caption"},n.newCollection())))}},V5i1:function(e,t,r){},VqUl:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r("cDcd"),n=r("JKQB"),o=r("GhlN"),c=r("Yqew");r("CyAQ");var i=function(e){e.e2eLabel;var t=e.value,r=e.htmlFor,i=e.label,s=e.validator,l=e.onValidate,p=e.validateWithThrottle,u=e.children;return a.createElement("div",{className:Object(o.a)("cl-add-form-element",{bottom:!Boolean(s)})},a.createElement(c.a,{htmlFor:r,label:i}),s?a.createElement(n.a,{value:t,validator:s,onValidate:l,validateWithThrottle:p},u):u)}},W64T:function(e,t,r){var a=r("C4oF").translateWrapper,n=r("YU6D").Utils.escapeExpression;e.exports=a({editSeries:"Добавить несколько картинок",seriesMode:"Карточка-серия",cardsMode:[function(e){return n(e.count)+" card"},function(e){return n(e.count)+" cards"}]})},WxY5:function(e,t,r){"use strict";r.d(t,"b",(function(){return p})),r.d(t,"a",(function(){return u}));var a=r("56Ik"),n=r("HVa/"),o=r("785c"),c=r("7Jbl"),i=r("w48H"),s=r("hFHJ"),l=r("VDDL"),p=n.b.action(),u=n.b.action(),d=a.a.point(o.c.PROFILE_SETTINGS);n.b.link(n.a,d,p),n.b.link(d,n.a,s.e,c.a),n.b.link(d,n.a,s.g,c.a),n.b.link(d,n.a,u,Object(l.a)([i.a,c.a])),n.b.link(d,n.a,s.b,c.a)},Y0jL:function(e,t,r){},YTPY:function(e,t,r){},Yqew:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r("pVnL"),n=r.n(a),o=r("cDcd"),c=r("GhlN");r("/WWM");var i=function(e){e.e2eLabel;var t=e.htmlFor,r=e.label,a=e.mods,i=e.onClick;return o.createElement("label",n()({className:Object(c.a)("cl-add-form-label",a)},t?{htmlFor:t}:{},{onClick:i}),r)}},Yuug:function(e,t,r){},Z5kG:function(e,t,r){},ZYMi:function(e,t,r){},ZmFz:function(e,t,r){},ZnC7:function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({title:"Удалить картинку из серии?",cancelLabel:"Отмена",confirmLabel:"Удалить"})},"Zz/2":function(e,t,r){},aZDG:function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({title:"Add collection",editTitle:"Edit collection",save:"Add collection",update:"Save changes",cancel:"Отмена"})},b65a:function(e,t,r){},"c+Bi":function(e,t,r){"use strict";var a,n,o,c,i,s=r("pVnL"),l=r.n(s),p=r("VbXa"),u=r.n(p),d=r("U+yc"),h=r.n(d),m=r("cDcd"),b=r("JxqJ"),f=r("LH8O"),v=r("6ga4"),O=r("om3R"),y=r("7/cf"),g=r("Ot8I"),C=r("UoCc"),j=r("W+cT"),E=r("x9gI"),w=r("POJF"),_=r("6huc"),k=r("P/1b"),D=r("dEsh"),x=r("+wVo"),P=r("+r4z"),S=r("MTjZ"),L=r("RouB"),N=r("Ryll"),T=r("c+Ap"),I=r("82Jb"),F=r("ICaW"),A=r("gLBg"),B=r("nAK0"),R=r("GhlN"),U=r("0G42"),M=function(e){var t=e.mods,r=e.text,a=void 0===r?U.offline():r;return m.createElement("div",{className:Object(R.a)("board-list__intro",t)},a)},W=r("yiA1"),V=r("UjgB"),H=r("jArb"),K=r("3G3r");r.d(t,"a",(function(){return J}));var z=!1,q=(a=Object(f.a)(),n=Object(f.a)(),o=Object(f.a)(),c=Object(f.a)(),i=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).state={query:"",wrapper:null},t}u()(t,e);var r=t.prototype;return r.setQuery=function(e){this.setState({query:e.target.value})},r.inputSearchClick=function(){B.d.clickCollectionSearch(l()({},this.props.counter))},r.setWrapperRef=function(e){var t=this.state.wrapper;t&&t===e||this.setState({wrapper:e})},r.onCreateClick=function(e){var t=this.props,r=t.onNewClick,a=(t.usePassport,t.isUserAuthorized);t.dispatch,a&&r(e)},r.componentDidUpdate=function(){var e=this.props,t=e.isAddRoute,r=e.boards,a=e.hasQueue;t&&r&&r.length&&!z&&!a&&(z=!0,window.Ya&&Ya.Rum&&Ya.Rum.sendTimeMark(N.a.BOARDS_READY))},r.render=function(){for(var e=this.props,t=e.boards,r=e.storeKey,a=e.cardUrl,n=e.isUserAuthorized,o=e.hasQueue,c=e.shouldDisableList,i=e.showFilter,s=e.showLocalCollection,l=e.itemClass,p=e.forcePlaceholder,u=e.isOffline,d=e.isLocalCollectionSelected,h=e.scrollWrapper,b=(e.isFullyLoaded,this.state.query),f=void 0===b?"":b,O=!p&&t&&t.length>0?1:5,y=[],g=0;g<O;g++)y.push(m.createElement(W.a,{key:g,isLoading:!0}));var C,j=n||s,E=t&&t.length?Math.min(3,t.length)-1:0;return C=u||p?null:m.createElement(m.Fragment,null,i&&m.createElement("div",{className:"board-list__search"},m.createElement(K.a,{onChange:this.setQuery,onClick:this.inputSearchClick,text:f})),j&&m.createElement(V.a,{title:f,onClick:this.onCreateClick,thumb:a}),d&&null,t&&t.map((function(e,t){var r=e.id;return m.createElement(m.Fragment,{key:r},m.createElement(l,{boardId:r,query:f,hasQueue:o}),!d&&t===E&&null)}))),m.createElement("div",{className:"board-list_wrapper"},m.createElement("div",{className:Object(v.a)("board-list",{disabled:c||o}),ref:this.setWrapperRef},u?m.createElement(m.Fragment,null,null,m.createElement(M,null)):m.createElement(m.Fragment,null,m.createElement(H.a,{wrapper:this.state.wrapper,scrollWrapper:h,customProp:f,itemsKey:r,loader:y,forcePlaceholder:Boolean(p)},C),void 0)))},t}(m.Component),h()(i.prototype,"setQuery",[a],Object.getOwnPropertyDescriptor(i.prototype,"setQuery"),i.prototype),h()(i.prototype,"inputSearchClick",[n],Object.getOwnPropertyDescriptor(i.prototype,"inputSearchClick"),i.prototype),h()(i.prototype,"setWrapperRef",[o],Object.getOwnPropertyDescriptor(i.prototype,"setWrapperRef"),i.prototype),h()(i.prototype,"onCreateClick",[c],Object.getOwnPropertyDescriptor(i.prototype,"onCreateClick"),i.prototype),i),J=Object(b.b)((function(e,t){var r,a=Object(y.b)(e),n=Object(O.a)(a),o=Object(S.a)(e),c=Object(P.a)(e)===A.a.ADD_FLOW;r=Object(D.a)(n)&&Object(_.a)(n)!==I.a.PLACEHOLDER?Object(g.b)(n,{size:"smart56"}):Object(k.a)(n);var i=1===Object(x.a)(e,"local_collection"),s=1===Object(x.a)(e,"use_passport_auth"),l=Object(C.a)(e,t.storeKey)||0,p=Object(j.a)(e,t.storeKey),u=!1===navigator.onLine,d=Number(Object(E.a)(e,F.d.COLLECTIONS_DESKTOP_ADD_BOARD_SEARCH))||T.I;return{boards:p,showFilter:Boolean(l)&&l>d,isUserAuthorized:Object(L.a)(o),isLocalCollectionSelected:Boolean(void 0),isAddRoute:c,showLocalCollection:i,cardUrl:r,usePassport:s,isOffline:u,isFullyLoaded:Object(w.a)(e,t.storeKey)}}))(q)},cG1V:function(e,t,r){},cgbR:function(e,t,r){var a=r("cDcd");function n(e){return a.createElement("svg",e,a.createElement("path",{d:"M10 8V0H8v8H0v2h8v8h2v-8h8V8h-8z"}))}n.defaultProps={width:"18",height:"18",viewBox:"0 0 18 18"},e.exports=n,n.default=n},dW9n:function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({back:"Back",selectAll:"Выбрать все",reset:"Сбросить выбранное",removeCollection:"Delete collection"})},e5iJ:function(e,t,r){"use strict";r.d(t,"a",(function(){return E}));var a,n,o,c,i,s,l,p=r("pVnL"),u=r.n(p),d=r("VbXa"),h=r.n(d),m=r("U+yc"),b=r.n(m),f=r("cDcd"),v=r("JxqJ"),O=r("LH8O"),y=r("6ga4"),g=r("Z0W1"),C=r("c+Ap"),j=(a=Object(O.a)(),n=Object(O.a)(),o=Object(O.a)(),c=Object(O.a)(),i=Object(O.a)(),s=Object(O.a)(),l=function(e){function t(t){var r=e.call(this,t)||this;r.focused=!1;var a=t.rows,n=void 0===a?1:a,o=t.focusRows,c=void 0===o?1:o,i=t.minRows,s=void 0===i?1:i;return r.state={rows:n,minRows:s,focusRows:c,paddingHeight:0,elementRows:s},r}h()(t,e);var r=t.prototype;return r.componentDidMount=function(){this.focused=this.props.focused,this.focused&&this.selectText(),setTimeout(this.initResizer)},r.componentDidUpdate=function(e){this.props.value!==e.value&&this.onResize(),e.focused!==this.props.focused&&this.element&&(this.focused=this.props.focused,this.focused?this.selectText():this.element.blur())},r.selectText=function(){if(this.props.focused&&this.element){var e=this.element.value.length,t=this.props.selectText?0:e;this.element.focus(),this.element.setSelectionRange(t,e),this.element.scrollTop=this.element.scrollHeight}},r.onFocus=function(e){var t=this.props.onFocus;t&&t(e),this.onResize()},r.onBlur=function(e){if(!this.focused){var t=this.props.onBlur;t&&t(e)}},r.onChange=function(e){var t=this.props.onChange;t&&t(e)},r.onKeyUp=function(e){var t=this.props.onKeyUp;t&&t(e)},r.initResizer=function(){var e=this.clone;if(e){var t=getComputedStyle(e),r=t.lineHeight,a=t.paddingTop,n=t.paddingBottom,o=/\d+px/;if(r&&a&&n&&o.test(r)&&o.test(a)&&o.test(n))this.setState({lineHeight:parseInt(r),paddingHeight:parseInt(a)+parseInt(n)});else{e.value="",e.rows=1;var c=e.scrollHeight;e.rows=2;var i=e.scrollHeight-c;this.setState({lineHeight:i,paddingHeight:c-i});var s=this.props,l=s.rows,p=s.value;e.rows=l||1,e.value=p}this.onResize()}},r.onResize=function(){var e=this.state,t=e.lineHeight,r=e.paddingHeight,a=e.focusRows,n=e.minRows;if(t){var o=this.clone,c=this.props,i=c.maxRows,s=void 0===i?1/0:i,l=c.value,p=c.isIE;if(o){o.value=l;var u=Math.ceil((o.scrollHeight-r)/t),d=Math.max(Math.min(u,s),n)+(l&&u>=n?a:0);this.setState({elementRows:d+(p?1:0)})}}},r.render=function(){var e=this,t=this.props,r=t.id,a=t.mods,n=t.className,o=t.style,c=t.focused,i=t.disabled,s=t.value,l=t.placeholder,p=t.maxLength,d=t.onClick,h=t.setRef,m=this.state.elementRows;return this.props["data-e2e"],f.createElement("span",{className:Object(y.a)("textarea",u()({},a,{state:!!s&&"filled"}),n)},f.createElement("textarea",{className:"textarea__textarea textarea__textarea_clone "+(n?n+"__textarea":""),rows:1,tabIndex:-1,"aria-hidden":"true",ref:function(t){return e.clone=t}}),f.createElement("textarea",{className:"textarea__textarea textarea__textarea_original "+(n?n+"__textarea":""),id:r,style:o,autoFocus:c,disabled:i,value:s,placeholder:l,spellCheck:!C.w,maxLength:p,rows:m,onBlur:this.onBlur,onChange:this.onChange,onClick:d,onFocus:this.onFocus,onKeyUp:this.onKeyUp,ref:function(t){h&&h(t),e.element=t}}))},t}(f.PureComponent),b()(l.prototype,"selectText",[a],Object.getOwnPropertyDescriptor(l.prototype,"selectText"),l.prototype),b()(l.prototype,"onFocus",[n],Object.getOwnPropertyDescriptor(l.prototype,"onFocus"),l.prototype),b()(l.prototype,"onBlur",[o],Object.getOwnPropertyDescriptor(l.prototype,"onBlur"),l.prototype),b()(l.prototype,"onChange",[c],Object.getOwnPropertyDescriptor(l.prototype,"onChange"),l.prototype),b()(l.prototype,"onKeyUp",[i],Object.getOwnPropertyDescriptor(l.prototype,"onKeyUp"),l.prototype),b()(l.prototype,"initResizer",[s],Object.getOwnPropertyDescriptor(l.prototype,"initResizer"),l.prototype),l),E=Object(v.a)((function(e){return{isIE:"MSIE"===Object(g.a)(e).BrowserName}}))(j)},e6f9:function(e,t,r){"use strict";function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}r.d(t,"a",(function(){return a}))},eV9q:function(e,t,r){},ectj:function(e,t,r){},fRdb:function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({back:"Назад"})},gtY4:function(e,t,r){var a=r("C4oF").translateWrapper,n=r("cDcd"),o=r("9TW5").e,c=r("9TW5").er,i=r("9TW5").f,s=r("9TW5").fr;e.exports=a({imageTitle:"Paste page URL",linkTitle:"Paste URL",actionTitle:"Далее",notificationInputUrl:"Введите адрес страницы",mobileNotificationImageInputUrl:"Введите адрес страницы с картинками",desktopNotificationImageInputUrl:{v:"Для сохранения картинок со страницы<br>в интернете, нужно ввести адрес страницы",r:function(e){return n.createElement(n.Fragment,null,"Для сохранения картинок со страницы",n.createElement("br",{}),"в интернете, нужно ввести адрес страницы")},h:function(e){return(this.isRestored?s:i)(["Для сохранения картинок со страницы",(this.isRestored?c:o)("br","",{},[],{view:this}),"в интернете, нужно ввести адрес страницы"])}},searchPlaceholder:"Например, https://yandex.ru",searchInImages:"Перейти к результатам поиска в Яндекс.Картинках"})},h28l:function(e,t,r){},jArb:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var a,n,o,c=r("W8MJ"),i=r.n(c),s=r("VbXa"),l=r.n(s),p=r("U+yc"),u=r.n(p),d=r("cDcd"),h=r("JxqJ"),m=r("LH8O"),b=r("BrWi"),f=r("1ZVK"),v=r("HtIP"),O=r("POJF"),y=r("pnMn"),g=r("7r1C"),C=r("qTqY"),j=r("plYr"),E=r("W+cT"),w={passive:!0,capture:!1},_=(a=Object(m.a)(),n=Object(b.a)(50),o=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this)._fetchInProgress=!1,t._failureFetchRequest=!1,t}l()(t,e);var r=t.prototype;return r.componentDidMount=function(){var e=this;this._isMounted=!0,this.attachScrollListener(),this.checkPosition(),setTimeout((function(){return e.checkPosition()}),100)},r.componentDidUpdate=function(){this.scrollTop!==this._scrollTop&&window.scrollTo(0,this._scrollTop),this.attachScrollListener(),this.checkPosition()},r.componentWillUnmount=function(){this._isMounted=!1,this.removeScrollListener()},r.getSnapshotBeforeUpdate=function(){return this._scrollTop=this.scrollTop,this.removeScrollListener(),null},r.render=function(){var e=this,t=this.props,r=t.children,a=t.className,n=t.isLoading,o=t.isFullyLoaded,c=t.loader,i=t.spinnerClass,s=t.spinnerSize,l=t.spinnerType,p=t.spinnerGif,u=t.forcePlaceholder;return t.itemsKey,d.createElement("div",{className:a,ref:function(t){e._scrollElement=t}},r,c?n&&!o||u?c:null:d.createElement("div",{className:o?i+" hidden":i},d.createElement(v.a,{size:s,type:l,gif:p})))},r.attachScrollListener=function(){if(!this.props.isFullyLoaded){var e=this.props,t=e.wrapper,r=e.scrollWrapper;!t&&r&&(t=document.querySelector(r)),this._scrollWrapper=t||window,this._scrollWrapper.addEventListener("scroll",this.onScroll,w)}},r.removeScrollListener=function(){this._scrollWrapper&&this._scrollWrapper.removeEventListener("scroll",this.onScroll,w.capture)},r.onScroll=function(){this.throttledOnScroll()},r.throttledOnScroll=function(){this.checkPosition()},r.checkPosition=function(){if(this._scrollElement){var e=this._scrollElement.offsetHeight,t=this.scrollTop+window.innerHeight,r=e+this.scrollElementTop,a=this.props,n=a.items,o=a.isFullyLoaded;(!(n&&n.length||o)||0!==e)&&r-t<600&&this.fetchNextPage()}},r.fetchNextPage=function(){var e=this;this._fetchInProgress||this.props.isFullyLoaded||this._failureFetchRequest&&!this.props.isOnline||(this._fetchInProgress=!0,Object(j.a)((function(){return e.props.dispatch(Object(f.a)({storeKey:e.props.itemsKey,limit:e.props.limit}))})).then((function(){e._failureFetchRequest=!1}),(function(t){console.error(t),e._failureFetchRequest=!0})).then((function(){e._fetchInProgress=!1,setTimeout((function(){e._isMounted&&e.checkPosition()}),50)})))},i()(t,[{key:"scrollTop",get:function(){return this._scrollWrapper&&this._scrollWrapper!==window?this._scrollWrapper.scrollTop:Object(y.a)()}},{key:"scrollElementTop",get:function(){var e=this;if(void 0===this._scrollElementTop){var t=function(r){if(!r)return 0;if("offsetParent"in document.body)return r.offsetTop+t(r.offsetParent);var a=r.ownerDocument,n=a.documentElement.clientTop||a.body.clientTop||0;return r.getBoundingClientRect().top+e.scrollTop-n};this._scrollElementTop=t(this._scrollElement)}return this._scrollElementTop}}]),t}(d.Component),u()(o.prototype,"onScroll",[a],Object.getOwnPropertyDescriptor(o.prototype,"onScroll"),o.prototype),u()(o.prototype,"throttledOnScroll",[n],Object.getOwnPropertyDescriptor(o.prototype,"throttledOnScroll"),o.prototype),o),k=Object(h.a)((function(e,t){var r=t.itemsKey;return{items:Object(E.a)(e,r),isLoading:Object(C.a)(e,r),isFullyLoaded:Object(O.a)(e,r),isOnline:Object(g.a)(e)}}))(_)},jIFO:function(e,t,r){},jMNR:function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({addSerialTitle:"Select images",chooseCollection:"Select collection",addToCollection:"Add to collection",next:"Далее"})},kC0a:function(e,t,r){},luvV:function(e,t,r){},lvpS:function(e,t,r){var a=r("cDcd");function n(e){return a.createElement("svg",e,[a.createElement("rect",{width:"52",height:"68",rx:"3",fill:"#0065D9",key:0}),a.createElement("path",{opacity:".15",d:"M0 48h52v17a3 3 0 01-3 3H3a3 3 0 01-3-3V48z",fill:"#fff",key:1}),a.createElement("circle",{cx:"19",cy:"42",r:"2",fill:"#fff",key:2}),a.createElement("circle",{cx:"26",cy:"42",r:"2",fill:"#76B3F9",key:3}),a.createElement("circle",{cx:"33",cy:"42",r:"2",fill:"#76B3F9",key:4})])}n.defaultProps={width:"52",height:"69",fill:"none"},e.exports=n,n.default=n},mS86:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r("pVnL"),n=r.n(a),o=r("cDcd"),c=r("6ga4"),i=r("EvZm"),s=(r("1GvB"),function(e){var t=e.className,r=e.disabled,a=e.multiple,s=e.onChange;return o.createElement(i.a,n()({},e,{className:Object(c.a)("cl-button-upload",{},t),tagName:"span",props:n()({},e.props)}),o.createElement("input",{className:"cl-button-upload__input",type:"file",accept:"image/*",disabled:r,multiple:a,onChange:s}))})},ofe4:function(e,t,r){},pbmY:function(e,t,r){},pi52:function(e,t,r){},q5W4:function(e,t,r){"use strict";var a,n,o,c,i,s=r("VbXa"),l=r.n(s),p=r("cDcd"),u=r("U+yc"),d=r.n(u),h=r("LH8O"),m=r("6ga4");r("x2xq"),r("OlFL");var b=(a=Object(h.a)(),n=Object(h.a)(),o=Object(h.a)(),c=Object(h.a)(),i=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).state={focused:!1},t}l()(t,e);var r=t.prototype;return r.componentDidMount=function(){var e=this;this.props.focused&&setTimeout((function(){e.input&&e.input.focus()}),200)},r.setFocus=function(e){var t=this;return function(){t.setState({focused:e})}},r.onKeyUp=function(e){var t=this.props.onKeyUp;t&&t(e)},r.forceValidate=function(){this.input&&this.props.onChange({target:this.input})},r.onClear=function(){var e=this.props.onClear;e&&e()},r.render=function(){var e=this,t=this.props,r=t.value,a=t.placeholder,n=t.mods,o=t.id,c=t.currency,i=t.width,s=t.disabled,l=t.hasClear;return p.createElement("div",{className:Object(m.a)("cl-form-input",n),style:{width:i}},p.createElement("span",{className:Object(m.a)("cl-form-input__title",{focus:this.state.focused})},p.createElement("input",{id:o,value:r,placeholder:a||"",type:"text",className:"cl-form-input__field",onChange:this.props.onChange,onFocus:this.setFocus(!0),onBlur:this.setFocus(!1),onKeyUp:this.onKeyUp,ref:function(t){return e.input=t},autoComplete:"off",disabled:s}),c&&p.createElement("i",{className:"cl-form-input__icon"},c),l&&p.createElement("div",{className:"cl-form-input__clear",onClick:this.onClear})))},t}(p.Component),d()(i.prototype,"setFocus",[a],Object.getOwnPropertyDescriptor(i.prototype,"setFocus"),i.prototype),d()(i.prototype,"onKeyUp",[n],Object.getOwnPropertyDescriptor(i.prototype,"onKeyUp"),i.prototype),d()(i.prototype,"forceValidate",[o],Object.getOwnPropertyDescriptor(i.prototype,"forceValidate"),i.prototype),d()(i.prototype,"onClear",[c],Object.getOwnPropertyDescriptor(i.prototype,"onClear"),i.prototype),i),f=r("VqUl"),v=r("w1Ut");r.d(t,"a",(function(){return O}));var O=function(e){function t(t){var r=e.call(this,t)||this;return r.htmlFor=Object(v.a)(),r}return l()(t,e),t.prototype.render=function(){var e=this.props,t=(e.e2eLabel,e.focused),r=e.value,a=e.currency,n=e.width,o=e.mods,c=e.disabled,i=e.hasClear,s=e.onClear,l=e.label,u=e.placeholder,d=e.validator,h=e.validateWithThrottle,m=e.onChange,v=e.onKeyUp,O=e.onValidate,y=this.htmlFor;return p.createElement(f.a,{htmlFor:y,label:l,value:r,validator:d,onValidate:O,validateWithThrottle:h},p.createElement(b,{id:y,value:r,mods:o,ref:this.props.inputComponentRef,placeholder:u,onChange:m,onKeyUp:v,focused:t,currency:a,hasClear:i,onClear:s,disabled:c,width:n||"100%"}))},t}(p.PureComponent)},qyl4:function(e,t,r){var a=r("cDcd");function n(e){return a.createElement("svg",e,a.createElement("path",{fillRule:"evenodd",d:"M9.8 7.2l.4-1.2h3.6c.2.1.3.9.4 1.3a9 9 0 0 0 .2.7H9.6l.2-.8zm6.8.8c-.2-.2-.3-.8-.4-1.2-.3-1.1-.7-2.8-2.4-2.8h-3.6C8.5 4 8.2 5.7 8 6.8L7.5 8H5v2h2v8a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-8h2V8h-2.4z"}))}n.defaultProps={width:"24",height:"24",viewBox:"0 0 24 24"},e.exports=n,n.default=n},rLhg:function(e,t,r){},t8Is:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r("cDcd"),n=r("Pxkf"),o=r("nAK0"),c=r("GhlN"),i=r("HOjc");r("h28l"),r("eV9q");var s=function(e){var t=e.onClick,r=e.base,s=e.mods,l=Object(n.a)();return a.createElement("div",{className:Object(c.a)("add-header-close",{base:r})},a.createElement(i.a,{className:Object(c.a)("add-header-close__button",s),onClick:t,"data-c":o.c.clickAuthorsClose(l)}))}},tb2r:function(e,t,r){},tm7t:function(e,t,r){"use strict";r.r(t);var a,n,o,c,i,s,l,p,u,d,h,m,b,f=r("pVnL"),v=r.n(f),O=r("VbXa"),y=r.n(O),g=r("U+yc"),C=r.n(g),j=r("cDcd"),E=r("JxqJ"),w=r("LH8O"),_=r("vmv2"),k=r("y1pN"),D=r("bphC"),x=r("Tff5"),P=r("om3R"),S=r("7/cf"),L=r("U9Ap"),N=r("XPFG"),T=r("rT8E"),I=r("nUi2"),F=r("jExO"),A=r("hFHJ"),B=r("y144"),R=r("o0o1"),U=r.n(R),M=r("6ga4"),W=r("pgbU"),V=r("xzl5"),H=r("nAK0"),K=r("GZ4p"),z=r("BZL/"),q=r("ujXg"),J=r("1nxc"),G=r("osxO"),Y=r("izju"),Z=r("1qWu"),Q=r("8nDD"),X=r("U0LE"),$=r("4RqY"),ee=Object($.a)((function(e,t){var r,a,n,o,c,i;return U.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:r=e.dataTransfer,a=t.getState,n=t.dispatch,s.prev=2,o=r.getData("text"),l=r.getData("text/html").match(/<img.*?src=['"](.+?)['"]/i),c=l&&l[1],s.next=10;break;case 7:throw s.prev=7,s.t0=s.catch(2),s.t0;case 10:if(!(i=c||o)){s.next=25;break}return H.d.clickAuthorsSeriesUpload({type:"html"}),s.prev=13,s.next=16,U.a.awrap(Object(z.a)(i).then((function(e){var t,r,o,c,i,s,l,p,u;return U.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(!Object(J.a)(e)){d.next=13;break}return t=Object(q.a)(),r=e.src,o=e.naturalWidth,c=e.naturalHeight,i=e.alt,s=e.title,l={url:r,title:s,alt:i},p=Object(S.b)(a())||{},u=[{id:t,description:i,source_type:Y.a.IMAGE,_image_meta:{width:o,height:c},source:l}],n(Object(B.a)({value:{content:p.content?u.concat(p.content):u,source_meta:p.source_meta||{}}})),d.next=9,U.a.awrap(n(Object(Z.a)(t)));case 9:return n(Object(Q.a)({id:t})),d.abrupt("return",!0);case 13:n(Object(X.a)({type:G.b.SMALL_DIMENSION_FOUND}));case 14:case"end":return d.stop()}}))})));case 16:return s.abrupt("return",s.sent);case 19:throw s.prev=19,s.t1=s.catch(13),n(Object(X.a)({type:G.b.NOT_FOUND})),s.t1;case 23:s.next=26;break;case 25:n(Object(X.a)({type:G.b.NOT_FOUND}));case 26:case"end":return s.stop()}var l}),null,null,[[2,7],[13,19]])})),te=Object($.a)((function(e,t){var r,a;return U.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.data,a=t.dispatch,n.prev=2,!(r instanceof FileList)){n.next=9;break}return n.next=6,U.a.awrap(a(Object(K.b)(r)));case 6:return n.abrupt("return",n.sent);case 9:return n.next=11,U.a.awrap(a(ee({dataTransfer:r})));case 11:return n.abrupt("return",n.sent);case 12:n.next=17;break;case 14:throw n.prev=14,n.t0=n.catch(2),n.t0;case 17:case"end":return n.stop()}}),null,null,[[2,14]])})),re=function(e){return e.addBoards&&e.addBoards._query&&e.addBoards._query.saveable_for_source_type||""},ae=(r("YTPY"),r("ukm6")),ne=r("785c"),oe=(a=Object(w.a)(),n=Object(w.a)(),o=Object(w.a)(),c=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).state={},t}y()(t,e);var r=t.prototype;return r.componentDidMount=function(){document.addEventListener("dragenter",this.onDragStart),document.addEventListener("dragover",this.onDragStart),document.addEventListener("dragleave",this.onDragStop),document.addEventListener("drop",this.onDrop)},r.componentWillUnmount=function(){document.removeEventListener("dragenter",this.onDragStart),document.removeEventListener("dragover",this.onDragStart),document.removeEventListener("dragleave",this.onDragStop),document.removeEventListener("drop",this.onDrop)},r.onDragStart=function(e){var t=this.state.dragInProgress;if(e.preventDefault(),e.stopPropagation(),!t){var r=e.dataTransfer;if(r&&Object(W.a)(r)){this.setState({dragInProgress:!0});var a=this.props.onFilesDragStart;a&&a()}}clearTimeout(this.timeout)},r.onDragStop=function(e){var t=this;e.preventDefault(),e.stopPropagation(),clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.setState({dragInProgress:!1});var e=t.props.onFilesDragStop;e&&e()}),100)},r.onDrop=function(e){var t,r,a,n,o,c,i,s,l,p;return U.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e.dataTransfer,r=t.files,a=this.props,n=a.counter,o=a.dispatch,c=a.onFilesDrop,i=a.onFilesDragStop,s=a.saveableContentType,l=a.addFlowInternalPoint,e.preventDefault(),e.stopPropagation(),this.setState({dragInProgress:!1}),l===ne.c.BOARDS_LIST&&s!==Y.a.IMAGE){u.next=19;break}if(H.d.clickAuthorsImageUpload(v()({type:"drag"},n)),p=r.length?r:t,u.prev=9,!p){u.next=14;break}return u.next=13,U.a.awrap(o(te({data:p})));case 13:c&&c();case 14:u.next=19;break;case 16:u.prev=16,u.t0=u.catch(9),i&&i();case 19:case"end":return u.stop()}}),null,this,[[9,16]])},r.render=function(){var e,t,r=this.props,a=r.children,n=r.mods,o=(r.showDrag,r.isBoardsListModal),c=r.isAddCardTypeModal,i=r.type,s=this.state.dragInProgress,l=s;return t=i===Y.a.IMAGE||void 0===i?V.dragStart():V.dragError(),j.createElement(j.Fragment,null,j.createElement("div",{className:Object(M.a)("add-drag-container",v()((e={drag:l,boards:o},e["card-type"]=c,e),n))},l&&j.createElement("div",{className:"add-drag-container__description"},t)),(!s||o)&&a)},t}(j.Component),C()(c.prototype,"onDragStart",[a],Object.getOwnPropertyDescriptor(c.prototype,"onDragStart"),c.prototype),C()(c.prototype,"onDragStop",[n],Object.getOwnPropertyDescriptor(c.prototype,"onDragStop"),c.prototype),C()(c.prototype,"onDrop",[o],Object.getOwnPropertyDescriptor(c.prototype,"onDrop"),c.prototype),c),ce=Object(E.b)((function(e){return{saveableContentType:re(e),addFlowInternalPoint:Object(ae.a)(e)[ne.a].point.view}}))(oe),ie=r("8/83"),se=r("Gphu"),le=r("c+Bi"),pe=r("+CQK"),ue=r("Ho6D"),de=r("Eqx2"),he=(i=Object(w.a)(),s=function(e){function t(){return e.apply(this,arguments)||this}y()(t,e);var r=t.prototype;return r.onNewBoardClick=function(e){var t=this.props,r=t.dispatch,a=t.headerTitle;r(Object(A.h)({boardTitle:e,headerTitle:a,saveLabel:de.createBoardLabel()}))},r.render=function(){var e=this.props,t=e.scrollWrapper,r=e.hideFooter,a=e.headerTitle,n=e.hasQueue,o=e.shouldDisableBoardList,c=e.selectedContent,i=e.disableDragCard,s=e.singleColumn,l=e.dispatch,p=e.type,u=e.autoFocus,d=e.openCardFromAdd,h=e.isEditAction,m=j.createElement(j.Fragment,null,j.createElement("div",{className:"add"},j.createElement("div",{className:"add-column"},j.createElement(se.a,{title:a,close:Boolean(s),back:!1}),j.createElement(le.a,{storeKey:"addBoards",hasQueue:n,shouldDisableList:o,onNewClick:this.onNewBoardClick,itemClass:pe.a,scrollWrapper:t}),!r&&j.createElement(ie.a,{disabled:n})),!s&&j.createElement(ue.a,{autoFocus:u,openCardFromAdd:d,isEditAction:h})));return j.createElement(j.Fragment,null,i?m:j.createElement(ce,{onFilesDrop:function(){c&&l(Object(B.a)({value:{preview_content:c.slice(-1).toString()}}))},type:p,isBoardsListModal:!0},m))},t}(j.Component),C()(s.prototype,"onNewBoardClick",[i],Object.getOwnPropertyDescriptor(s.prototype,"onNewBoardClick"),s.prototype),s),me=Object(E.a)((function(e,t){var r=Object(S.b)(e),a=Object(x.a)(r),n=r&&Object(L.a)(e,r)||Object(D.a)(e,a),o=Object(k.a)(e,a),c=Object(I.a)(o),i=(n||c)&&t.title,s=r&&r.content&&r.selected_contents,l=Object(P.a)(r),p=Object(T.a)(l);return{hasQueue:_.a.isBusy(F.b),shouldDisableBoardList:c,headerTitle:i||de.title(),cardId:Object(N.a)(r),selectedContent:s,disableDragCard:t.disableDrag||!1,type:p}}))(he),be=r("gLBg"),fe=((l={})[be.a.BOARD_FOLLOWERS]=be.a.BOARD,l[be.a.MY_PROFILE]=be.a.PROFILE,l[be.a.CARDS]=be.a.PROFILE,l[be.a.FOLLOWINGS_USERS]=be.a.PROFILE,l[be.a.FOLLOWINGS_BOARDS]=be.a.PROFILE,l[be.a.FOLLOWINGS_CHANNELS]=be.a.PROFILE,l[be.a.COMPANIES]=be.a.PROFILE,l[be.a.FOLLOWERS]=be.a.PROFILE,l[be.a.CONTEST]=be.a.CONTESTS,l[be.a.GEO_BOARD]=be.a.GEO_CHANNEL,l[be.a.SEARCH_BOARDS]=be.a.SEARCH,l),ve=r("+3en"),Oe=r("+r4z"),ye=r("INas"),ge=r("CIhk"),Ce=r("/O+t"),je=r("LnpB"),Ee=r("aZDG"),we=(p=Object(w.a)(),u=Object(w.a)(),d=Object(w.a)(),h=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).state={isDirty:!1},t}y()(t,e);var r=t.prototype;return r.onSaveClick=function(e){var t=this.props,r=t.counter,a=t.dispatch,n=t.boardId;a(t.isEdit?Object(ge.a)({boardId:n,boardData:e,counter:r}):Object(A.d)({boardData:e,counter:r}))},r.removeCollection=function(){var e=this.props,t=e.dispatch,r=e.counter,a=e.boardId;a&&t(Object(Ce.a)({boardId:a,counter:r}))},r.shouldComponentUpdate=function(e){return!(this.props.title&&!e.headerTitle)},r.setDirtyForm=function(){this.setState({isDirty:!0})},r.render=function(){var e=this.props,t=e.boardTitle,r=e.title,a=e.saveLabel,n=e.hasPreview,o=e.hideBack,c=e.boardId,i=e.isEdit,s=e.disableFocus,l=(e.isRouteProfile,e.isProfileCompanyParticipant),p=this.state.isDirty;return j.createElement("div",{className:"add"},j.createElement("div",{className:"add-column"},j.createElement(se.a,{title:r||(i?Ee.editTitle():Ee.title()),close:!n,back:!1,hideDialog:!p}),j.createElement(je.a,{title:t,boardId:c,onSaveClick:this.onSaveClick,saveLabel:a||(i?Ee.update():Ee.save()),backLabel:i&&!o&&Ee.cancel(),hideBack:o,setDirtyForm:this.setDirtyForm,removeCollection:i?this.removeCollection:void 0,showCoauthorButton:i,disableFocus:s,isProfileCompanyParticipant:l,footer:!0})),n&&j.createElement(ue.a,null))},t}(j.Component),C()(h.prototype,"onSaveClick",[p],Object.getOwnPropertyDescriptor(h.prototype,"onSaveClick"),h.prototype),C()(h.prototype,"removeCollection",[u],Object.getOwnPropertyDescriptor(h.prototype,"removeCollection"),h.prototype),C()(h.prototype,"setDirtyForm",[d],Object.getOwnPropertyDescriptor(h.prototype,"setDirtyForm"),h.prototype),h),_e=Object(E.b)((function(e){var t,r,a,n=Object(S.b)(e),o=Object(P.a)(n),c=!1,i=(a=Object(Oe.a)(e))?fe[a]||a:be.a.NOT_FOUND;if(i===be.a.PROFILE&&(r=Object(ye.a)(e),c=!0),i===be.a.BOARD){var s=Object(ve.a)(e);r=Object(k.a)(e,Object(N.a)(s))}return t=Object(I.a)(r),{hasPreview:Boolean(o)&&!0,isRouteProfile:c,isProfileCompanyParticipant:t}}))(we),ke=r("Dpht"),De=r("xmbT"),xe=r("HtIP"),Pe=r("mS86"),Se=r("T1Tg"),Le=r("GhlN"),Ne=r("vdFK");r("yiEq");var Te,Ie,Fe,Ae,Be=(m=Object(w.a)(),b=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).state={},t}y()(t,e);var r=t.prototype;return r.onFileChange=function(e){var t,r,a,n;return U.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.props,r=t.counter,a=t.dispatch,H.d.clickAuthorsImageUpload(v()({type:"input"},r)),n=e.target,this.setState({loading:!0}),o.prev=4,o.next=7,U.a.awrap(a(te({data:n.files})));case 7:a(Object(Ne.v)()),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(4),this.setState({loading:!1});case 13:setTimeout((function(){n.value=""}),1e3);case 14:case"end":return o.stop()}}),null,this,[[4,10]])},r.render=function(){var e=this,t=this.state.loading,r=this.props,a=r.onLoaded,n=r.mods,o=r.buttonType,c=void 0===o?"action":o,i=r.counter;return j.createElement(ce,{onFilesDragStart:function(){e.setState({loading:!0})},onFilesDragStop:function(){e.setState({loading:!1})},onFilesDrop:function(){H.d.clickAuthorsImageUpload(v()({type:"drag"},i)),a&&a()},mods:n},j.createElement("div",{className:Object(Le.a)("add-file-container",n)},t?j.createElement(xe.a,{size:"L"}):j.createElement(j.Fragment,null,j.createElement("div",{className:"add-file-container__text"},Se.description.r()),j.createElement(Pe.a,{multiple:!0,type:c,size:"M",ei:!0,label:Se.inputLabel(),onChange:this.onFileChange}))))},t}(j.PureComponent),C()(b.prototype,"onFileChange",[m],Object.getOwnPropertyDescriptor(b.prototype,"onFileChange"),b.prototype),b),Re=Object(E.b)()(Be),Ue=[{title:De.loadFromComputer(),cur:!0},{title:De.loadByUrl(),action:Ne.u,cur:!1}],Me=(Te=Object(w.a)(),Ie=Object(w.a)(),Fe=function(e){function t(){return e.apply(this,arguments)||this}y()(t,e);var r=t.prototype;return r.onFileChange=function(e){var t,r,a,n;return U.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.props,r=t.dispatch,a=t.counter,H.d.clickAuthorsImageUpload(v()({type:"input"},a)),n=e.target,this.setState({loading:!0}),o.prev=4,o.next=7,U.a.awrap(r(te({data:n.files})));case 7:r(Object(Ne.v)()),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(4),this.setState({loading:!1});case 13:setTimeout((function(){n.value=""}),1e3);case 14:case"end":return o.stop()}}),null,this,[[4,10]])},r.onImageLoaded=function(){this.props.dispatch(Object(Ne.v)())},r.render=function(){return j.createElement(j.Fragment,null,j.createElement(se.a,{title:ke.addImages(),tabs:Ue,close:!0}),j.createElement(Re,{onLoaded:this.onImageLoaded,onFileChange:this.onFileChange}),j.createElement(ie.a,{hideBorder:!0}))},t}(j.Component),C()(Fe.prototype,"onFileChange",[Te],Object.getOwnPropertyDescriptor(Fe.prototype,"onFileChange"),Fe.prototype),C()(Fe.prototype,"onImageLoaded",[Ie],Object.getOwnPropertyDescriptor(Fe.prototype,"onImageLoaded"),Fe.prototype),Fe),We=Object(E.b)()(Me),Ve=r("wjhi"),He=r("c+Ap"),Ke=r("uDOU"),ze=r("LiK1"),qe=Object($.a)((function(e,t){var r=e.images,a=e.resolveCount,n=void 0===a?1:a,o=e.title,c=e.description,i=void 0===c?"":c,s=e.sourceUrl,l=t.dispatch,p=t.getState,u=0,d=!1,h=Object(ze.a)(r,(function(e){return e.url}));return new Promise((function(e){var t=function(){u++;var t=Object(S.b)(p()),a=t&&t.content?t.content:[];!d&&(a.length>=n||h.length===u)&&(d=!0,e()),u===h.length&&(a.length>0&&l(Object(B.a)({value:{selected_contents:1===a.length?[a[0].id]:[]}})),H.d.techParseRequest({type:"image",code:200,valid:a?a.length:0,count:r.length,url:s}))},a=function(e,t){var r=Object(S.b)(p()),a=r&&r.content;a&&0!==a.length||(l(Object(B.a)({force:!0,value:{title:e?e.title:o,description:i,source_meta:{page_url:s,page_title:o||"",page_domain:Object(Ke.a)(s)}}})),r=Object(S.b)(p()));var n=[{id:Object(q.a)(),source:{url:t},source_type:Y.a.IMAGE,_image_meta:{width:e.naturalWidth,height:e.naturalHeight}}];r&&l(Object(B.a)({value:{content:r.content?r.content.concat(n):n}}))};h.forEach((function(e){return U.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:Object(z.a)(e.url).then((function(r){r&&Object(J.a)(r)&&a(r,e.url),t()}),(function(){t()}));case 1:case"end":return r.stop()}}))}))}))})),Je=r("hYN3"),Ge=r("plYr"),Ye={xhrFields:{withCredentials:!0},options:{credentials:"include"}},Ze=Object($.a)((function(e,t){var r,a,n,o,c,i,s;return U.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return r=e.url,a=e.sourceType,n=void 0===a?Y.a.IMAGE:a,o=t.di,l.next=4,U.a.awrap(o("request"));case 4:return c=l.sent,i=Object(Je.a)("/collections/api/pages/parse/?source_type="+n),l.prev=6,l.next=9,U.a.awrap(Object(Ge.a)((function(){return c.post(i,{url:r},Ye)})));case 9:s=l.sent,l.next=15;break;case 12:throw l.prev=12,l.t0=l.catch(6),l.t0;case 15:return l.abrupt("return",s);case 16:case"end":return l.stop()}}),null,null,[[6,12]])})),Qe=Object($.a)((function(e,t){var r,a,n,o,c,i,s;return U.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return r=e.url,a=t.getState,n=t.dispatch,l.prev=2,l.next=5,U.a.awrap(n(Ze({url:r})));case 5:if(!((o=l.sent)&&o.results&&o.results.images)){l.next=25;break}if(0!==(c=o.results.images||[]).length){l.next=12;break}return n(Object(X.a)({type:G.b.NOT_FOUND})),H.d.techParseRequest({type:"image",code:200,count:0,href:r}),l.abrupt("return",!1);case 12:return l.next=14,U.a.awrap(n(qe({images:c,title:o.title,resolveCount:3,sourceUrl:r})));case 14:if(i=Object(S.b)(a()),!((s=i&&i.content)&&s.length>0)){l.next=20;break}1===s.length&&n(Object(Q.a)({id:s[0].id})),l.next=22;break;case 20:return n(Object(X.a)({type:G.b.SMALL_DIMENSION_FOUND})),l.abrupt("return",!1);case 22:return l.abrupt("return",o);case 25:return n(Object(X.a)({type:G.b.UPLOAD_ERROR})),H.d.techParseRequest({type:"image",code:200,count:0,href:r}),l.abrupt("return",!1);case 28:l.next=34;break;case 30:throw l.prev=30,l.t0=l.catch(2),H.d.techParseRequest({type:"image",code:l.t0?l.t0.status:-1,href:r}),l.t0;case 34:case"end":return l.stop()}}),null,null,[[2,30]])})),Xe=r("ywnR"),$e=r("dohL"),et=r("IxYx"),tt=((Ae={})[Y.a.IMAGE]=Qe,Ae[Y.a.LINK]=Xe.a,Ae),rt=Object($.a)((function(e,t){var r,a,n,o,c,i,s,l,p;return U.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(r=e.url,a=e.type,n=e.counter,o=t.getState,c=t.dispatch,i=tt[a],H.d.clickAuthorsLinkSubmit(v()({type:a},n)),l=function(){var e=o();return Object(Ve.a)(e)["add-url"]},p=function(e){var t;c(Object(et.a)(((t={})["add-url"]=e,t)))},!i){u.next=22;break}return p(!0),u.prev=8,u.next=11,U.a.awrap(c(i({url:r})));case 11:s=u.sent,H.d.finishAuthorsLinkSubmit(v()({type:a},n)),u.next=19;break;case 15:throw u.prev=15,u.t0=u.catch(8),l()&&((u.t0&&u.t0.status)===He.v.NOT_FOUND?c(Object(X.a)({type:G.b.NOT_FOUND})):c(Object($e.a)({error:u.t0}))),u.t0;case 19:return u.prev=19,p(!1),u.finish(19);case 22:return u.abrupt("return",s);case 23:case"end":return u.stop()}}),null,null,[[8,15,19,22]])})),at=r("rreP"),nt=r("vjVR"),ot=r("Q04d"),ct=/^(https?:\/\/)?([\wа-яё\.\-]+)\.([a-zёа-я]{2,6}\.?)(\/[\wа-яё\.]*)*\/?/i;function it(e){var t=e&&e.trim?e.trim():e,r=""!==t||ct.test(t);return v()({valid:r},r?{}:{message:ot.incorrectUrl})}var st=r("gtY4");r("ZmFz");var lt,pt,ut,dt,ht,mt,bt,ft,vt=r("Eo2z"),Ot=r("ivQ0"),yt="https:";function gt(e){return Object(Ot.a)(e)||(e="/"===e[0]&&"/"===e[1]?yt+e:yt+"//"+e),e}r("Jym4");var Ct,jt,Et,wt,_t,kt,Dt=((lt={})[Y.a.IMAGE]=st.imageTitle(),lt[Y.a.LINK]=st.linkTitle(),lt),xt=He.w?0:200,Pt=(pt=Object(w.a)(),ut=Object(w.a)(),dt=Object(w.a)(),ht=Object(w.a)(),mt=Object(w.a)(),bt=Object(w.a)(),ft=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).state={type:t.getSourceType()},t}y()(t,e);var r=t.prototype;return r.onChange=function(e){this.updateQuery(e.target.value)},r.onClear=function(){this.updateQuery("")},r.updateQuery=function(e){this.state.loading||this.props.setQuery(e)},r.getSourceType=function(){var e,t,r=this.props,a=r.type,n=r.query;return a||Boolean((e=[n],t=/\.(?:jpg|png|jpeg|gif|bmp|tiff|tif|webp)$/i,e.filter((function(e){return t.test(e)}))).length)?Y.a.IMAGE:Y.a.LINK},r.onSubmit=function(){var e,t,r,a,n,o,c,i;return U.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e=this.props,t=e.query,r=e.onSuccess,a=e.dispatch,n=e.counter,t){s.next=4;break}return a(Object(at.a)({message:st.notificationInputUrl()})),s.abrupt("return");case 4:if(o=t.trim(),c=ct.test(o),i=this.getSourceType(),this.setState({type:i}),c){s.next=11;break}return i===Y.a.IMAGE?a(Object(at.a)({message:st.desktopNotificationImageInputUrl.r()})):a(Object(at.a)({message:st.notificationInputUrl()})),s.abrupt("return");case 11:return o=gt(o),this.props.setQuery(o),this.setLoading(!0),s.prev=14,s.next=17,U.a.awrap(a(rt({url:o,type:i,counter:n})));case 17:s.sent&&r?r(i):this.setLoading(!1),s.next=24;break;case 21:s.prev=21,s.t0=s.catch(14),this.setLoading(!1);case 24:case"end":return s.stop()}}),null,this,[[14,21]])},r.setLoading=function(e){this.setState({loading:e})},r.focus=function(){this._input&&!this.state.loading&&this._input.focus()},r.componentDidUpdate=function(){var e=this;setTimeout((function(){return e.focus()}),xt)},r.componentDidMount=function(){var e=this;setTimeout((function(){return e.focus()}),xt)},r.onKeyDown=function(e){e.keyCode===nt.b&&this.onSubmit()},r.render=function(){var e=this,t=this.props,r=t.query,a=t.mods,n=t.tld,o=this.state.loading,c=!Boolean(r),i=this.props.type||Y.a.LINK,s=ct.test(r),l=Boolean(r&&r.length>0);return j.createElement("div",{className:Object(M.a)("add-input-content",a)},j.createElement("div",{className:"add-input-search"},j.createElement("label",{className:"add-input-search__title",htmlFor:"search-input"},Dt[i]),j.createElement("div",{className:Object(M.a)("add-input-search__container",{loading:o})},j.createElement("input",{id:"search-input",className:"add-input__text",value:r,placeholder:st.searchPlaceholder(),spellCheck:!He.w,onChange:this.onChange,onKeyUp:this.onKeyDown,autoComplete:"off",ref:function(t){return e._input=t},type:"url"}),!1,j.createElement("div",{className:Object(M.a)("add-input__ctrl",{clear:!0,hidden:c})},j.createElement("div",{className:Object(M.a)("add-input__ctrl__icon",{clear:!0}),onClick:this.onClear})),j.createElement("div",{className:Object(M.a)("add-input__ctrl",{submit:!0})},j.createElement("div",{className:Object(M.a)("add-input__ctrl__icon",{submit:!0,filled:l}),onClick:this.onSubmit}))),l&&!s&&j.createElement("a",{className:"add-input-search__link",href:"//yandex."+n+"/images/search?text="+encodeURIComponent(r)+"&from=collections_add",target:"_blank"},st.searchInImages()),!1,o&&j.createElement(xe.a,{size:"L"})))},t}(j.Component),C()(ft.prototype,"onChange",[pt],Object.getOwnPropertyDescriptor(ft.prototype,"onChange"),ft.prototype),C()(ft.prototype,"onClear",[ut],Object.getOwnPropertyDescriptor(ft.prototype,"onClear"),ft.prototype),C()(ft.prototype,"updateQuery",[dt],Object.getOwnPropertyDescriptor(ft.prototype,"updateQuery"),ft.prototype),C()(ft.prototype,"getSourceType",[ht],Object.getOwnPropertyDescriptor(ft.prototype,"getSourceType"),ft.prototype),C()(ft.prototype,"onSubmit",[mt],Object.getOwnPropertyDescriptor(ft.prototype,"onSubmit"),ft.prototype),C()(ft.prototype,"onKeyDown",[bt],Object.getOwnPropertyDescriptor(ft.prototype,"onKeyDown"),ft.prototype),ft),St=Object(E.a)((function(e){return{tld:Object(vt.a)(e)}}))(Pt),Lt=[{title:De.loadFromComputer(),action:Ne.t,cur:!1},{title:De.loadByUrl(),cur:!0}],Nt=(Ct=Object(w.a)(),jt=Object(w.a)(),Et=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).state={url:"",loading:!0},t}y()(t,e);var r=t.prototype;return r.onSubmit=function(){(0,this.props.dispatch)(Object(Ne.v)())},r.setUrl=function(e){this.setState({url:e})},r.render=function(){var e=this,t=this.state.url,r=j.createElement(St,{mods:{tabs:!0},type:Y.a.IMAGE,onSuccess:this.onSubmit,query:t,setQuery:this.setUrl});return j.createElement("div",{className:"add"},j.createElement("div",{className:"add-column"},j.createElement(se.a,{title:ke.addImages(),tabs:Lt,back:!1,close:!0,hideDialog:!t}),j.createElement(ce,{onFilesDragStart:function(){e.setState({loading:!0})},onFilesDragStop:function(){e.setState({loading:!1})},onFilesDrop:function(){e.onSubmit()}},r),j.createElement(ie.a,null)))},t}(j.Component),C()(Et.prototype,"onSubmit",[Ct],Object.getOwnPropertyDescriptor(Et.prototype,"onSubmit"),Et.prototype),C()(Et.prototype,"setUrl",[jt],Object.getOwnPropertyDescriptor(Et.prototype,"setUrl"),Et.prototype),Et),Tt=Object(E.a)()(Nt),It=r("cBfX"),Ft=(wt=Object(w.a)(),_t=Object(w.a)(),kt=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).state={link:""},t}y()(t,e);var r=t.prototype;return r.onSubmit=function(e){var t=this.props,r=t.saveInCurrentBoard,a=t.boardId,n=t.dispatch,o=t.counter;r&&e!==Y.a.IMAGE?n(Object(Ne.x)({boardId:a,counter:o})):e===Y.a.IMAGE?n(Object(Ne.v)()):n(Object(A.i)())},r.setLink=function(e){this.setState({link:e})},r.render=function(){var e=this.state.link;return j.createElement("div",{className:"add"},j.createElement("div",{className:"add-column"},j.createElement(se.a,{title:ke.addLink(),close:!0,back:!1,hideDialog:!e}),j.createElement("div",{className:"add-input-content"},j.createElement(St,{onSuccess:this.onSubmit,query:e,setQuery:this.setLink})),j.createElement(ie.a,null)))},t}(j.Component),C()(kt.prototype,"onSubmit",[wt],Object.getOwnPropertyDescriptor(kt.prototype,"onSubmit"),kt.prototype),C()(kt.prototype,"setLink",[_t],Object.getOwnPropertyDescriptor(kt.prototype,"setLink"),kt.prototype),kt),At=Object(E.a)((function(e){var t=Object(ve.a)(e),r=Object(N.a)(t);return{saveInCurrentBoard:Object(It.a)(e),boardId:r}}))(Ft),Bt=r("9BmU"),Rt=r("DdyV"),Ut=r("Heix"),Mt=r("Q6yW"),Wt=r("zJZA"),Vt=r("iABh"),Ht=11;function Kt(e){var t={valid:!0};return e&&e.length>=Ht&&(t={valid:!1,message:Vt.cardPriceMaxLength}),e&&""!==e||(t={valid:!1,message:Vt.cardPriceEmpty}),t}var zt,qt=r("WoCj"),Jt=r("yzJw"),Gt=((zt={})[qt.a.space]=ot.incorrectTitle,zt[qt.a.empty]=ot.emptyTitle,zt[qt.a.long]=ot.longTitle,zt);function Yt(e){var t=Object(Jt.a)(e);return t.code&&Gt[t.code]&&(t.message=Gt[t.code]),t}var Zt=r("x9gI"),Qt=r("Hxdx"),Xt=r("1BCU"),$t=r("MTjZ"),er=r("r4I1"),tr=r("ICaW"),rr=r("ZDp4"),ar=r.n(rr),nr=r("P/1b"),or=function(e){var t=this;void 0===e&&(e=5);var r=[],a=0,n=function(e,n,o){a++;for(var c=arguments.length,i=new Array(c>3?c-3:0),s=3;s<c;s++)i[s-3]=arguments[s];var l=e.apply(t,i);return l.then((function(e){if(a--,r.length>0){var t=r.shift();t&&t()}n(e)})).catch((function(e){a--,o(e)}))};return function(o){for(var c=arguments.length,i=new Array(c>1?c-1:0),s=1;s<c;s++)i[s-1]=arguments[s];return new Promise((function(c,s){a<e?n.apply(void 0,[o,c,s].concat(i)):r.push(n.bind.apply(n,[t,o,c,s].concat(i)))}))}},cr=r("91wX"),ir=(Object($.a)((function(e,t){var r,a,n,o,c,i,s,l,p;return U.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:a=e.images,n=e.url,o=t.getState,c=t.dispatch,i=or(),s=Object(cr.a)(),l=0,c(Object(et.a)(((r={})["validate-cards"]=s,r))),p=a.map((function(e){return i((function(){return Object(z.a)(e.url).then((function(t){var r=o(),i=Object(Ve.a)(r);if(l++,i["validate-cards"]===s){if(t&&Object(J.a)(t)){var p=Object(S.b)(r),u=[{id:Object(q.a)(),source:{url:e.url},source_type:Y.a.IMAGE,_image_meta:{width:t.naturalWidth,height:t.naturalHeight}}];p&&c(Object(B.a)({value:{content:p.content?p.content.concat(u):u}}))}if(l===a.length){var d=Object(S.b)(o()),h=d&&d.content;H.d.techParseRequest({type:"image",code:200,valid:h?h.length:0,count:a.length,href:n})}}})).catch((function(){l++}))}))})),Promise.all(p);case 8:case"end":return u.stop()}}))})),Object($.a)((function(e,t){var r,a,n,o,c,i,s;return U.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:ar()(e),a=t.getState,n=t.dispatch,o=a(),c=Object(S.b)(o),n(Object(et.a)(((r={})["validate-cards"]=void 0,r))),c&&c.content&&(i=c.content.filter((function(e){var t=Object(Qt.a)(e),r=Object(nr.a)(e);return!t||r&&r.match(/^data:image/)})),s=c.selected_contents&&c.selected_contents.filter((function(e){return i.find((function(t){return t.id===e}))})),n(Object(B.a)({value:{content:i,preview_content:s?s[0]:void 0,selected_contents:s||[]}})));case 6:case"end":return l.stop()}}))}))),sr=r("jgrJ"),lr=r("dQn9"),pr=r("S4QV"),ur=r("CUhL"),dr=Object(E.a)()((function(e){var t=e.resolve,r=e.reject;return j.createElement(ur.a,{dialogType:"removeProductImage"},j.createElement(lr.a,{title:pr.title(),primaryLabel:pr.cancelLabel(),secondaryLabel:pr.confirmLabel(),secondaryDangerous:!0,onPrimary:function(){r(new Error("don't close dialog"))},onSecondary:function(){t()},onOut:function(){r(new Error("don't close dialog"))}}))})),hr=Object($.a)((function(e,t){var r;return U.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,e.next=3,U.a.awrap(r(Object(sr.a)(Object(j.createElement)(dr))));case 3:case"end":return e.stop()}}))}));r("ZYMi");var mr=function(e){var t=e.mods,r=e.children;return j.createElement("div",{className:Object(Le.a)("cl-add-form-block",t)},r)},br=r("q5W4"),fr=r("Yqew"),vr=r("1R8C"),Or=r("K6aF");function yr(e,t){var r=Object(S.b)(e);if(r&&r.selected_contents){var a=r.selected_contents.indexOf(t);if(a>=0)return++a}}var gr,Cr,jr=r("r/yX");r("pbmY"),r("z2Iz");var Er=(gr=Object(w.a)(),Cr=function(e){function t(){return e.apply(this,arguments)||this}y()(t,e);var r=t.prototype;return r.onClick=function(){var e,t,r,a,n,o,c;return U.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.dispatch,r=e.cardContent,a=e.index,n=e.type,o=e.error,c=r.id,H.d.clickAuthorsSeriesSelect({action:Boolean(a)?"unselect":"select",type:n}),i.next=5,U.a.awrap(t(Object(Z.a)(c)));case 5:if(i.sent){i.next=8;break}return i.abrupt("return");case 8:(o||Object(jr.a)(r))&&t(Object(Q.a)({id:c}));case 9:case"end":return i.stop()}}),null,this)},r.render=function(){var e=this.props,t=e.url,r=e.contentSizes,a=e.loading,n=e.error,o=e.index,c=Boolean(o);return j.createElement("div",{className:Object(M.a)("add-serial-thumb",{placeholder:!t,loaded:t&&!a&&!n,loading:a,selected:c,error:n}),onClick:this.onClick},j.createElement("div",{className:"add-serial-thumb__square"},j.createElement("div",{className:"add-serial-thumb__wrapper"},c&&j.createElement("div",{className:"add-serial-thumb__pos-label"},o),j.createElement("div",{className:"add-serial-thumb__image"},a&&!n&&j.createElement("div",{className:"add-serial-thumb__loader"},j.createElement(xe.a,{gif:!1})),r&&j.createElement("div",{className:"add-serial-thumb__size-label"},r.width," × ",r.height),t&&j.createElement(Or.a,{mods:{type:"add"},mod:"fit",src:t})))))},t}(j.Component),C()(Cr.prototype,"onClick",[gr],Object.getOwnPropertyDescriptor(Cr.prototype,"onClick"),Cr.prototype),Cr),wr=Object(E.a)((function(e,t){var r,a=t.cardContent;if(a._image_meta)r=a._image_meta;else if(a.content&&a.content.sizes){var n=a.content.sizes.orig;n&&(r=n)}return{url:Object(nr.a)(a),loading:a._loading,error:a._error,index:yr(e,a.id),type:Object(T.a)(a),contentSizes:r}}))(Er),_r=r("7sWk"),kr=r("cgbR"),Dr=r.n(kr);r("/KDC"),r("kC0a");var xr,Pr,Sr,Lr,Nr,Tr,Ir,Fr,Ar,Br,Rr,Ur,Mr=Object(E.a)()((function(e){var t=e.dispatch;return j.createElement("div",{className:"add-serial thumb__view_add"},j.createElement("div",{className:"add-serial__square"},j.createElement("div",{className:"add-serial__wrapper"},j.createElement("input",{type:"file",accept:"image/*",multiple:!0,onChange:function(e){var r=e.target;H.d.clickAuthorsSeriesUpload({type:"input"});try{t(Object(K.b)(r.files))}catch(e){}finally{setTimeout((function(){r.value=""}),1e3)}}}),j.createElement("div",{className:"add-serial__plus"},j.createElement(Dr.a,{fill:"currentColor",width:23,height:23})),j.createElement("div",{className:"add-serial__text"},_r.more()))))})),Wr=r("zgHt");r("7MTc");var Vr,Hr,Kr,zr=/\d+/gi,qr=(xr=Object(w.a)(),Pr=Object(w.a)(),Sr=Object(w.a)(),Lr=Object(w.a)(),Nr=Object(w.a)(),Tr=Object(w.a)(),Ir=Object(w.a)(),Fr=Object(w.a)(),Ar=Object(w.a)(),Br=Object(w.a)(),Rr=Object(w.a)(),Ur=function(e){function t(t){var r=e.call(this,t)||this;return r.inputRefs={},r.state={title:t.title||"",description:t.description||"",price:t.price,url:t.url||"",validation:{description:!0,title:Boolean(t.title),price:!0,url:!0},cardsLoading:!1},r}y()(t,e);var r=t.prototype;return r.setLoading=function(e){this.setState({cardsLoading:e})},r.onChange=function(e){var t=this,r=this.state.isDirty,a=this.props.dispatch,n=this.hasCardsLoadedFromUrl();return r||this.setState({isDirty:!0}),function(r){var o,c,i,s,l,p;return U.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(c=r.target.value,"url"!==e||!n||t.state.url===c){u.next=3;break}return u.abrupt("return",t.removeImages());case 3:return u.next=5,U.a.awrap(t.setState(((o={})[e]=c,o)));case 5:i=t.state,s=i.price,l=i.title,p=i.description,a(Object(B.a)({value:{description:p,meta:{type:Y.a.PRODUCT,data:{title:l,cost:Number(s),location:""}}}}));case 7:case"end":return u.stop()}}))}},r.onPriceChange=function(e){var t=e.target.value.match(zr),r="";t&&(r=t.join("")),this.setState({price:r})},r.loadImagesFromUrl=function(){var e,t,r,a,n,o;return U.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=this.props,t=e.dispatch,r=e.counter,a=this.state,n=a.url,o=a.validation.url,!n||!o){c.next=16;break}return this.setLoading(!0),n=gt(n),this.setState({url:n}),c.prev=6,c.next=9,U.a.awrap(t(rt({url:n,counter:r,type:Y.a.IMAGE})));case 9:c.sent||this.setLoading(!1),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(6),this.setLoading(!1);case 16:case"end":return c.stop()}}),null,this,[[6,13]])},r.removeImages=function(e){var t,r,a;return U.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=this.props,r=t.dispatch,a=t.counter,n.prev=1,e){n.next=5;break}return n.next=5,U.a.awrap(r(hr({counter:a})));case 5:r(ir({})),this.setLoading(!1),this.setState({url:e?this.state.url:"",validation:v()({},this.state.validation,{url:!0})}),n.next=12;break;case 10:n.prev=10,n.t0=n.catch(1);case 12:case"end":return n.stop()}}),null,this,[[1,10]])},r.onValidate=function(e){var t=this;return function(r){var a=r.valid;t.setState((function(t){var r;return{validation:v()({},t.validation,(r={},r[e]=a,r))}}))}},r.setInputRef=function(e){var t=this;return function(r){t.inputRefs[e]=r}},r.isProductValid=function(){var e=this.state.validation,t=e.title,r=e.description,a=e.url,n=e.price,o=this.props.hasSelected;return t&&r&&a&&n&&o},r.onClickButton=function(){var e,t,r,a,n,o,c,i,s,l,p,u,d,h;return U.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(e=this.state,t=e.url,r=e.price,a=e.title,n=e.description,o=this.props,c=o.hasOriginalId,i=o.instantSave,s=o.boardId,l=o.counter,p=o.dispatch,u=o.hasSelected,d=o.content,t=t&&gt(t),this.isProductValid()){m.next=8;break}for(h in this.inputRefs)this.inputRefs.hasOwnProperty(h)&&this.inputRefs[h].forceValidate();return!u&&d.length&&p(Object(X.a)({type:G.b.SELECT_PRODUCT})),t&&!d.length&&p(Object(X.a)({type:G.b.LOAD_IMAGES})),m.abrupt("return");case 8:return m.next=10,U.a.awrap(p(Object(B.a)({value:{description:n,meta:{type:Y.a.PRODUCT,data:{title:a,cost:Number(r),location:""}},source_meta:{page_domain:Object(Ke.a)(t)||"",page_url:t||""}}})));case 10:p(c?Object(A.j)():i?Object(Ne.x)({boardId:s,counter:l}):Object(A.i)());case 11:case"end":return m.stop()}}),null,this)},r.onKeyUp=function(e){e.keyCode===nt.b&&this.isParseUrlAllowed()&&this.loadImagesFromUrl()},r.onClear=function(){this.hasCardsLoadedFromUrl()?this.removeImages():this.setState({url:"",validation:v()({},this.state.validation,{url:!0})})},r.showOpenChatNotification=function(){(0,this.props.dispatch)(Object(at.a)({type:G.b.CHAT_OPENED}))},r.hasCardsLoadedFromUrl=function(){var e=this.state,t=e.url,r=e.validation,a=this.props.content;if(r.url&&t)return a.some((function(e){var t=Object(Qt.a)(e);return t&&!t.match(/^data:image/)}))},r.isParseUrlAllowed=function(){var e=this.state,t=e.url,r=e.validation,a=e.cardsLoading,n=this.hasCardsLoadedFromUrl();return Boolean(r.url&&t)&&!a&&!n},r.render=function(){var e=this,t=this.props,r=t.content,a=t.instantSave,n=t.hasOriginalId,o=t.showChatOnboarding,c=this.state,i=c.title,s=c.price,l=c.description,p=c.url,u=c.validation,d=c.cardsLoading,h=c.isDirty,m=this.hasCardsLoadedFromUrl(),b=Boolean(u.url&&p)&&Object(Ke.a)(p),f=this.isParseUrlAllowed(),v=this.isProductValid();return j.createElement("div",{className:"add"},j.createElement("div",{className:"add-column"},j.createElement(se.a,{title:n?ke.editProduct():ke.addProduct(),hideDialog:!h,back:!1,close:!0}),o&&j.createElement("div",{className:"add-onboarding-chat"},j.createElement("div",{className:"add-onboarding-chat__description"},j.createElement("span",{className:"add-onboarding-chat__title"},ot.onboardingChatTitle()),j.createElement("span",{className:"add-onboarding-chat__subtitle"},ot.onboardingChatSubtitle())),j.createElement(Wr.a,{type:"blue",onClick:this.showOpenChatNotification})),j.createElement("div",{className:"add-content"},j.createElement(mr,null,j.createElement(br.a,{value:i,label:ot.title(),placeholder:!1,validator:Yt,onValidate:this.onValidate("title"),inputComponentRef:this.setInputRef("title"),onChange:this.onChange("title"),focused:!0})),j.createElement(mr,null,j.createElement(br.a,{value:s,label:ot.price(),placeholder:!1,mods:{price:!0},currency:"₽",validator:Kt,onChange:this.onPriceChange,inputComponentRef:this.setInputRef("price"),width:"156px",onValidate:this.onValidate("price")})),j.createElement(mr,null,j.createElement(vr.a,{value:l,label:ot.description(),placeholder:ot.descriptionPlaceholder(),validator:Wt.b,onValidate:this.onValidate("description"),onChange:this.onChange("description")})),j.createElement(mr,null,j.createElement(br.a,{value:p,label:ot.source(),placeholder:!1,validator:m?void 0:it,onValidate:this.onValidate("url"),onChange:this.onChange("url"),onKeyUp:this.onKeyUp,onClear:this.onClear,inputComponentRef:this.setInputRef("url"),validateWithThrottle:!0,hasClear:Boolean(p)&&!n,disabled:n})),j.createElement(mr,{mods:{wide:!0}},j.createElement(fr.a,{label:ot.photos()}),f&&j.createElement(fr.a,{label:ot.photosFrom({domain:b}),mods:{action:!0},onClick:this.loadImagesFromUrl}),b&&m&&j.createElement(fr.a,{label:ot.removePhotosFrom({domain:b}),mods:{action:!0},onClick:function(){e.removeImages(!0)}}),r.length?j.createElement(j.Fragment,null,j.createElement("div",{className:Object(Le.a)("add-serial-content",{product:!0})},j.createElement(Mr,null),r.map((function(e,t){return j.createElement(wr,{key:t,cardContent:e,ind:t})})))):j.createElement(j.Fragment,null,d?j.createElement("div",{className:"add-content__spinner"},j.createElement(xe.a,{size:"L"})):j.createElement(Re,{mods:{wide:!0},buttonType:"normal"})))),j.createElement(ie.a,{hideBack:!1,label:n?ot.save():a?ot.add():ot.next(),onClick:this.onClickButton,mods:{fixed:!1},actionType:v?"action":"normal"})))},t}(j.Component),C()(Ur.prototype,"onChange",[xr],Object.getOwnPropertyDescriptor(Ur.prototype,"onChange"),Ur.prototype),C()(Ur.prototype,"onPriceChange",[Pr],Object.getOwnPropertyDescriptor(Ur.prototype,"onPriceChange"),Ur.prototype),C()(Ur.prototype,"loadImagesFromUrl",[Sr],Object.getOwnPropertyDescriptor(Ur.prototype,"loadImagesFromUrl"),Ur.prototype),C()(Ur.prototype,"removeImages",[Lr],Object.getOwnPropertyDescriptor(Ur.prototype,"removeImages"),Ur.prototype),C()(Ur.prototype,"onValidate",[Nr],Object.getOwnPropertyDescriptor(Ur.prototype,"onValidate"),Ur.prototype),C()(Ur.prototype,"setInputRef",[Tr],Object.getOwnPropertyDescriptor(Ur.prototype,"setInputRef"),Ur.prototype),C()(Ur.prototype,"isProductValid",[Ir],Object.getOwnPropertyDescriptor(Ur.prototype,"isProductValid"),Ur.prototype),C()(Ur.prototype,"onClickButton",[Fr],Object.getOwnPropertyDescriptor(Ur.prototype,"onClickButton"),Ur.prototype),C()(Ur.prototype,"onKeyUp",[Ar],Object.getOwnPropertyDescriptor(Ur.prototype,"onKeyUp"),Ur.prototype),C()(Ur.prototype,"onClear",[Br],Object.getOwnPropertyDescriptor(Ur.prototype,"onClear"),Ur.prototype),C()(Ur.prototype,"showOpenChatNotification",[Rr],Object.getOwnPropertyDescriptor(Ur.prototype,"showOpenChatNotification"),Ur.prototype),Ur),Jr=Object(E.b)((function(e){var t=Object(S.b)(e),r=t&&t.content||[],a=t&&Object(Bt.a)(t),n=Object(Mt.a)(t),o=Object(Xt.a)(e).boardId,c=t&&t.original_id,i=Object(Rt.a)(t),s=Object($t.a)(e),l=Object(Zt.a)(e,tr.d.COLLECTIONS_DESKTOP_ADD_PRODUCT_WITH_CHAT),p=Object(It.a)(e);return{title:i,description:t&&t.description,price:a?String(a):"",url:n,content:r,hasSelected:t&&Boolean(Object(Ut.a)(t)),instantSave:p,hasOriginalId:Boolean(c),boardId:o,showChatOnboarding:Boolean(!Object(er.a)(s)&&l)}}))(qr),Gr=r("jMNR"),Yr=Object($.a)((function(e,t){var r=e.counter,a=t.getState,n=t.dispatch,o=a(),c=Object(S.b)(o),i=Object(Ut.a)(c)||0;if(c&&i>0){var s=Object(It.a)(o),l=Boolean(c&&c.original_id);if(s&&!l){var p=Object(Xt.a)(o).boardId;n(Object(Ne.x)({boardId:p,counter:r})),H.d.clickAuthorsSeriesSave({isInstant:s})}else n(Object(A.i)())}else n(Object(X.a)({type:G.b.SELECT_CARDS}))})),Zr=(Vr=Object(w.a)(),Hr=Object(w.a)(),Kr=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).state={dragInProgress:!1},t}y()(t,e);var r=t.prototype;return r.onDragStart=function(){this.setState({dragInProgress:!0})},r.onDragStop=function(){this.setState({dragInProgress:!1})},r.render=function(){var e=this.props,t=e.content,r=e.hasSelectedCard,a=e.hideBack,n=e.nextLabel,o=e.instantSave,c=e.dispatch,i=e.counter,s=this.state.dragInProgress,l=o?Gr.addToCollection():Gr.chooseCollection(),p=n||l,u=j.createElement("div",{className:Object(M.a)("add-serial-content",{footer:!0})},j.createElement(Mr,null),t&&t.map((function(e,t){return j.createElement(wr,{key:t,cardContent:e,ind:t})})));return j.createElement("div",{className:"add"},j.createElement("div",{className:"add-column"},j.createElement(se.a,{title:Gr.addSerialTitle(),close:!0,back:!1}),j.createElement(ce,{onFilesDrop:function(){H.d.clickAuthorsSeriesUpload({type:"drag"})},onFilesDragStart:this.onDragStart,onFilesDragStop:this.onDragStop},u),j.createElement(ie.a,{hideBorder:s,mods:{border:!s,fixed:!1},actionType:r?"action":"normal",label:p,onClick:function(){c(Yr({counter:i}))},hideBack:a,showSelectAll:!0})))},t}(j.Component),C()(Kr.prototype,"onDragStart",[Vr],Object.getOwnPropertyDescriptor(Kr.prototype,"onDragStart"),Kr.prototype),C()(Kr.prototype,"onDragStop",[Hr],Object.getOwnPropertyDescriptor(Kr.prototype,"onDragStop"),Kr.prototype),Kr),Qr=Object(E.b)((function(e){var t=Object(S.b)(e);return{content:t&&t.content||[],hasSelectedCard:(Object(Ut.a)(t)||0)>0,instantSave:Object(It.a)(e)}}))(Zr);r("1S5O"),r("OLcw");var Xr,$r,ea=function(e){var t,r=e.type,a=e.title,n=e.onClick,o=e.children;return j.createElement("div",{className:"add-type__item",onClick:n},j.createElement("div",{className:Object(M.a)("add-type__icon",(t={},t[r]=!0,t))}),j.createElement("div",{className:"add-type__title"},a),o)},ta=function(e,t){return e[e[t="LINK"]="image-by-link"]=t,e[e[t="PHOTO"]="image-by-photo"]=t,e[e[t="DEVICE"]="image-by-device"]=t,e}({}),ra={type:Y.a.IMAGE,label:ke.image(),action:Ne.o},aa={type:Y.a.LINK,label:ke.link(),action:Ne.p},na=(ta.DEVICE,ke.imageByDevice(),ta.PHOTO,ke.imageByPhoto(),ta.LINK,ke.imageByLink(),Ne.u,{type:Y.a.PRODUCT,label:ke.product(),action:Ne.q}),oa={type:"collection",label:ke.collection(),action:A.h};function ca(e){var t=[];return t.push(ra),t.push(aa),Object(Zt.a)(e,tr.d.COLLECTIONS_DESKTOP_ADD_PRODUCT)&&t.push(na),t.push(oa),t}r("QY/0");var ia=(Xr=Object(w.a)(),$r=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).state={},t}y()(t,e);var r=t.prototype;return r.componentDidMount=function(){H.d.showAuthorsTypes(this.props.counter)},r.onFileChange=function(e){var t,r,a,n;return U.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.props,r=t.dispatch,a=t.counter,H.d.clickAuthorsImageUpload(v()({type:"input"},a)),n=e.target,o.prev=3,o.next=6,U.a.awrap(r(te({data:n.files})));case 6:r(Object(Ne.s)()),n.value="",o.next=12;break;case 10:o.prev=10,o.t0=o.catch(3);case 12:case"end":return o.stop()}}),null,this,[[3,10]])},r.render=function(){var e=this,t=this.props,r=t.dispatch,a=t.types,n=t.counter,o=this.state.loading,c=j.createElement(j.Fragment,null,j.createElement(se.a,{title:ke.title(),back:!1,mods:{gray:!0},close:!0}),j.createElement("div",{className:"add-type-list"},o?j.createElement(xe.a,{size:"L"}):a.map((function(t){var a=t.type,o=t.label,c=t.action;return j.createElement(j.Fragment,{key:a},j.createElement(ea,{type:a,title:o,onClick:function(){c&&r(c()),H.d.clickAuthorsTypes(v()({},n,{type:a}))}},[ta.DEVICE,ta.PHOTO].includes(a)&&j.createElement("input",{type:"file",accept:"image/*",capture:a===ta.PHOTO&&"camera",onChange:e.onFileChange,multiple:!0})))}))));return j.createElement(j.Fragment,null,j.createElement(ce,{onFilesDragStart:function(){e.setState({loading:!0})},onFilesDragStop:function(){e.setState({loading:!1})},onFilesDrop:function(){r(Object(Ne.v)())},isAddCardTypeModal:!0},c))},t}(j.Component),C()($r.prototype,"onFileChange",[Xr],Object.getOwnPropertyDescriptor($r.prototype,"onFileChange"),$r.prototype),$r),sa=Object(E.b)((function(e){return{types:ca(e)}}))(ia),la=r("HpZU"),pa=r("ikWr"),ua=r("nt9X"),da=r("WxY5"),ha=r("Pxkf"),ma=r("VqUl"),ba=r("xi2f");r("JDoN");var fa=Object(E.a)((function(e){var t,r,a=Object($t.a)(e),n=Object(ye.a)(e);return Object(I.a)(n)?(t=n,r=Object(ua.a)(n)):t=a,{userId:Object(N.a)(t),description:Object(pa.a)(t),asCompanyLogin:r}}))((function(e){var t=e.userId,r=e.description,a=void 0===r?"":r,n=e.asCompanyLogin,o=e.dispatch,c=j.useState(a),i=c[0],s=c[1],l=j.useState(!0),p=l[0],u=l[1],d=Object(ha.a)();return j.createElement("div",{className:"add"},j.createElement("div",{className:"add-column"},j.createElement(se.a,{title:ba.title(),close:!0}),j.createElement("div",{className:"add-profile-settings"},j.createElement(vr.a,{value:i,label:ba.description(),placeholder:n?ba.companyDescriptionPlaceholder():ba.descriptionPlaceholder(),validator:la.a,onChange:function(e){s(e.target.value)},onValidate:function(e){var t=e.valid;u(t)}}),!n&&j.createElement("div",{className:"add-profile-settings__controls"},j.createElement("div",{className:"add-profile-settings__control"},j.createElement(ma.a,{label:ba.chatLabel()},j.createElement(Wr.a,{shape:"round",className:"add-profile-settings__control__button"}),j.createElement("span",{className:"add-profile-settings__control__description"},ba.chatDescription()))))),j.createElement(ie.a,{label:ba.save(),backLabel:ba.cancel(),onClick:function(){if(null===i)return o(Object(A.e)());p&&o(Object(da.a)({id:t,value:{description:i},asCompanyLogin:n,counter:d}))},mods:{border:!0},actionType:p?"action":"normal"})))}));r.d(t,"components",(function(){return va}));var va=v()({AddBoardCreate:_e,AddBoardsList:me,AddCardType:sa,AddCardImageUrl:Tt,AddCardSerial:Qr,AddCardLink:At,AddCardProduct:Jr},{AddCardImageFile:We,AddProfileSettings:fa},{},{})},ttVL:function(e,t,r){},w48H:function(e,t,r){"use strict";var a=r("o0o1"),n=r.n(a),o=r("0Boe"),c=r("nt9X"),i=r("/bNA"),s=r("4RqY"),l=r("rreP"),p=r("CqvR"),u=function(e,t){return e[e.UPDATED="updated"]="UPDATED",e}({}),d=Object(s.a)((function(e,t){var r,a,o;return n.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.type,e.options,a=t.dispatch,r===u.UPDATED&&(o=p.userUpdated()),o&&a(Object(l.a)({message:o}));case 4:case"end":return n.stop()}}))})),h=r("sioy"),m=r("nAK0");r.d(t,"a",(function(){return b}));var b=Object(s.a)((function(e,t){var r,a,s,l,p,b,f,v,O,y,g;return n.a.async((function(C){for(;;)switch(C.prev=C.next){case 0:return r=e.id,a=e.value,s=e.asCompanyLogin,e.counter,l=t.di,p=t.dispatch,b=t.getState,C.next=4,n.a.awrap(l({request:"request"}));case 4:if(f=C.sent,v=f.request,O=Object(c.a)(b(),r)){C.next=9;break}throw new Error("User not found");case 9:return y=Object(o.a)("/collections/api/user/",{as_company:s}),C.prev=10,C.next=13,n.a.awrap(v.patch(y,a));case 13:g=C.sent,p(Object(h.a)({id:r,value:g})),m.d.finishUserEdit({userLogin:O}),p(d({type:u.UPDATED})),C.next=23;break;case 19:throw C.prev=19,C.t0=C.catch(10),i.a.showXHRMessage(C.t0),C.t0;case 23:case"end":return C.stop()}}),null,null,[[10,19]])}))},wyFA:function(e,t,r){var a=r("cDcd");function n(e){return a.createElement("svg",e,a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.343 3.879L6 9.536l5.657-5.657-1.414-1.415L6 6.707 1.757 2.464.343 3.879z"}))}n.defaultProps={width:"12",height:"12",viewBox:"0 0 12 12"},e.exports=n,n.default=n},x2xq:function(e,t,r){},xi2f:function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({title:"Редактирование профиля",description:"Описание",descriptionPlaceholder:"Описание пользователя",companyDescriptionPlaceholder:"Описание организации",chatLabel:"Чат со мной",chatDescription:"На страницах вашего профиля, коллекций и карточек появится кнопка чата с вами",save:"Save changes",cancel:"Отмена"})},xmbT:function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({loadFromComputer:"Upload from your computer",loadByUrl:"Via a URL"})},xzl5:function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({dragStart:"Drop files here",dragError:"Нельзя перетащить файлы"})},yiA1:function(e,t,r){"use strict";var a=r("pVnL"),n=r.n(a),o=r("cDcd"),c=r("6ga4"),i=r("e6f9"),s=r("HtIP"),l=r("Toh8");r("Jdkk"),r("ATSa");var p=function(e){return o.createElement(l.a,n()({className:"cl-board-list-item-placeholder",picture:!0,title:!0},e))},u=r("A6Lc"),d=r("TjeA");r("Z5kG"),r.d(t,"a",(function(){return h})),r("ofe4");var h=function(e){var t,r=e.boardId,a=e.title,l=e.bgImage,h=e.isPrivate,m=e.isWishlist,b=e.isCurrentBoard,f=e.coauthorsCount,v=e.onClick,O=e.onRemoveClick,y=e.isLoading,g=e.isSaving,C=e.broEmpty,j=e.query,E=e.thumbMods,w={},_="board-list"+(b?"__checkmark":"__add-button");if(y)return o.createElement(p,{props:{}});if(j){var k=Object(i.a)(j),D=new RegExp("("+k+")","gi");if(1===(t=a.split(D)).length)return null}var x=t?t.map((function(e,t){return o.createElement(o.Fragment,{key:t},t%2?o.createElement("b",{className:"text_bold"},e):e)})):a;l&&(w.backgroundImage="url("+l+")");var P=Object(c.a)("board-list__thumb",n()({},C?{"bro-empty":!0}:{empty:!l},{},E));return o.createElement("div",{className:Object(c.a)("board-list__item",{current:b}),onClick:v},o.createElement("div",{className:P,style:w}),o.createElement("div",{className:"board-list__title"},o.createElement("div",{className:"board-list__title-wrap"},Boolean(r&&f)&&o.createElement(u.a,{className:"board-list__title-coauthors",boardId:r}),o.createElement("span",{className:Object(c.a)("board-list__title-text",{icon:(h||m)&&!(h&&m),icons:h&&m})},x),m&&o.createElement("i",{className:"board-list__icon-giftbox"}),h&&o.createElement("i",{className:"board-list__icon-padlock"})),b&&o.createElement("p",{className:"board-list__title-subtext"},d.saved())),g?o.createElement(s.a,{size:"M",gif:!1}):o.createElement("div",{className:Object(c.a)("board-list__control",{current:b,trash:Boolean(O)}),onClick:function(e){e.stopPropagation(),b&&O?O(e):v&&v(e)}},o.createElement("div",{className:_})))}},yiEq:function(e,t,r){},ywnR:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var a=r("o0o1"),n=r.n(a),o=r("pVnL"),c=r.n(o),i=r("BZL/"),s=r("om3R"),l=r("7/cf"),p=r("hYN3"),u=r("1nxc"),d=r("plYr"),h=r("Hxdx"),m=r("izju"),b=r("y144"),f=r("4RqY"),v=r("nAK0"),O={xhrFields:{withCredentials:!0},options:{credentials:"include"}},y=Object(f.a)((function(e,t){var r,a,o,f,y,g,C,j,E,w,_,k,D,x,P;return n.a.async((function(S){for(;;)switch(S.prev=S.next){case 0:return r=t.getState,a=t.dispatch,o=t.di,S.next=3,n.a.awrap(o("request"));case 3:if(f=S.sent,y=r(),g=Object(l.b)(y),C=Object(s.a)(g),!(j=e&&e.url||Object(h.a)(C))){S.next=43;break}return S.prev=9,E=Object(p.a)("/collections/api/pages/parse/?source_type=link"),S.next=13,n.a.awrap(Object(d.a)((function(){return f.post(E,{url:j},O)})));case 13:if(w=S.sent,_=w&&w.results&&w.results.images,k=null,!_||!_.length){S.next=34;break}D=0;case 18:if(!(D<_.length)){S.next=34;break}return x=_[D],S.prev=20,S.next=23,n.a.awrap(Object(i.a)(x.url));case 23:if(!(P=S.sent)||!Object(u.a)(P)){S.next=27;break}return k=x.url,S.abrupt("break",34);case 27:S.next=31;break;case 29:S.prev=29,S.t0=S.catch(20);case 31:D++,S.next=18;break;case 34:return a(Object(b.a)({value:{title:w.title||"",description:w.description||"",content:[c()({source_type:m.a.LINK},C,{source:c()({},C?C.source:{},{url:j,preview:k})})]}})),v.d.techParseRequest({type:"link",code:200,count:_&&_.length?_.length:0,href:j}),S.abrupt("return",w);case 39:throw S.prev=39,S.t1=S.catch(9),v.d.techParseRequest({type:"link",code:S.t1?S.t1.status:-1,href:j}),S.t1;case 43:case"end":return S.stop()}}),null,null,[[9,39],[20,29]])}))},z2Iz:function(e,t,r){},zARl:function(e,t,r){var a=r("C4oF").translateWrapper;e.exports=a({newCollection:"Add to new collection"})},zJZA:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var a=r("iABh"),n=2048;function o(e){var t={valid:!0};return e&&e.length===n?t.message=a.cardDescriptionMaxLength:e&&e.length>n&&(t={valid:!1,message:a.cardDescriptionMaxLength}),t}},zgHt:function(e,t,r){"use strict";r.d(t,"a",(function(){return C}));var a=r("pVnL"),n=r.n(a),o=r("8OQS"),c=r.n(o),i=r("cDcd"),s=r("JxqJ"),l=r("nAK0"),p=r("Pxkf"),u=r("fjc+"),d=r("C9FQ"),h=r("EvZm"),m=r("BiF8"),b=r.n(m),f=r("r4I1"),v=r("MTjZ"),O=r("lhXF"),y=r("+3Hv"),g=(r("b65a"),r("M0w2")),C=Object(s.a)((function(e){var t=Object(v.a)(e);return{isUserAllowChat:Object(f.a)(t),tooltipShown:-1===Object(g.a)(t,u.a.CHAT_SETTING_INFO_TOOLTIP)}}))((function(e){var t=e.onClick,r=e.isUserAllowChat,a=e.tooltipShown,o=e.dispatch,s=c()(e,["onClick","isUserAllowChat","tooltipShown","dispatch"]),m=Object(p.a)();return i.createElement(h.a,n()({ei:!0,type:"normal",size:"M",mods:{allow:r},label:r?y.switchOffLabel():y.switchOnLabel(),iconComponent:i.createElement("div",{className:"button__icon"},i.createElement(b.a,{fill:"currentColor"})),icon:!0,onClick:function(e){var c=!r;l.d.clickUserAllowChat(n()({},m,{allow:c})),o(Object(O.a)({key:d.a,mutation:function(){return c}})),c&&!a&&o(Object(O.a)({key:u.a.CHAT_SETTING_INFO_TOOLTIP,mutation:function(){return 0}})),t&&t(e)},props:{}},s))}))}}]);